var e,t,a,s,r,i,o=Object.defineProperty,n=(e,t,a)=>(((e,t,a)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);import{r as l,j as c,_ as d,R as u,F as m,u as h,a as x,C as p,b as g,T as y,I as f,c as b,A as v,d as w,e as j,U as N,f as k,H as S,M as T,h as C,i as E,k as P,S as A,D as _,P as I,L as R,E as L,l as F,m as M,n as D,o as U,Z as Y,p as $,q as z,X as O,s as B,t as H,v as G,w as V,Y as W,x as q,y as K,z as X,B as Q,G as J,J as Z,K as ee,N as te,O as ae,Q as se,V as re,W as ie,$ as oe,a0 as ne,a1 as le,a2 as ce,a3 as de,a4 as ue,a5 as me,a6 as he,a7 as xe,a8 as pe,a9 as ge,aa as ye,ab as fe,ac as be,ad as ve,ae as we,af as je,ag as Ne,ah as ke,ai as Se,aj as Te,ak as Ce,al as Ee,am as Pe,an as Ae,ao as _e,ap as Ie,aq as Re,ar as Le,as as Fe,at as Me,au as De,av as Ue,aw as Ye,ax as $e,ay as ze,az as Oe,aA as Be}from"./react-core-d1332efd.js";import{i as He,g as Ge,a as Ve,b as We,G as qe,s as Ke,o as Xe,c as Qe,d as Je,e as Ze,f as et,u as tt,h as at,j as st,k as rt,l as it,r as ot,m as nt,n as lt,p as ct,q as dt,t as ut,w as mt,v as ht,x as xt,T as pt}from"./firebase-vendor-57fca5f4.js";import{c7 as gt,c8 as yt,c9 as ft,ca as bt,cb as vt,cc as wt,cd as jt,ce as Nt,cf as kt,C as St,cg as Tt,ch as Ct,ci as Et,cj as Pt,ck as At,cl as _t,cm as It,cn as Rt,co as Lt,cp as Ft,cq as Mt,cr as Dt,cs as Ut,ct as Yt,cu as $t,cv as zt,cw as Ot,cx as Bt}from"./vendor-0d2b1560.js";import{m as Ht,A as Gt}from"./ui-vendor-a6bf4b8c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Vt=l.createContext(void 0),Wt=({children:e})=>{const[t,a]=l.useState((()=>{const e=localStorage.getItem("theme");return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")})),s="dark"===t;l.useEffect((()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(t),localStorage.setItem("theme",t)}),[t]);return c.jsx(Vt.Provider,{value:{theme:t,toggleTheme:()=>{a((e=>"light"===e?"dark":"light"))},isDark:s},children:e})},qt=()=>{const e=l.useContext(Vt);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e};function Kt(e,t=[]){var a;let s={};try{s="undefined"!=typeof window&&(null==(a=import.meta)?void 0:a.env)||{}}catch(o){}const r="undefined"!=typeof process&&process.env?process.env:{},i=[e,...t];for(const n of i){if(null==s?void 0:s[n])return s[n];if(null==r?void 0:r[n])return r[n]}}const Xt=()=>{const e=Kt("VITE_APP_URL",["APP_URL","BASE_URL"]);return e&&e.length>0?e:"undefined"!=typeof window&&window.location.origin?window.location.origin:"https://soundswapp.firebaseapp.com"},Qt=gt({VITE_SPOTIFY_CLIENT_ID:yt().optional(),VITE_SPOTIFY_CLIENT_SECRET:yt().optional(),VITE_YOUTUBE_CLIENT_ID:yt().optional(),VITE_YOUTUBE_CLIENT_SECRET:yt().optional(),VITE_YOUTUBE_REDIRECT_URI:yt().optional(),VITE_SENTRY_DSN:yt().optional(),VITE_APP_URL:yt().optional()});let Jt={};try{Jt=(null==(e=import.meta)?void 0:e.env)||{}}catch(uo){}const Zt=Qt.safeParse(Jt);if(!Zt.success){const e=Zt.error.issues.map((e=>e.message)).join("; ");(Jt.PROD||!0)&&console.warn(`Env validation warnings: ${e}`)}const ea={clientId:"7a6f0eca3eb64dd49809a47d19d0cd13",clientSecret:"9e88e567c0104528a76b31bf4d8b067b",redirectUri:(()=>{const e=Kt("VITE_SPOTIFY_REDIRECT_URI",["SPOTIFY_REDIRECT_URI"]);return e||`${Xt()}/callback`})(),scope:"user-read-private user-read-email playlist-read-private playlist-read-collaborative playlist-modify-public playlist-modify-private"},ta="968024909043-qv0sceqajnebc6m3088eoq519n3epbua.apps.googleusercontent.com",aa="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",sa={clientId:Kt("VITE_YOUTUBE_CLIENT_ID",["YOUTUBE_CLIENT_ID","VITE_GOOGLE_CLIENT_ID"])||ta,clientSecret:Kt("VITE_YOUTUBE_CLIENT_SECRET",["YOUTUBE_CLIENT_SECRET","VITE_GOOGLE_CLIENT_SECRET"])||aa,redirectUri:(()=>{const e=Kt("VITE_YOUTUBE_REDIRECT_URI",["YOUTUBE_REDIRECT_URI"]);return e||`${Xt()}/youtube-callback`})(),scope:"https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/youtube.force-ssl"};console.log("[YouTube Config] Environment variables debug:",{VITE_YOUTUBE_CLIENT_ID:(null==(t={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:t.VITE_YOUTUBE_CLIENT_ID)?"SET":"MISSING",VITE_GOOGLE_CLIENT_ID:(null==(a={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:a.VITE_GOOGLE_CLIENT_ID)?"SET":"MISSING",VITE_YOUTUBE_CLIENT_SECRET:(null==(s={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:s.VITE_YOUTUBE_CLIENT_SECRET)?"SET":"MISSING",VITE_GOOGLE_CLIENT_SECRET:(null==(r={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:r.VITE_GOOGLE_CLIENT_SECRET)?"SET":"MISSING",VITE_YOUTUBE_REDIRECT_URI:(null==(i={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})?void 0:i.VITE_YOUTUBE_REDIRECT_URI)?"SET":"MISSING",resolved_clientId:sa.clientId?`${sa.clientId.substring(0,10)}...`:"MISSING",resolved_clientSecret:sa.clientSecret?"SET":"MISSING",resolved_redirectUri:sa.redirectUri});const ra=He({apiKey:"AIzaSyCSjfXh6sHtx1rr1-WLR4ffFHf5lB8gFEA",authDomain:"soundswapp.firebaseapp.com",projectId:"soundswapp",storageBucket:"soundswapp.firebasestorage.app",messagingSenderId:"968024909043",appId:"1:968024909043:web:9509472d462be5d3e70386",measurementId:"G-F3T0GDR2ZV"}),ia=Ge(ra),oa=Ve(ra),na=We(ra);"undefined"!=typeof window&&(window.__FIREBASE_DEFAULTS__={...window.__FIREBASE_DEFAULTS__,analytics:!1});const la=new qe,ca=async()=>!0,da={toFirestore:e=>e,fromFirestore:e=>{var t;return{id:e.id,...(null==(t=e.data)?void 0:t.call(e))||{}}}},ua=async()=>oa,ma=async(e,t)=>(console.log("Saving user insights:",{userId:e,insights:t}),!0),ha=async e=>(console.log("Getting user insights for:",e),null),xa=Object.freeze(Object.defineProperty({__proto__:null,auth:ia,conversionConverter:da,db:oa,default:ra,getUserInsights:ha,googleProvider:la,handleFirestoreError:e=>(console.error("Firestore error:",e),e),reconnectFirestore:ca,saveUserInsights:ma,signInWithGoogle:async()=>{try{return(await Ke(ia,la)).user}catch(e){throw console.error("Google sign-in error:",e),e}},storage:na,waitForFirestore:ua},Symbol.toStringTag,{value:"Module"})),pa=l.createContext(void 0),ga=({children:e})=>{const[t,a]=l.useState(null),[s,r]=l.useState(null),[i,o]=l.useState(!0),[n,u]=l.useState(null),[m,h]=l.useState(!1),[x,p]=l.useState(!1),[g,y]=l.useState(!1),[f,b]=l.useState(!1),[v,w]=l.useState(null),[j,N]=l.useState(null),[k,S]=l.useState(null),[T,C]=l.useState(null),E=async e=>{var t,a;try{const s=await st(Je(oa,"users",e));if(s.exists()){const r=s.data();return{uid:e,email:r.email,displayName:r.displayName,photoURL:r.photoURL,isProvider:r.isProvider||!1,phoneNumber:r.phoneNumber,location:r.location,rating:r.rating,completedTasks:r.completedTasks||0,createdAt:(null==(t=r.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(a=r.updatedAt)?void 0:a.toDate())||new Date}}return null}catch(s){return console.error("Error fetching user profile:",s),null}},P=async(e,t=!1)=>{const a={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||void 0,isProvider:t,createdAt:new Date,updatedAt:new Date};try{return await Qe(Je(oa,"users",e.uid),a),a}catch(s){throw console.error("Error creating user profile:",s),s}},A=async()=>{try{u(null);const e=await Ke(ia,la);a(e.user);let t=await E(e.user.uid);t||(t=await P(e.user,!1)),r(t)}catch(e){throw u(e.message||"Failed to sign in with Google"),e}},_=async()=>{try{console.log("[AuthContext] üéµ Fetching detailed Spotify user profile...");const{getDetailedSpotifyProfile:e}=await d((()=>Promise.resolve().then((()=>js))),void 0),t=await e();t?(console.log("[AuthContext] ‚úÖ Detailed Spotify profile fetched:",{displayName:t.displayName,hasImage:!!t.imageUrl,id:t.id,savedTracks:t.savedTracks,totalPlaylists:t.totalPlaylists,product:t.product}),S({displayName:t.displayName||"Spotify User",imageUrl:t.imageUrl,images:t.imageUrl?[{url:t.imageUrl}]:[],id:t.id,email:t.email,externalUrls:t.externalUrls,country:t.country,product:t.product,followers:t.followers,publicPlaylists:t.publicPlaylists,privatePlaylists:t.privatePlaylists,collaborativePlaylists:t.collaborativePlaylists,totalPlaylists:t.totalPlaylists,followingArtists:t.followingArtists,savedTracks:t.savedTracks,savedAlbums:t.savedAlbums,topGenres:t.topGenres,accountType:t.accountType,explicitContentFilter:t.explicitContentFilter,audioQuality:t.audioQuality,offlineDownloads:t.offlineDownloads,deviceLimit:t.deviceLimit,lastActive:t.lastActive,listeningTime:t.listeningTime,monthlyListeners:t.monthlyListeners,nextBilling:t.nextBilling,crossfade:t.crossfade,equalizer:t.equalizer}),w(null)):(console.warn("[AuthContext] ‚ö†Ô∏è No Spotify profile data returned"),S(null),w("Unable to fetch Spotify profile"))}catch(e){throw console.error("[AuthContext] ‚ùå Error fetching Spotify profile:",e),w(e.message||"Failed to fetch Spotify profile"),S(null),e}},I=async()=>{try{console.log("[AuthContext] üé• Fetching YouTube user profile...");const e=(await d((()=>Promise.resolve().then((()=>ba))),void 0)).default,t=await e.getTokens("youtube");if(!(null==t?void 0:t.accessToken))throw new Error("No YouTube access token available");const a=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${t.accessToken}`,"Content-Type":"application/json"}});if(!a.ok){if(401===a.status){console.log("[AuthContext] YouTube token expired, attempting refresh...");const a=await e.refreshTokensPublic("youtube",t.refreshToken);if(a){const e=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a.accessToken}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`YouTube profile fetch failed: ${e.status}`);const t=await e.json();return console.log("[AuthContext] ‚úÖ YouTube profile fetched (after refresh):",{name:t.name,hasImage:!!t.picture,id:t.id}),C({displayName:t.name||"YouTube User",imageUrl:t.picture,picture:t.picture,id:t.id,email:t.email,locale:t.locale}),void N(null)}throw new Error("Failed to refresh YouTube token")}throw new Error(`YouTube profile fetch failed: ${a.status}`)}const s=await a.json();console.log("[AuthContext] ‚úÖ YouTube profile fetched:",{name:s.name,hasImage:!!s.picture,id:s.id}),C({displayName:s.name||"YouTube User",imageUrl:s.picture,picture:s.picture,id:s.id,email:s.email,locale:s.locale}),N(null)}catch(e){throw console.error("[AuthContext] ‚ùå Error fetching YouTube profile:",e),N(e.message||"Failed to fetch YouTube profile"),C(null),e}};l.useEffect((()=>Xe(ia,(async e=>{if(a(e),e){const t=await E(e.uid);r(t),await(async()=>{try{const{isSpotifyAuthenticated:a}=await d((()=>Promise.resolve().then((()=>js))),void 0),s=(await d((()=>Promise.resolve().then((()=>ba))),void 0)).default;console.log("[AuthContext] Checking platform auth status...");try{const t=await a();if(console.log("[AuthContext] Spotify auth status:",t),h(t),t)try{console.log("[AuthContext] üéµ Fetching Spotify profile on app load..."),await _()}catch(e){console.warn("[AuthContext] ‚ö†Ô∏è Failed to fetch Spotify profile on app load:",e)}}catch(t){console.warn("[AuthContext] Error checking Spotify auth:",t),h(!1)}try{const t=await s.getTokens("youtube"),a=!!(null==t?void 0:t.accessToken);if(console.log("[AuthContext] YouTube auth status:",a),p(a),a)try{console.log("[AuthContext] üé• Fetching YouTube profile on app load..."),await I()}catch(e){console.warn("[AuthContext] ‚ö†Ô∏è Failed to fetch YouTube profile on app load:",e)}}catch(t){console.warn("[AuthContext] Error checking YouTube auth:",t),p(!1)}}catch(t){console.error("[AuthContext] Error in checkPlatformAuthStatus:",t)}})()}else r(null),h(!1),p(!1);o(!1)}))),[]),l.useEffect((()=>{const e=async e=>{const t=e;if(console.log("[AuthContext] Spotify auth changed:",t.detail),h(t.detail.authenticated),w(null),t.detail.authenticated)try{console.log("[AuthContext] üéµ Spotify authenticated, fetching profile..."),await _()}catch(a){console.warn("[AuthContext] ‚ö†Ô∏è Failed to fetch Spotify profile after auth:",a)}else S(null)},t=async e=>{const t=e;if(console.log("[AuthContext] YouTube auth changed:",t.detail),p(t.detail.authenticated),N(null),t.detail.authenticated)try{console.log("[AuthContext] üé• YouTube authenticated, fetching profile..."),await I()}catch(a){console.warn("[AuthContext] ‚ö†Ô∏è Failed to fetch YouTube profile after auth:",a)}else C(null)};return window.addEventListener("spotify-auth-changed",e),window.addEventListener("youtube-auth-changed",t),console.log("[AuthContext] Added platform auth event listeners"),()=>{window.removeEventListener("spotify-auth-changed",e),window.removeEventListener("youtube-auth-changed",t),console.log("[AuthContext] Removed platform auth event listeners")}}),[]);const R={user:t,userProfile:s,loading:i,isAuthenticated:!!t,isProvider:(null==s?void 0:s.isProvider)||!1,error:n,signInWithEmail:async(e,t)=>{try{u(null);const s=await Ze(ia,e,t);a(s.user);const i=await E(s.user.uid);r(i)}catch(s){throw u(s.message||"Failed to sign in"),s}},signUpWithEmail:async(e,t,s,i)=>{try{u(null);const o=await et(ia,e,t);await tt(o.user,{displayName:s});const n=await P(o.user,i);a(o.user),r(n)}catch(o){throw u(o.message||"Failed to create account"),o}},signInWithGoogle:A,signOut:async()=>{try{await at(ia),a(null),r(null)}catch(e){throw u(e.message||"Failed to sign out"),e}},updateUserProfile:async e=>{if(!t)throw new Error("No user logged in");try{const a={...s,...e,updatedAt:new Date};await Qe(Je(oa,"users",t.uid),a,{merge:!0}),r(a)}catch(a){throw console.error("Error updating user profile:",a),a}},clearError:()=>u(null),hasSpotifyAuth:m,hasYouTubeAuth:x,setHasSpotifyAuth:h,setHasYouTubeAuth:p,disconnectFromSpotify:async()=>{try{h(!1),S(null),w(null)}catch(e){throw w(e.message||"Failed to disconnect from Spotify"),e}},disconnectFromYouTube:async()=>{try{p(!1),C(null),N(null)}catch(e){throw N(e.message||"Failed to disconnect from YouTube"),e}},isConnectingSpotify:g,isConnectingYouTube:f,spotifyError:v,youtubeError:j,spotifyUserProfile:k,youtubeUserProfile:T,fetchSpotifyProfile:_,fetchYouTubeProfile:I,checkYouTubeAuth:async()=>{try{return x}catch(e){return N(e.message||"Failed to check YouTube auth"),!1}},signIn:async()=>A()};return c.jsx(pa.Provider,{value:R,children:e})},ya=()=>{const e=l.useContext(pa);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};class fa{static async storeTokens(e,t){const a=ia.currentUser;if(!a)throw console.error("[TokenManager] No authenticated user"),new Error("No authenticated user");console.log(`[TokenManager] Storing ${e} tokens for user:`,a.uid),this.storeTokensLocally(e,t),console.log(`[TokenManager] ‚úÖ Tokens stored locally for ${e}`);try{await this.storeTokensInFirestore(e,t,a.uid),console.log(`[TokenManager] ‚úÖ Tokens stored in Firestore for ${e}`)}catch(s){console.warn(`[TokenManager] ‚ö†Ô∏è Failed to store ${e} tokens in Firestore, using localStorage fallback:`,s)}}static storeTokensLocally(e,t){try{const a=`${this.LOCAL_STORAGE_PREFIX}${e}`,s={...t,storedAt:Date.now()};localStorage.setItem(a,JSON.stringify(s)),console.log(`[TokenManager] üîç localStorage storage test for ${e}:`,{key:a,hasAccessToken:!!t.accessToken,hasRefreshToken:!!t.refreshToken,expiresAt:t.expiresAt})}catch(a){throw console.error(`[TokenManager] Failed to store ${e} tokens in localStorage:`,a),a}}static async storeTokensInFirestore(e,t,a){for(let r=1;r<=this.FIRESTORE_RETRY_ATTEMPTS;r++)try{const s=Je(oa,"users",a,"tokens",e);return void(await Qe(s,{...t,updatedAt:(new Date).toISOString()}))}catch(s){if(console.warn(`[TokenManager] Firestore attempt ${r}/${this.FIRESTORE_RETRY_ATTEMPTS} failed for ${e}:`,s),r===this.FIRESTORE_RETRY_ATTEMPTS)throw s;await new Promise((e=>setTimeout(e,this.FIRESTORE_RETRY_DELAY*r)))}}static async getTokens(e){const t=ia.currentUser;if(!t)return console.error("[TokenManager] No authenticated user"),null;console.log(`[TokenManager] Getting ${e} tokens for user:`,t.uid);let a=null;try{a=await this.getTokensFromFirestore(e,t.uid),a&&console.log(`[TokenManager] ‚úÖ Retrieved ${e} tokens from Firestore`)}catch(s){console.warn(`[TokenManager] ‚ö†Ô∏è Failed to get ${e} tokens from Firestore, trying localStorage:`,s)}if(!a)try{a=this.getTokensFromLocalStorage(e),a&&console.log(`[TokenManager] ‚úÖ Retrieved ${e} tokens from localStorage fallback`)}catch(s){console.warn(`[TokenManager] Failed to get ${e} tokens from localStorage:`,s)}if(!a)return console.log(`[TokenManager] No ${e} tokens found in either Firestore or localStorage`),null;if(this.getTokenStatus(a).needsRefresh&&a.refreshToken){console.log(`[TokenManager] Token for ${e} needs refresh, attempting automatic refresh`);try{const t=await this.refreshTokens(e,a.refreshToken);if(t)return await this.storeTokens(e,t),t}catch(s){console.warn(`[TokenManager] Failed to refresh tokens for ${e}:`,s)}}return a}static async getTokensFromFirestore(e,t){const a=Je(oa,"users",t,"tokens",e),s=await st(a);return s.exists()?s.data():null}static getTokensFromLocalStorage(e){try{const t=`${this.LOCAL_STORAGE_PREFIX}${e}`,a=localStorage.getItem(t);if(console.log(`[TokenManager] üîç localStorage retrieval test for ${e}:`,{key:t,hasStoredData:!!a,storedDataLength:(null==a?void 0:a.length)||0}),a){const t=JSON.parse(a);return console.log(`[TokenManager] üîç Retrieved token data for ${e}:`,{hasAccessToken:!!t.accessToken,hasRefreshToken:!!t.refreshToken,expiresAt:t.expiresAt,storedAt:t.storedAt}),t.storedAt&&Date.now()-t.storedAt>6048e5&&console.warn(`[TokenManager] ${e} tokens in localStorage are older than 7 days`),t}}catch(t){console.error(`[TokenManager] Error reading ${e} tokens from localStorage:`,t)}return null}static getTokenStatus(e){const t=Math.floor(Date.now()/1e3),a=e.expiresAt-t;return{isValid:a>0,expiresIn:a,needsRefresh:a<=this.REFRESH_BUFFER}}static startTokenMonitoring(e,t){const a=this.refreshTimers.get(e);a&&clearTimeout(a);const s=this.getTokenStatus(t),r=Math.max(0,1e3*(s.expiresIn-this.REFRESH_BUFFER));console.log(`[TokenManager] Starting monitoring for ${e}, refresh in ${Math.round(r/1e3)}s`);const i=setTimeout((async()=>{console.log(`[TokenManager] Auto-refreshing tokens for ${e}`);const a=await this.refreshTokens(e,t.refreshToken);a?(await this.storeTokens(e,a),this.notifyListeners(e,this.getTokenStatus(a))):(console.error(`[TokenManager] Auto-refresh failed for ${e}`),this.notifyListeners(e,{isValid:!1,expiresIn:0,needsRefresh:!1}))}),r);this.refreshTimers.set(e,i)}static async refreshTokens(e,t){let a=null;for(let r=1;r<=3;r++)try{let a;if(console.log(`[TokenManager] Refreshing ${e} tokens, attempt ${r}/3`),"spotify"===e)console.log("[TokenManager] Refreshing Spotify tokens with credentials:",{clientId:ea.clientId?`${ea.clientId.substring(0,10)}...`:"MISSING",hasClientSecret:!!ea.clientSecret}),a=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t,client_id:ea.clientId,client_secret:ea.clientSecret}).toString()});else{if("youtube"!==e)throw new Error(`Unsupported service: ${e}`);if(console.log("[TokenManager] Refreshing YouTube tokens with credentials:",{clientId:sa.clientId?`${sa.clientId.substring(0,10)}...`:"MISSING",hasClientSecret:!!sa.clientSecret}),!sa.clientSecret)throw new Error("YouTube client secret is missing from environment variables. Add VITE_YOUTUBE_CLIENT_SECRET to your .env file.");a=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t,client_id:sa.clientId,client_secret:sa.clientSecret}).toString()})}if(a.ok){const s=await a.json(),r={accessToken:s.access_token,refreshToken:s.refresh_token||t,expiresAt:Math.floor(Date.now()/1e3)+s.expires_in,scope:s.scope};return console.log(`[TokenManager] Successfully refreshed ${e} tokens`),r}{const t=(await a.json().catch((()=>({})))).error||"Unknown error";if(400===a.status&&"invalid_grant"===t)throw console.log(`[TokenManager] Invalid grant for ${e}, tokens are permanently invalid`),this.clearTokens(e),new Error(`HTTP ${a.status}: ${t} - Tokens are permanently invalid`);throw new Error(`HTTP ${a.status}: ${t}`)}}catch(s){a=s,console.warn(`[TokenManager] Refresh attempt ${r} failed for ${e}:`,s),r<3&&await new Promise((e=>setTimeout(e,1e3*Math.pow(2,r))))}return console.error(`[TokenManager] All refresh attempts failed for ${e}:`,a),null}static async refreshTokensPublic(e,t){return this.refreshTokens(e,t)}static async testTokenStorage(e){console.log(`[TokenManager] üß™ Testing token storage and retrieval for ${e}`);if(!ia.currentUser)return void console.error("[TokenManager] No authenticated user for test");const t={accessToken:"test_access_token_123",refreshToken:"test_refresh_token_456",expiresAt:Math.floor(Date.now()/1e3)+3600};console.log("[TokenManager] üß™ Storing test tokens..."),await this.storeTokens(e,t),console.log("[TokenManager] üß™ Retrieving test tokens...");const a=await this.getTokens(e);console.log("[TokenManager] üß™ Test results:",{stored:t,retrieved:a,matches:(null==a?void 0:a.accessToken)===t.accessToken&&(null==a?void 0:a.refreshToken)===t.refreshToken})}static async debugTokenStorage(){const e=ia.currentUser;if(!e)return void console.log("[TokenManager] üîç No authenticated user");console.log(`[TokenManager] üîç Debug token storage for user: ${e.uid}`);const t=`${this.LOCAL_STORAGE_PREFIX}spotify`,a=`${this.LOCAL_STORAGE_PREFIX}youtube`,s=localStorage.getItem(t),r=localStorage.getItem(a);console.log("[TokenManager] üîç localStorage contents:",{spotifyKey:t,hasSpotifyData:!!s,spotifyDataLength:(null==s?void 0:s.length)||0,youtubeKey:a,hasYoutubeData:!!r,youtubeDataLength:(null==r?void 0:r.length)||0});try{const t=await this.getTokensFromFirestore("spotify",e.uid),a=await this.getTokensFromFirestore("youtube",e.uid);console.log("[TokenManager] üîç Firestore contents:",{hasSpotifyTokens:!!t,hasYoutubeTokens:!!a,spotifyHasRefreshToken:!!(null==t?void 0:t.refreshToken),youtubeHasRefreshToken:!!(null==a?void 0:a.refreshToken)})}catch(i){console.error("[TokenManager] üîç Error checking Firestore:",i)}}static addTokenListener(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{var a;null==(a=this.listeners.get(e))||a.delete(t)}}static notifyListeners(e,t){var a;null==(a=this.listeners.get(e))||a.forEach((a=>{try{a(t)}catch(s){console.error(`[TokenManager] Error in token listener for ${e}:`,s)}}))}static async deleteTokens(e){const t=ia.currentUser;if(t){console.log(`[TokenManager] Deleting ${e} tokens for user:`,t.uid);try{const t=`${this.LOCAL_STORAGE_PREFIX}${e}`;localStorage.removeItem(t),console.log(`[TokenManager] ‚úÖ Deleted ${e} tokens from localStorage`)}catch(a){console.warn(`[TokenManager] Failed to delete ${e} tokens from localStorage:`,a)}try{const a=Je(oa,"users",t.uid,"tokens",e);await rt(a),console.log(`[TokenManager] ‚úÖ Deleted ${e} tokens from Firestore`)}catch(a){console.warn(`[TokenManager] ‚ö†Ô∏è Failed to delete ${e} tokens from Firestore (service may be down):`,a)}}else console.error("[TokenManager] No authenticated user")}static clearTokens(e){console.warn("[TokenManager] clearTokens is deprecated, use deleteTokens instead"),this.deleteTokens(e).catch((t=>{console.error(`[TokenManager] Error in clearTokens for ${e}:`,t)}))}static async getCurrentTokenStatus(e){const t=await this.getTokens(e);return t?this.getTokenStatus(t):null}static async hasValidTokens(e){const t=await this.getTokens(e);if(!t)return!1;return this.getTokenStatus(t).isValid}static async initializeMonitoring(){const e=["spotify","youtube"];for(const t of e){const e=await this.getTokens(t);e&&this.startTokenMonitoring(t,e)}}}n(fa,"REFRESH_BUFFER",300),n(fa,"CHECK_INTERVAL",6e4),n(fa,"refreshTimers",new Map),n(fa,"listeners",new Map),n(fa,"LOCAL_STORAGE_PREFIX","soundswapp_tokens_"),n(fa,"FIRESTORE_RETRY_ATTEMPTS",3),n(fa,"FIRESTORE_RETRY_DELAY",1e3),"undefined"!=typeof window&&(window.TokenManagerDebug={testStorage:fa.testTokenStorage,debugStorage:fa.debugTokenStorage,getTokens:fa.getTokens});const ba=Object.freeze(Object.defineProperty({__proto__:null,TokenManager:fa,default:fa},Symbol.toStringTag,{value:"Module"})),va="https://api.spotify.com/v1",wa={PLAYLISTS:36e5,TRACKS:36e5,ARTISTS:864e5},ja={PLAYLISTS:"spotify_playlists_cache",PLAYLISTS_TTL:"spotify_playlists_cache_ttl",TRACKS_PREFIX:"spotify_tracks_cache_",TRACKS_TTL_PREFIX:"spotify_tracks_cache_ttl_",ARTISTS_PREFIX:"spotify_artist_cache_",ARTISTS_TTL_PREFIX:"spotify_artist_cache_ttl_",CODE_VERIFIER:"spotify_code_verifier",TOKEN:"spotify_access_token",TOKEN_EXPIRES:"spotify_token_expires_at"};class Na{static generateRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=crypto.getRandomValues(new Uint8Array(e));return Array.from(a).map((e=>t[e%62])).join("")}static async sha256(e){const t=(new TextEncoder).encode(e);return await crypto.subtle.digest("SHA-256",t)}static base64UrlEncode(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}static generateCodeVerifier(){return this.generateRandomString(64)}static async generateCodeChallenge(e){const t=await this.sha256(e);return this.base64UrlEncode(t)}}class ka{static get(e){const t=localStorage.getItem(e);return t?JSON.parse(t):null}static set(e,t){localStorage.setItem(e,JSON.stringify(t))}static getTtl(e){const t=localStorage.getItem(e);return t?Number(t):null}static setTtl(e,t){localStorage.setItem(e,(Date.now()+t).toString())}static isValid(e){const t=this.getTtl(e);return null!==t&&Date.now()<t}static getCached(e,t){return this.isValid(t)?this.get(e):null}static setWithTtl(e,t,a,s){this.set(e,a),this.setTtl(t,s)}static invalidate(e,t){localStorage.removeItem(e),localStorage.removeItem(t)}}const Sa=class e{static async acquireSlot(){for(;e.inFlight>=e.MAX_CONCURRENT;)await new Promise((e=>setTimeout(e,50)));e.inFlight++}static releaseSlot(){e.inFlight=Math.max(0,e.inFlight-1)}static backoffDelay(e){return Math.min(2e3*Math.pow(2,e),8e3)}static async request(t,a={},s=0){console.log(`[DEBUG] SpotifyApiClient.request(${t}) called, retry: ${s}`),await this.acquireSlot();let r=await(await d((()=>Promise.resolve().then((()=>js))),void 0)).getSpotifyTokenSync()||void 0;if(r||(r=await(await d((()=>Promise.resolve().then((()=>js))),void 0)).getSpotifyToken()||void 0),!r)throw console.error("[DEBUG] No valid Spotify access token available"),this.releaseSlot(),new Error("No valid Spotify access token available. Please reconnect.");const i={};a.headers&&(a.headers instanceof Headers?a.headers.forEach(((e,t)=>{i[t]=e})):"object"==typeof a.headers&&Object.assign(i,a.headers)),Object.keys(i).some((e=>"authorization"===e.toLowerCase()))||(i.Authorization=`Bearer ${r}`),a.headers=i;try{console.log(`[DEBUG] Making request to: ${t}`);const r=new AbortController,i=setTimeout((()=>r.abort()),this.REQUEST_TIMEOUT_MS),n=await fetch(t,{...a,signal:r.signal});if(clearTimeout(i),console.log(`[DEBUG] Response status: ${n.status} ${n.statusText}`),n.ok)return console.log("[DEBUG] Request successful"),this.releaseSlot(),await n.json();if(401===n.status&&s<this.MAX_RETRIES){console.log("[DEBUG] Access token expired (401), refreshing...");try{const r=await fa.getTokens("spotify");if(null==r?void 0:r.refreshToken){if(await fa.refreshTokensPublic("spotify",r.refreshToken)){console.log("[DEBUG] Retrying request after token refresh");const r=await e.request(t,a,s+1);return this.releaseSlot(),r}}}catch(o){console.error("[DEBUG] Token refresh failed:",o)}}if((429===n.status||n.status>=500&&n.status<600)&&s<this.MAX_RETRIES){const r=this.backoffDelay(s);console.log(`[DEBUG] Rate limited or server error, retrying in ${r}ms`),await new Promise((e=>setTimeout(e,r)));const i=await e.request(t,a,s+1);return this.releaseSlot(),i}const l=await n.text();throw console.error(`[DEBUG] Request failed: ${n.status} ${n.statusText} - ${l}`),this.releaseSlot(),new Error(`HTTP ${n.status}: ${n.statusText}`)}catch(n){if(n instanceof DOMException&&"AbortError"===n.name)throw console.error(`[DEBUG] Request timed out after ${this.REQUEST_TIMEOUT_MS}ms`),this.releaseSlot(),new Error("Request timed out. Please try again.");throw this.releaseSlot(),n}}static async parseErrorResponse(e){var t,a;let s=`HTTP error! Status: ${e.status}`;try{const r=await e.json();if(null==(t=null==r?void 0:r.error)?void 0:t.message)s=`Spotify API Error: ${r.error.message}`;else if(null==(a=null==r?void 0:r.error)?void 0:a.status)switch(r.error.status){case 401:s="Authentication failed. Please reconnect to Spotify.";break;case 403:s="You do not have permission to access this resource.";break;case 404:s="Resource not found. It might be private or deleted.";break;case 429:s="Rate limit exceeded. Please try again later.";break;case 500:case 502:case 503:s="Spotify service is currently unavailable. Please try again later."}}catch(uo){console.warn("Failed to parse Spotify error response:",uo)}return s}static async getPaginated(e,t){let a=[],s=e;for(;s;)try{const e={headers:{"Content-Type":"application/json"}};t&&(e.headers.Authorization=`Bearer ${t}`);const r=await this.request(s,e);a=[...a,...r.items],s=null===r.next?void 0:r.next}catch(r){throw r}return a}static async getArtistDetails(e,t=!1){var a,s;if(!t&&this.artistCache[e])return this.artistCache[e];const r=`${ja.ARTISTS_PREFIX}${e}`,i=`${ja.ARTISTS_TTL_PREFIX}${e}`;if(!t){const t=ka.getCached(r,i);if(t)return this.artistCache[e]=t,t}try{const t=await this.request(`${va}/artists/${e}`),o={...t,images:(null==(a=t.images)?void 0:a.sort(((e,t)=>t.width-e.width)))||[],imageUrl:(null==(s=t.images)?void 0:s.length)>0?t.images[0].url:null};return this.artistCache[e]=o,ka.setWithTtl(r,i,o,wa.ARTISTS),o}catch(o){return console.error(`Error fetching artist ${e}:`,o),null}}};n(Sa,"MAX_RETRIES",2),n(Sa,"REQUEST_TIMEOUT_MS",15e3),n(Sa,"inFlight",0),n(Sa,"MAX_CONCURRENT",4),n(Sa,"artistCache",{});let Ta=Sa;const Ca=class e{static getSearchCacheKey(e,t){return`${e.trim().toLowerCase()}::${t}`}static async getProfile(){return Ta.request(`${va}/me`)}static async getPlaylists(e=!1){if(!e){const e=ka.getCached(ja.PLAYLISTS,ja.PLAYLISTS_TTL);if(e)return console.log("Using cached Spotify playlists"),e}console.log("Fetching Spotify playlists from API");const t=await Ta.request(`${va}/me/playlists?limit=50`);return ka.setWithTtl(ja.PLAYLISTS,ja.PLAYLISTS_TTL,t,wa.PLAYLISTS),t}static async getPlaylistTracks(e,t=!1){if(!e||"string"!=typeof e)throw new Error("Invalid playlist ID");const a=e.split(/[/?#]/)[0],s=`${ja.TRACKS_PREFIX}${a}`,r=`${ja.TRACKS_TTL_PREFIX}${a}`;if(!t){const e=ka.getCached(s,r);if(e)return console.log("Using cached Spotify tracks for playlist:",a),e}const i=`${va}/playlists/${a}/tracks?limit=100`,o=await Ta.getPaginated(i);if(0===o.length)throw new Error("No tracks found in this playlist. It might be empty or you may not have access to it.");return ka.setWithTtl(s,r,o,wa.TRACKS),o}static async extractTrackData(e){const t=[];for(let a=0;a<e.length;a+=5){const s=e.slice(a,a+5).map((async e=>{try{const a=e.track;if(!a||!a.id)return console.warn("Invalid track data:",e),null;const s={id:a.id,name:a.name,artists:a.artists.map((e=>e.name)),artistIds:a.artists.map((e=>e.id)),artistImages:[],genres:[],album:a.album.name,duration_ms:a.duration_ms,popularity:a.popularity,explicit:a.explicit,releaseYear:a.album&&a.album.release_date?a.album.release_date.slice(0,4):"",searchQuery:`${a.name} ${a.artists.map((e=>e.name)).join(" ")}`};try{const e=a.artists.map((e=>e.id)).map((e=>Ta.getArtistDetails(e).catch((t=>(console.warn(`Failed to get artist details for ${e}:`,t),null))))),t=new Promise(((e,t)=>setTimeout((()=>t(new Error("Artist details request timed out"))),1e4))),r=await Promise.race([Promise.all(e),t]),i=[],o=[];r.forEach((e=>{e&&(e.genres&&e.genres.length&&i.push(...e.genres),e.images&&e.images.length&&o.push(e.images[0].url))})),s.artistImages=o,s.genres=Array.from(new Set(i))}catch(t){console.warn("Failed to enrich track with artist details:",t)}return s}catch(a){return console.error("Error processing track:",a),null}})),r=await Promise.all(s);t.push(...r.filter(Boolean))}return t}static async getPlaylistById(e){var t;const a=await Ta.request(`${va}/playlists/${e}`);return{id:a.id,name:a.name,description:a.description||"",imageUrl:a.images&&a.images[0]?a.images[0].url:"",trackCount:a.tracks?a.tracks.total:0,owner:a.owner?a.owner.display_name:"",url:null==(t=a.external_urls)?void 0:t.spotify}}static async createPlaylist(t,a="",s=!1){const r=(await e.getProfile()).id;return await Ta.request(`${va}/users/${r}/playlists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,description:a,public:s})})}static async searchTracks(t,a=5){const s=e.getSearchCacheKey(t,a);if(e.searchCache.has(s))return e.searchCache.get(s);const r=Date.now()-e.lastSearchAt;r<e.MIN_SEARCH_INTERVAL_MS&&await new Promise((t=>setTimeout(t,e.MIN_SEARCH_INTERVAL_MS-r)));const i=new URLSearchParams({q:t,type:"track",limit:a.toString(),market:"US"});let o;try{o=await Ta.request(`${va}/search?${i.toString()}`)}catch(n){const e=String((null==n?void 0:n.message)||n);if(!e.includes("429")&&!e.toLowerCase().includes("rate"))throw n;await new Promise((e=>setTimeout(e,500))),o=await Ta.request(`${va}/search?${i.toString()}`)}if(e.lastSearchAt=Date.now(),e.searchCache.set(s,o),e.searchCache.size>e.SEARCH_CACHE_MAX){const t=e.searchCache.keys().next();!t.done&&t.value&&e.searchCache.delete(t.value)}return o}static async addTracksToPlaylist(e,t){if(!e)throw new Error("Invalid playlist ID");if(!t||!t.length)return console.warn("No tracks to add"),!0;const a=100,s=Math.ceil(t.length/a);for(let r=0;r<t.length;r+=a){const i=Math.floor(r/a)+1;console.log(`Adding tracks batch ${i}/${s}`);const o=t.slice(r,r+a);await Ta.request(`${va}/playlists/${e}/tracks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uris:o})}),i<s&&await new Promise((e=>setTimeout(e,100)))}return!0}static clearCache(){ka.invalidate(ja.PLAYLISTS,ja.PLAYLISTS_TTL),Object.keys(localStorage).forEach((e=>{(e.startsWith(ja.TRACKS_PREFIX)||e.startsWith(ja.TRACKS_TTL_PREFIX)||e.startsWith(ja.ARTISTS_PREFIX)||e.startsWith(ja.ARTISTS_TTL_PREFIX))&&localStorage.removeItem(e)})),Ta.artistCache={},console.log("Spotify caches cleared")}static async findUserPlaylistByName(e){const t=((await Ta.request(`${va}/me/playlists?limit=50`)).items||[]).find((t=>((null==t?void 0:t.name)||"").trim().toLowerCase()===e.trim().toLowerCase()));return t?{id:t.id,name:t.name,description:t.description||"",imageUrl:t.images&&t.images[0]?t.images[0].url:"",trackCount:t.tracks?t.tracks.total:0,owner:t.owner?t.owner.display_name:""}:null}};n(Ca,"searchCache",new Map),n(Ca,"SEARCH_CACHE_MAX",200),n(Ca,"lastSearchAt",0),n(Ca,"MIN_SEARCH_INTERVAL_MS",150);const Ea=Ca.getPlaylistTracks,Pa=Ca.extractTrackData,Aa=Ca.createPlaylist,_a=Ca.addTracksToPlaylist,Ia=Ca.getPlaylistById,Ra=Ca.searchTracks,La=Ca.findUserPlaylistByName;Na.generateCodeVerifier.bind(Na),Na.generateCodeChallenge.bind(Na);const Fa="https://www.googleapis.com/youtube/v3",Ma=async e=>{var t,a;try{const s=await e.json();if(console.error("YouTube API error details:",s),null==(t=s.error)?void 0:t.errors){const e=s.error.errors;return e.map((e=>{switch(e.reason){case"quotaExceeded":return"YouTube API quota exceeded. Please try again later.";case"dailyLimitExceeded":return"YouTube API daily limit exceeded. Please try again tomorrow.";case"userRateLimitExceeded":return"YouTube API rate limit exceeded. Please wait a moment and try again.";case"insufficientPermissions":return"Insufficient permissions. Please check your YouTube account settings.";case"invalidCredentials":return"Invalid YouTube credentials. Please reconnect your YouTube account.";case"tokenExpired":return"YouTube authentication expired. Please reconnect your YouTube account.";default:return e.message||"YouTube API error occurred."}})).join(" ")}switch(e.status){case 400:return"Invalid request to YouTube API. Please try again.";case 401:return"YouTube authentication expired. Please reconnect your YouTube account.";case 403:return"YouTube API quota exceeded or insufficient permissions. Please try again later.";case 404:return"YouTube resource not found. Please check your playlist URL.";case 429:return"YouTube API rate limit exceeded. Please wait a moment and try again.";case 500:return"YouTube API server error. Please try again later.";default:return(null==(a=s.error)?void 0:a.message)||`YouTube API error (${e.status})`}}catch(s){return console.error("Failed to parse YouTube error response:",s),`YouTube API error (${e.status}): ${e.statusText}`}},Da=async(e=0)=>{try{const{getYouTubeToken:t,refreshYouTubeToken:a}=await d((()=>Promise.resolve().then((()=>cs))),void 0);let s=await t();if(!s){if(await a()&&(s=await t()),!s)throw console.error("Cannot fetch YouTube playlists: No valid access token"),new Error("No valid YouTube access token available. Please reconnect your YouTube account from the Connections panel.")}const r=new URLSearchParams({part:"snippet,status,contentDetails",mine:"true",maxResults:"50"});let i=await fetch(`${Fa}/playlists?${r.toString()}`,{headers:{Authorization:`Bearer ${s}`}});if(!i.ok){const s=await Ma(i);if(console.error(`YouTube playlists error (${i.status}):`,s),401===i.status){if(await a()){const e=await t();if(e&&(i=await fetch(`${Fa}/playlists?${r.toString()}`,{headers:{Authorization:`Bearer ${e}`}}),i.ok)){const e=await i.json();return console.log("YouTube playlists fetched successfully (after refresh)"),e}}throw new Error("YouTube authentication expired. Please reconnect your YouTube account.")}if(403===i.status)throw new Error("YouTube API quota exceeded. Please try again later or check your YouTube account permissions.");if(429===i.status&&e<3){const t=1e3*Math.pow(2,e);return console.log(`YouTube API rate limited, retrying in ${t}ms (attempt ${e+1}/3)`),await new Promise((e=>setTimeout(e,t))),Da(e+1)}throw new Error(s)}const o=await i.json();return console.log("YouTube playlists fetched successfully"),o}catch(t){if(console.error("Error fetching YouTube playlists:",t),e<3&&(t instanceof TypeError||t instanceof Error&&t.message.includes("fetch")||t instanceof Error&&t.message.includes("500"))){const t=1e3*Math.pow(2,e);return console.log(`Retrying YouTube playlists fetch in ${t}ms (attempt ${e+1}/3)`),await new Promise((e=>setTimeout(e,t))),Da(e+1)}throw t}},Ua=async(e,t)=>{try{console.log("Fetching YouTube playlist items for playlist:",e);const a=[];let s;do{const r=new URLSearchParams({part:"snippet,contentDetails",playlistId:e,maxResults:"50"});s&&r.append("pageToken",s);const i=await fetch(`${Fa}/playlistItems?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}});if(!i.ok){const e=await Ma(i);throw new Error(e)}const o=await i.json();o.items&&o.items.length>0&&a.push(...o.items),s=o.nextPageToken}while(s);return console.log("Fetched YouTube playlist items:",a.length),a}catch(a){throw console.error("Error fetching YouTube playlist items:",a),a instanceof Error?a:new Error(String(a))}},Ya=async(e,t)=>{var a,s;if("true"===localStorage.getItem("use_mock_youtube_data"))return console.log(`Using mock data for YouTube search: "${t}"`),$a(t);try{let e=await Ba();if(!e){if(await Ha()&&(e=await Ba()),!e)throw console.error("Cannot search YouTube: No valid access token"),new Error("No valid YouTube access token available. Please reconnect your YouTube account.")}console.log(`Searching YouTube for: "${t}"`);const i=new URLSearchParams({part:"snippet",q:t,type:"video",maxResults:"5",videoEmbeddable:"true",videoSyndicated:"true"}),o=new AbortController,n=setTimeout((()=>o.abort()),1e4);try{let r=await fetch(`${Fa}/search?${i.toString()}`,{headers:{Authorization:`Bearer ${e}`},signal:o.signal});if(clearTimeout(n),!r.ok){if(401===r.status){if(await Ha()){const e=await Ba();if(e&&(r=await fetch(`${Fa}/search?${i.toString()}`,{headers:{Authorization:`Bearer ${e}`},signal:o.signal}),r.ok)){const e=await r.json();return console.log(`YouTube search successful after refresh, found ${(null==(a=e.items)?void 0:a.length)||0} results`),e}}}const e=await Ma(r);if(console.error(`YouTube search error (${r.status}):`,e),403===r.status)return console.log("Falling back to mock data due to API quota or permission issue"),$a(t);throw new Error(e)}const l=await r.json();return console.log(`YouTube search successful, found ${(null==(s=l.items)?void 0:s.length)||0} results`),l}catch(r){if(clearTimeout(n),r instanceof DOMException&&"AbortError"===r.name)throw console.error("YouTube search request timed out after 10 seconds"),new Error("YouTube search request timed out. Please try again later.");if(r instanceof TypeError&&"message"in r&&"string"==typeof r.message&&r.message.includes("fetch"))return console.error("Network error during YouTube search:",r),console.log("Falling back to mock data due to network error"),$a(t);throw r}}catch(i){throw console.error("Error searching YouTube:",i),i instanceof Error?i:new Error(String(i))}},$a=e=>{const t=e=>{let t=0;for(let a=0;a<e.length;a++){t=(t<<5)-t+e.charCodeAt(a),t|=0}return Math.abs(t).toString(16).padStart(8,"0")},a=e.split("-").map((e=>e.trim())),s=a.length>1?a[1]:e,r=a.length>1?a[0]:"Artist",i=3+Math.floor(3*Math.random()),o=[];for(let n=0;n<i;n++){const a=0===n?"(Official Video)":1===n?"(Lyric Video)":2===n?"(Audio)":"(Cover)",i=`mock-${t(e)}-${n}`;o.push({kind:"youtube#searchResult",etag:`mock-etag-${i}`,id:{kind:"youtube#video",videoId:i},snippet:{publishedAt:(new Date).toISOString(),channelId:`UC${t(r)}`,title:`${s} ${a}`,description:`Mock result for "${e}"`,thumbnails:{default:{url:`https://via.placeholder.com/120x90.png?text=${encodeURIComponent(s)}`,width:120,height:90},medium:{url:`https://via.placeholder.com/320x180.png?text=${encodeURIComponent(s)}`,width:320,height:180},high:{url:`https://via.placeholder.com/480x360.png?text=${encodeURIComponent(s)}`,width:480,height:360}},channelTitle:r,liveBroadcastContent:"none"}})}return{kind:"youtube#searchListResponse",etag:`mock-etag-${t(e)}`,nextPageToken:"mockNextPageToken",regionCode:"US",pageInfo:{totalResults:i,resultsPerPage:i},items:o,_isMock:!0}},za=async(e,t,a,s="private")=>{try{const e=await Ba();if(!e)throw new Error("No valid YouTube access token available. Please reconnect your YouTube account.");const r=await fetch(`${Fa}/playlists?part=snippet,status`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({snippet:{title:t,description:a},status:{privacyStatus:s}})});if(!r.ok){const e=await Ma(r);throw new Error(e)}return await r.json()}catch(r){throw console.error("Error creating YouTube playlist:",r),r instanceof Error?r:new Error(String(r))}},Oa=async(e,t,a)=>{try{const e=await Ba();if(!e)throw console.error("Cannot add to YouTube playlist: No valid access token"),new Error("No valid YouTube access token available. Please reconnect your YouTube account.");const s=await fetch(`${Fa}/playlistItems?part=snippet`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({snippet:{playlistId:t,resourceId:{kind:"youtube#video",videoId:a}}})});if(!s.ok){const e=await Ma(s);throw console.error(`YouTube add to playlist error (${s.status}):`,e),new Error(e)}const r=await s.json();return console.log(`Successfully added video ${a} to playlist ${t}`),r}catch(s){throw console.error("Error adding to YouTube playlist:",s),s}},Ba=async()=>{const{getYouTubeToken:e}=await d((()=>Promise.resolve().then((()=>cs))),void 0);return e()},Ha=async()=>{const{refreshYouTubeToken:e}=await d((()=>Promise.resolve().then((()=>cs))),void 0);return e()},Ga="https://oauth2.googleapis.com/token",Va="968024909043-qv0sceqajnebc6m3088eoq519n3epbua.apps.googleusercontent.com",Wa="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",qa="https://soundswapp.firebaseapp.com/youtube-callback",Ka=sa.clientId||Va,Xa=sa.clientSecret||Wa,Qa=sa.redirectUri||qa;console.log("[YouTube Auth] Configuration loaded:",{clientId:Ka?`${Ka.substring(0,10)}...`:"MISSING",redirectUri:Qa,hasClientSecret:!!Xa,usingFallback:!sa.clientId}),console.log("[YouTube Auth] Environment variables:",{VITE_YOUTUBE_CLIENT_ID:{}.VITE_YOUTUBE_CLIENT_ID?`${{}.VITE_YOUTUBE_CLIENT_ID.substring(0,10)}...`:"MISSING",VITE_GOOGLE_CLIENT_ID:{}.VITE_GOOGLE_CLIENT_ID?`${{}.VITE_GOOGLE_CLIENT_ID.substring(0,10)}...`:"MISSING",VITE_YOUTUBE_REDIRECT_URI:{}.VITE_YOUTUBE_REDIRECT_URI||"MISSING"});const Ja=["https://www.googleapis.com/auth/youtube","https://www.googleapis.com/auth/youtube.readonly","https://www.googleapis.com/auth/youtube.force-ssl","https://www.googleapis.com/auth/userinfo.email","openid","profile"],Za="youtube_auth_state",es="youtube_auth_return_path",ts="youtube_callback_url",as=()=>{const e=(()=>{const e=new Uint8Array(16);window.crypto.getRandomValues(e);const t=Array.from(e).map((e=>e.toString(16).padStart(2,"0"))).join("");return localStorage.setItem(Za,t),console.log("Generated YouTube auth state:",t.substring(0,5)+"..."),t})();if(console.log("[YouTube Auth] Building auth URL with params:",{client_id:Ka?`${Ka.substring(0,10)}...`:"MISSING",redirect_uri:Qa,state:e?`${e.substring(0,5)}...`:"MISSING",scope:Ja.join(" ")}),!Ka)throw console.error("[YouTube Auth] CRITICAL ERROR: client_id is missing!"),new Error("YouTube client_id is not configured. Please check your environment variables.");if(!Qa)throw console.error("[YouTube Auth] CRITICAL ERROR: redirect_uri is missing!"),new Error("YouTube redirect_uri is not configured. Please check your environment variables.");const t=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:Ka,redirect_uri:Qa,response_type:"code",scope:Ja.join(" "),include_granted_scopes:"true",state:e,access_type:"offline",prompt:"consent"}).toString()}`;return console.log("[YouTube Auth] Generated auth URL:",t.substring(0,100)+"..."),t},ss=async e=>{try{console.log("Exchanging code for token..."),console.log("Token endpoint:",Ga),console.log("Redirect URI:",Qa);const a={client_id:Ka,client_secret:Xa,code:e,grant_type:"authorization_code",redirect_uri:Qa};console.log("Request data:",{...a,client_secret:"[REDACTED]",code:"[REDACTED]"});const s=await fetch(Ga,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a).toString()});console.log("Token response status:",s.status);const r=await s.text();if(!s.ok)try{const e=JSON.parse(r);throw console.error("Token exchange failed:",e),new Error(`Token exchange failed: ${e.error_description||e.error||"Unknown error"}`)}catch(t){throw console.error("Failed to parse error response:",r),new Error(`Token exchange failed: ${s.status} ${s.statusText}`)}try{const e=JSON.parse(r);return console.log("Token exchange successful, got tokens:",{has_access_token:!!e.access_token,has_refresh_token:!!e.refresh_token,expires_in:e.expires_in}),{access_token:e.access_token,refresh_token:e.refresh_token,expires_in:e.expires_in||3600}}catch(t){throw console.error("Failed to parse success response:",r),new Error("Failed to parse token response")}}catch(a){throw console.error("Error exchanging code for token:",a),a}},rs=async()=>{var e;try{console.log("YouTube callback handling started");const r=new URLSearchParams(window.location.search),i=r.get("code"),o=r.get("state"),n=r.get("error");if(console.log("URL parameters:",{hasCode:!!i,hasState:!!o,error:n||"none"}),n)throw new Error(`Authorization error: ${n}`);const l=localStorage.getItem(Za);if(console.log("State validation:",{savedState:(null==l?void 0:l.substring(0,5))+"...",receivedState:(null==o?void 0:o.substring(0,5))+"..."}),localStorage.removeItem(Za),l){if(!o||o!==l)throw console.error("State validation failed",{receivedState:o,savedState:l}),new Error("Invalid state parameter. Authentication attempt may have been compromised.")}else console.warn("No saved state found, proceeding with authentication anyway");if(!i)throw new Error("No authorization code found in the callback URL");console.log("Starting token exchange with code:",i.substring(0,5)+"...");const c=await ss(i);if(console.log("Token data received from Google:",c),!c.access_token)throw new Error("No access token received from token exchange");console.log("Saving tokens to TokenManager");try{await fa.storeTokens("youtube",{accessToken:c.access_token,refreshToken:c.refresh_token||"",expiresAt:Date.now()+1e3*c.expires_in}),console.log("‚úÖ YouTube tokens saved successfully")}catch(t){console.error("‚ö†Ô∏è Failed to save YouTube tokens, but localStorage fallback should work:",t)}localStorage.setItem("soundswapp_youtube_access_token",c.access_token),console.log("YouTube authentication completed with token storage");try{const t=null==(e=Ge().currentUser)?void 0:e.uid;if(t){console.log("Attempting to update Firestore user document...");const e=Je(oa,"users",t);await Qe(e,{youtubeConnected:!0,lastUpdated:new Date},{merge:!0}),console.log("‚úÖ Successfully updated Firestore with YouTube connection status")}else console.warn("No user ID available to update Firestore")}catch(a){console.warn("‚ö†Ô∏è Failed to update Firestore user document (service may be down):",a);try{localStorage.setItem("soundswapp_youtube_connected","true"),localStorage.setItem("soundswapp_youtube_connected_at",(new Date).toISOString()),console.log("‚úÖ Stored YouTube connection status in localStorage as fallback")}catch(s){console.error("Failed to store connection status in localStorage:",s)}}window.dispatchEvent(new CustomEvent("youtube-auth-changed",{detail:{authenticated:!0}})),console.log("YouTube authentication successful")}catch(r){throw console.error("YouTube authentication error:",r),r}},is=async()=>{const e=await fa.getTokens("youtube"),t=null==e?void 0:e.refreshToken;if(!t)return console.log("No refresh token available for YouTube"),!1;try{console.log("Attempting to refresh YouTube token...");const e=await fetch(Ga,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:Ka,client_secret:Xa,refresh_token:t,grant_type:"refresh_token"}).toString()});if(!e.ok){const t=await e.text();throw console.error("YouTube token refresh failed:",{status:e.status,statusText:e.statusText,error:t}),400!==e.status&&401!==e.status||(console.log("Refresh token is invalid, clearing YouTube auth data"),ls()),new Error(`Failed to refresh token: ${e.status} ${e.statusText}`)}const a=await e.json();return console.log("YouTube token refreshed successfully"),fa.storeTokens("youtube",{accessToken:a.access_token,refreshToken:t,expiresAt:Date.now()+1e3*a.expires_in}),localStorage.setItem("soundswapp_youtube_access_token",a.access_token),!0}catch(a){return console.error("Error refreshing YouTube token:",a),ls(),!1}},os=async()=>fa.hasValidTokens("youtube"),ns=async()=>{try{const e=await fa.getTokens("youtube");if(null==e?void 0:e.accessToken){if(e.expiresAt&&Date.now()>=e.expiresAt){console.log("YouTube token expired, attempting to refresh...");if(await is()){const e=await fa.getTokens("youtube");return(null==e?void 0:e.accessToken)||null}return console.log("Failed to refresh YouTube token"),null}return e.accessToken}return console.log("No valid YouTube token found, needs refresh"),null}catch(e){return console.error("Error in getYouTubeToken:",e),null}},ls=()=>{fa.clearTokens("youtube"),localStorage.removeItem(Za),localStorage.removeItem(es),localStorage.removeItem(ts),localStorage.removeItem("soundswapp_youtube_access_token")},cs=Object.freeze(Object.defineProperty({__proto__:null,clearYouTubeAuth:ls,exchangeCodeForToken:ss,getYouTubeAuthUrl:as,getYouTubeToken:ns,handleYouTubeCallback:rs,initYouTubeAuth:async()=>{try{const e=as();return localStorage.setItem(es,window.location.pathname),console.log("Using full page redirect for YouTube authentication"),window.location.href=e,{success:!0}}catch(e){return console.error("Failed to initialize YouTube auth:",e),{success:!1,error:"Failed to initialize YouTube authentication"}}},isYouTubeAuthenticated:os,refreshYouTubeToken:is},Symbol.toStringTag,{value:"Module"}));function ds(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=crypto.getRandomValues(new Uint8Array(e));return Array.from(a).map((e=>t[e%62])).join("")}async function us(e){const t=(new TextEncoder).encode(e);return function(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(await crypto.subtle.digest("SHA-256",t))}const ms={CLIENT_ID:ea.clientId,CLIENT_SECRET:ea.clientSecret,REDIRECT_URI:ea.redirectUri,AUTH_ENDPOINT:"https://accounts.spotify.com/authorize",TOKEN_ENDPOINT:"https://accounts.spotify.com/api/token",SCOPES:["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private"],FAMILY_FRIENDLY_SCOPES:["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative"]};console.log("[Spotify Auth] Configuration loaded:",{clientId:`${ms.CLIENT_ID.substring(0,10)}...`,redirectUri:ms.REDIRECT_URI,hasClientSecret:!!ms.CLIENT_SECRET}),console.log("[Spotify Auth] Environment variables:",{VITE_SPOTIFY_CLIENT_ID:{}.VITE_SPOTIFY_CLIENT_ID?`${{}.VITE_SPOTIFY_CLIENT_ID.substring(0,10)}...`:"MISSING",VITE_SPOTIFY_REDIRECT_URI:{}.VITE_SPOTIFY_REDIRECT_URI||"MISSING"});const hs={AUTH_STATE:"spotify_auth_state",CODE_VERIFIER:"spotify_code_verifier",RETURN_PATH:"spotify_auth_return_path",ACCESS_TOKEN:"spotify_access_token",REFRESH_TOKEN:"spotify_refresh_token",EXPIRES_AT:"spotify_token_expires_at",REDIRECT_URI:"spotify_redirect_uri"},xs=()=>Ge().currentUser?{isAuthenticated:!0}:{isAuthenticated:!1,error:"You need to be signed in to connect your Spotify account"},ps=async()=>{try{const{isAuthenticated:e,error:t}=xs();if(!e)return{success:!1,error:t||"Authentication required"};const a=await ws();return localStorage.setItem("spotify_auth_return_path",window.location.pathname),console.log("Using full page redirect for Spotify authentication"),window.location.href=a,{success:!0}}catch(e){return console.error("Failed to initialize Spotify auth:",e),{success:!1,error:"Failed to initialize Spotify authentication"}}},gs=async()=>{try{const e=new URLSearchParams(window.location.search),t=e.get("code"),a=e.get("state"),s=e.get("error");if(console.log("Callback parameters:",{hasCode:!!t,hasState:!!a,error:s||"none"}),s)return{success:!1,error:`Spotify authorization error: ${s}`};if(!t||!a)return{success:!1,error:"Missing required authorization parameters"};const r=ys();if(!r)return{success:!1,error:"No authentication state found"};if(a!==r.state)return{success:!1,error:"Invalid state parameter"};const i=localStorage.getItem(hs.REDIRECT_URI)||ms.REDIRECT_URI,o=await async function(e,t){try{const a=ys();if(!(null==a?void 0:a.codeVerifier))return console.error("No code verifier found in stored auth state"),null;console.log("[Spotify Auth] Token exchange parameters:",{client_id:ms.CLIENT_ID?`${ms.CLIENT_ID.substring(0,10)}...`:"MISSING",redirect_uri:t,grant_type:"authorization_code",has_code:!!e,has_code_verifier:!!a.codeVerifier,has_client_secret:!!ms.CLIENT_SECRET});const s=new URLSearchParams({client_id:ms.CLIENT_ID,client_secret:ms.CLIENT_SECRET,grant_type:"authorization_code",code:e,redirect_uri:t,code_verifier:a.codeVerifier});console.log("[Spotify Auth] Making token exchange request to:",ms.TOKEN_ENDPOINT);const r=await fetch(ms.TOKEN_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!r.ok){const e=await r.json().catch((()=>null));return console.error("[Spotify Auth] Token exchange failed:",{status:r.status,statusText:r.statusText,error:e,requestParams:{client_id:ms.CLIENT_ID?`${ms.CLIENT_ID.substring(0,10)}...`:"MISSING",redirect_uri:t,grant_type:"authorization_code"}}),400===r.status&&"invalid_grant"===(null==e?void 0:e.error)&&(console.error("[Spotify Auth] REDIRECT URI MISMATCH - Check your Spotify app settings!"),console.error("[Spotify Auth] Expected redirect URI in Spotify settings:",t)),null}const i=await r.json();return console.log("[Spotify Auth] Token exchange successful"),i}catch(s){return console.error("[Spotify Auth] Failed to exchange code for tokens:",s),null}}(t,i);return o?(await async function(e){try{const a=Date.now()+1e3*e.expires_in;fa.storeTokens("spotify",{accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:a});const s=function(){var e;const t=Ge();return(null==(e=t.currentUser)?void 0:e.uid)||null}();if(s)try{const t=Je(oa,"users",s,"tokens","spotify");await Qe(t,{accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:a});const r=Je(oa,"users",s);await Qe(r,{spotifyConnected:!0,lastUpdated:new Date},{merge:!0})}catch(t){console.error("Failed to store tokens in Firestore:",t)}window.dispatchEvent(new CustomEvent("spotify-auth-changed",{detail:{authenticated:!0}}))}catch(s){throw console.error("Failed to store tokens:",s),s}}(o),localStorage.removeItem(hs.AUTH_STATE),sessionStorage.removeItem(hs.AUTH_STATE),localStorage.removeItem(hs.REDIRECT_URI),window.dispatchEvent(new CustomEvent("spotify-auth-changed",{detail:{authenticated:!0}})),console.log("Spotify authentication successful, dispatched spotify-auth-changed event"),{success:!0}):{success:!1,error:"Failed to exchange authorization code for tokens"}}catch(e){return console.error("Spotify callback error:",e),{success:!1,error:"Failed to complete authentication"}}};function ys(){const e=localStorage.getItem(hs.AUTH_STATE),t=sessionStorage.getItem(hs.AUTH_STATE);try{return JSON.parse(e||t||"null")}catch{return null}}async function fs(){return console.log("[DEBUG] isSpotifyAuthenticated() called"),await fa.hasValidTokens("spotify")}async function bs(){try{console.log("[DEBUG] getSpotifyToken() called");const e=await fa.getTokens("spotify");if(console.log("[DEBUG] Tokens from TokenManager:",e?"Found":"Not found"),e)return console.log("[DEBUG] Returning valid token from TokenManager"),e.accessToken;console.log("[DEBUG] No valid tokens found, attempting refresh...");const t=await fa.getTokens("spotify");if(null==t?void 0:t.refreshToken){console.log("[DEBUG] Found refresh token in TokenManager, attempting refresh...");const e=await async function(e){try{const t=await fetch(ms.TOKEN_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:ms.CLIENT_ID,client_secret:ms.CLIENT_SECRET}).toString()});return t.ok?await t.json():null}catch(t){return console.error("Failed to refresh access token:",t),null}}(t.refreshToken);if(e)return console.log("[DEBUG] Token refresh successful, storing new tokens..."),fa.storeTokens("spotify",{accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:Date.now()+1e3*e.expires_in}),console.log("[DEBUG] New tokens stored successfully"),e.access_token;console.error("[DEBUG] Token refresh failed")}else console.log("[DEBUG] No refresh token available");return console.log("[DEBUG] No valid token available"),null}catch(e){return console.error("[DEBUG] Error in getSpotifyToken:",e),null}}function vs(){fa.clearTokens("spotify"),Object.values(hs).forEach((e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}))}const ws=async(e=ms.SCOPES)=>{const t=ds(32),a=ds(96),s=await us(a),r={state:t,codeVerifier:a,returnPath:window.location.pathname};localStorage.setItem(hs.AUTH_STATE,JSON.stringify(r)),sessionStorage.setItem(hs.AUTH_STATE,JSON.stringify(r)),localStorage.setItem(hs.REDIRECT_URI,ms.REDIRECT_URI);const i=new URL(ms.AUTH_ENDPOINT),o={client_id:ms.CLIENT_ID,response_type:"code",redirect_uri:ms.REDIRECT_URI,code_challenge_method:"S256",code_challenge:s,state:t,scope:e.join(" ")};return Object.entries(o).forEach((([e,t])=>{i.searchParams.append(e,t)})),console.log("Spotify Auth URL:",i.toString()),i.toString()};const js=Object.freeze(Object.defineProperty({__proto__:null,detectAccountType:async function(e){try{if(!e||""===e.trim())return console.warn("[Spotify Auth] No access token provided to detectAccountType"),{accountType:"unknown",hasPlaylistAccess:!1,canCreatePlaylists:!1,recommendations:["No access token available. Please reconnect your Spotify account."]};console.log("[Spotify Auth] üîç Detecting account type...");const s=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)return console.warn("[Spotify Auth] Profile request failed:",s.status,s.statusText),403===s.status?{accountType:"family_restricted",hasPlaylistAccess:!1,canCreatePlaylists:!1,recommendations:["Your Spotify account has restricted permissions (403 Forbidden)","This is common with family plan child accounts","Try using public playlist URLs for conversion instead","Contact your family plan administrator for full access"]}:401===s.status?{accountType:"unknown",hasPlaylistAccess:!1,canCreatePlaylists:!1,recommendations:["Your Spotify access token has expired or is invalid","Please reconnect your Spotify account","Try signing out and signing back in"]}:{accountType:"unknown",hasPlaylistAccess:!1,canCreatePlaylists:!1,recommendations:[`Unable to access Spotify profile (${s.status}). Please try reconnecting.`]};let r;try{r=await s.json()}catch(t){return console.error("[Spotify Auth] Failed to parse profile response as JSON:",t),{accountType:"unknown",hasPlaylistAccess:!1,canCreatePlaylists:!1,recommendations:["Received invalid response from Spotify","This may indicate account restrictions","Please try reconnecting your account"]}}const i=(await fetch("https://api.spotify.com/v1/me/playlists?limit=1",{headers:{Authorization:`Bearer ${e}`}})).ok;let o=!1;if(i){const t=await fetch("https://api.spotify.com/v1/me/playlists",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({name:"SoundSwapp Test (Will be deleted)",description:"Test playlist for permissions - will be deleted immediately",public:!1})});if(o=t.ok,t.ok)try{const a=await t.json();await fetch(`https://api.spotify.com/v1/playlists/${a.id}/followers`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})}catch(a){console.warn("[Spotify Auth] Failed to cleanup test playlist:",a)}}let n="unknown";const l=[];return"premium"===r.product?i&&o?(n="premium",console.log("[Spotify Auth] ‚úÖ Full Premium account detected")):i&&!o?(n="family_restricted",l.push("Your account has playlist creation restrictions"),l.push("You can still convert playlists using public playlist URLs"),l.push("Ask the family plan admin to enable playlist creation"),console.log("[Spotify Auth] ‚ö†Ô∏è Family restricted account detected")):(n="family_child",l.push("Your account appears to be a family plan child account"),l.push("Contact your family plan administrator for playlist access"),l.push("You can still use public playlist URLs for conversion"),console.log("[Spotify Auth] ‚ö†Ô∏è Family child account detected")):(n="free",l.push("Consider upgrading to Spotify Premium for full playlist features"),l.push("You can still convert public playlists using URLs"),console.log("[Spotify Auth] ‚ÑπÔ∏è Free account detected")),console.log("[Spotify Auth] Account type detected:",{accountType:n,product:r.product,hasPlaylistAccess:i,canCreatePlaylists:o,country:r.country}),{accountType:n,hasPlaylistAccess:i,canCreatePlaylists:o,recommendations:l}}catch(s){return console.error("[Spotify Auth] Error detecting account type:",s),{accountType:"unknown",hasPlaylistAccess:!1,canCreatePlaylists:!1,recommendations:["Unable to detect account type due to an error","Please try reconnecting your Spotify account","You can still use public playlist URLs for conversion"]}}},ensureUserAuthenticated:xs,getDetailedSpotifyProfile:async()=>{var e,t,a;try{const s=await bs();if(!s)return console.warn("[Spotify Auth] No access token available for detailed profile"),null;console.log("[Spotify Auth] üîç Fetching detailed Spotify profile data...");const[r,i,o,n,l,c]=await Promise.allSettled([fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${s}`}}),fetch("https://api.spotify.com/v1/me/playlists?limit=50",{headers:{Authorization:`Bearer ${s}`}}),fetch("https://api.spotify.com/v1/me/following?type=artist&limit=50",{headers:{Authorization:`Bearer ${s}`}}),fetch("https://api.spotify.com/v1/me/top/artists?limit=20&time_range=medium_term",{headers:{Authorization:`Bearer ${s}`}}),fetch("https://api.spotify.com/v1/me/tracks?limit=1",{headers:{Authorization:`Bearer ${s}`}}),fetch("https://api.spotify.com/v1/me/albums?limit=1",{headers:{Authorization:`Bearer ${s}`}})]);let d=null;if("fulfilled"===r.status&&r.value.ok)try{d=await r.value.json()}catch(uo){console.warn("[Spotify Auth] Failed to parse profile response")}if(!d)return console.warn("[Spotify Auth] Could not fetch basic profile data"),null;let u={public:0,private:0,collaborative:0,total:0};if("fulfilled"===i.status&&i.value.ok)try{const e=await i.value.json();u.total=e.total||0,e.items&&e.items.forEach((e=>{e.collaborative?u.collaborative++:e.public?u.public++:u.private++}))}catch(uo){console.warn("[Spotify Auth] Failed to parse playlists response")}let m=0;if("fulfilled"===o.status&&o.value.ok)try{m=(null==(e=(await o.value.json()).artists)?void 0:e.total)||0}catch(uo){console.warn("[Spotify Auth] Failed to parse following response")}let h=[];if("fulfilled"===n.status&&n.value.ok)try{const e=await n.value.json();if(e.items){const t={};e.items.forEach((e=>{e.genres&&e.genres.forEach((e=>{t[e]=(t[e]||0)+1}))})),h=Object.entries(t).sort((([,e],[,t])=>t-e)).slice(0,3).map((([e])=>e.charAt(0).toUpperCase()+e.slice(1)))}}catch(uo){console.warn("[Spotify Auth] Failed to parse top artists response")}let x=0;if("fulfilled"===l.status&&l.value.ok)try{x=(await l.value.json()).total||0}catch(uo){console.warn("[Spotify Auth] Failed to parse saved tracks response")}let p=0;if("fulfilled"===c.status&&c.value.ok)try{p=(await c.value.json()).total||0}catch(uo){console.warn("[Spotify Auth] Failed to parse saved albums response")}const g={displayName:d.display_name||"Spotify User",imageUrl:d.images&&d.images.length>0?d.images[0].url:null,id:d.id,email:d.email,country:d.country,product:d.product,followers:(null==(t=d.followers)?void 0:t.total)||0,publicPlaylists:u.public,privatePlaylists:u.private,collaborativePlaylists:u.collaborative,totalPlaylists:u.total,followingArtists:m,savedTracks:x,savedAlbums:p,topGenres:h.length>0?h:["Music Lover"],accountType:"premium"===d.product?"Premium":"Free",explicitContentFilter:(null==(a=d.explicit_content)?void 0:a.filter_enabled)?"Enabled":"Disabled",audioQuality:"premium"===d.product?"High (320kbps)":"Normal (160kbps)",offlineDownloads:"premium"===d.product?"Available":"Not Available",deviceLimit:"premium"===d.product?5:1,lastActive:"Real-time data not available via API",listeningTime:"Real-time data not available via API",monthlyListeners:"Not available for user accounts",nextBilling:"Billing info not available via API",crossfade:"Settings not available via API",equalizer:"Settings not available via API"};return console.log("[Spotify Auth] ‚úÖ Detailed profile fetched:",{displayName:g.displayName,hasImage:!!g.imageUrl,product:g.product,savedTracks:g.savedTracks,totalPlaylists:g.totalPlaylists,topGenres:g.topGenres}),g}catch(s){return console.error("[Spotify Auth] Exception fetching detailed Spotify profile:",s),null}},getSpotifyAuthUrl:ws,getSpotifyToken:bs,getSpotifyTokenSync:async function(){console.log("[DEBUG] getSpotifyTokenSync() called");const e=await fa.getTokens("spotify"),t=(null==e?void 0:e.accessToken)||null;return console.log("[DEBUG] getSpotifyTokenSync result:",t?"Found":"Not found"),t},getSpotifyUserProfile:async()=>{var e,t;try{const s=await bs();if(!s)return console.log("[Spotify Auth] No Spotify token available for fetching user profile."),null;console.log("[Spotify Auth] üéµ Fetching Spotify user profile...");const r=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${s}`}});if(!r.ok){console.warn("[Spotify Auth] Profile fetch failed:",r.status,r.statusText);const t=r.headers.get("content-type"),s=t&&t.includes("application/json");let i=`HTTP ${r.status}`;if(s)try{const t=await r.json();i=(null==(e=t.error)?void 0:e.message)||t.message||i}catch(a){console.warn("[Spotify Auth] Failed to parse error response as JSON:",a)}else{const e=await r.text();console.warn("[Spotify Auth] Received non-JSON error response:",e.substring(0,200)+"...")}return console.error("[Spotify Auth] Error fetching Spotify user profile:",r.status,i),401===r.status?(console.log("[Spotify Auth] Token expired or invalid, clearing auth..."),vs()):403===r.status&&console.log("[Spotify Auth] Access forbidden - likely account restrictions"),null}let i;try{i=await r.json()}catch(a){return console.error("[Spotify Auth] Failed to parse profile response as JSON:",a),null}return console.log("[Spotify Auth] ‚úÖ Profile fetched successfully:",{displayName:i.display_name,hasImages:!!(i.images&&i.images.length>0),id:i.id}),{displayName:i.display_name,imageUrl:i.images&&i.images.length>0?i.images[0].url:null,id:i.id,email:i.email,externalUrls:null==(t=i.external_urls)?void 0:t.spotify}}catch(s){return console.error("[Spotify Auth] Exception fetching Spotify user profile:",s),null}},handleSpotifyCallback:gs,initProgressiveSpotifyAuth:async(e=!1)=>{try{const{isAuthenticated:t,error:a}=xs();if(!t)return{success:!1,error:a||"Authentication required"};const s=e?ms.FAMILY_FRIENDLY_SCOPES:ms.SCOPES;console.log(`[Spotify Auth] Initiating auth with ${e?"family-friendly":"full"} scopes:`,s);const r=await ws(s);return localStorage.setItem("spotify_auth_type",e?"family_friendly":"full"),localStorage.setItem("spotify_auth_return_path",window.location.pathname),window.location.href=r,{success:!0}}catch(t){return console.error("Failed to initialize progressive Spotify auth:",t),{success:!1,error:"Failed to initialize Spotify authentication"}}},initSpotifyAuth:ps,isSpotifyAuthenticated:fs,logoutFromSpotify:vs},Symbol.toStringTag,{value:"Module"})),Ns=e=>{const t=ks(e.artists[0]),a=ks(e.name),s=a.replace(/^\d+\s*[-‚Äì]\s*/,"").replace(/\s*\([^)]*\)/g,"").replace(/\s*\[[^\]]*\]/g,"").trim(),r=t.replace(/\s*\([^)]*\)/g,"").replace(/\s*\[[^\]]*\]/g,"").trim();return[`${r} ${s}`,`${s} ${r}`,s,`${r} - ${s}`,`${r} "${s}"`,`${r} ${s} official`,`${r} ${s} audio`,`${s} by ${r}`,s.replace(/\s*ft\.?\s*[^,\s]+/gi,"").trim(),`${r} ${s.replace(/\s*ft\.?\s*[^,\s]+/gi,"").trim()}`,`${t} ${a}`,`${a} ${t}`,a].filter((e=>e.length>0))},ks=e=>e.replace(/\s+(ft\.|feat\.|featuring)\s+.*$/i,"").trim(),Ss=(e,t)=>{window.dispatchEvent(new CustomEvent("show-toast",{detail:{type:e,message:t}}))},Ts=class e{constructor(){n(this,"retryDelays",[1e3,2e3,4e3,8e3]),n(this,"maxRetries",3)}static getInstance(){return e.instance||(e.instance=new e),e.instance}handleFirebaseError(e,t="Firebase operation"){const a=(null==e?void 0:e.message)||(null==e?void 0:e.toString())||"Unknown error";return a.includes("ERR_QUIC_PROTOCOL_ERROR")||a.includes("ERR_CONNECTION_TIMED_OUT")||a.includes("ERR_CONNECTION_ABORTED")||a.includes("ERR_NETWORK_CHANGED")||a.includes("firestore.googleapis.com")||a.includes("firebaseapp.com")?(console.warn(`Network error in ${t}:`,a),{type:"firebase",message:a,retryable:!0}):(console.error(`Firebase error in ${t}:`,e),{type:"firebase",message:"Unable to connect to our servers. Please check your internet connection.",retryable:!0})}async withRetry(e,t="API operation",a=this.maxRetries){let s;for(let i=0;i<=a;i++)try{return await e()}catch(r){s=r;const e=this.handleFirebaseError(r,t);if(!e.retryable||i===a)throw Ss("error",i>0?`Failed after ${i+1} attempts. Please try again later.`:e.message),r;const o=this.retryDelays[Math.min(i,this.retryDelays.length-1)];console.log(`Retrying ${t} in ${o}ms (attempt ${i+1}/${a+1})`),await new Promise((e=>setTimeout(e,o)))}throw s}isOnline(){return navigator.onLine}setupNetworkMonitoring(){window.addEventListener("online",(()=>{console.log("Network connection restored"),Ss("success","Connection restored!")})),window.addEventListener("offline",(()=>{console.log("Network connection lost"),Ss("error","No internet connection. Some features may be unavailable.")}))}suppressExpectedErrors(){const e=console.error,t=console.warn;console.error=function(...t){const a=t.join(" ");a.includes("ERR_QUIC_PROTOCOL_ERROR")||a.includes("ERR_CONNECTION_TIMED_OUT")||a.includes("ERR_CONNECTION_ABORTED")||a.includes("ERR_NETWORK_CHANGED")||a.includes("firestore.googleapis.com")||a.includes("google-analytics.com")||a.includes("mp/collect?measurement_id=")||a.includes("Cannot read properties of undefined (reading 'isElement')")||e.apply(console,t)},console.warn=function(...e){const a=e.join(" ");a.includes("firestore.googleapis.com")||a.includes("google-analytics.com")||a.includes("mp/collect?measurement_id=")||t.apply(console,e)},window.addEventListener("error",(e=>{var t;const a=String((null==(t=null==e?void 0:e.error)?void 0:t.message)||(null==e?void 0:e.message)||"");a.includes("Cannot read properties of undefined (reading 'isElement')")&&e.preventDefault(),(a.includes("google-analytics.com")||a.includes("mp/collect?measurement_id="))&&e.preventDefault()})),window.addEventListener("unhandledrejection",(e=>{var t;const a=String((null==(t=null==e?void 0:e.reason)?void 0:t.message)||(null==e?void 0:e.reason)||"");(a.includes("Cannot read properties of undefined (reading 'isElement')")||a.includes("google-analytics.com")||a.includes("mp/collect?measurement_id="))&&e.preventDefault()}))}initialize(){this.setupNetworkMonitoring(),this.suppressExpectedErrors(),console.log("Network resilience service initialized")}};n(Ts,"instance");const Cs=Ts.getInstance(),Es=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}async getUserStats(e){try{console.log("Fetching user stats for:",e);const t=await this.calculateRealStats(e);if(t.conversions>0)return console.log("Using real stats from conversion history:",t),t;const a=await st(Je(oa,"users",e));if(a.exists()){const e=a.data();console.log("User data from Firestore:",e);const t=e.stats||{conversions:0,tracks:0,monthlyUsage:0,monthlyLimit:50,platformUsage:{spotify:0,youtube:0,soundcloud:0},successRate:0,totalPlaylists:0};return console.log("Processed stats:",t),t}return console.log("No user document found, returning default stats"),{conversions:0,tracks:0,monthlyUsage:0,monthlyLimit:50,platformUsage:{spotify:0,youtube:0,soundcloud:0},successRate:0,totalPlaylists:0}}catch(t){return console.error("Error getting user stats:",t),{conversions:0,tracks:0,monthlyUsage:0,monthlyLimit:50,platformUsage:{spotify:0,youtube:0,soundcloud:0},successRate:0,totalPlaylists:0}}}async updateUserStats(e,t){try{const a=Je(oa,"users",e);return await it(a,{stats:t,lastUpdated:new Date}),await this.getUserStats(e)}catch(a){throw console.error("Error updating user stats:",a),new Error("Failed to update user statistics")}}async getUserProfile(e){return Cs.withRetry((async()=>{const t=Ge().currentUser;if(!t)throw new Error("No authenticated user found");const a=await st(Je(oa,"users",e)),s=a.exists()?a.data():{};return{id:e,displayName:t.displayName||s.displayName||"User",email:t.email||"",photoURL:t.photoURL||s.photoURL,bio:s.bio||"",isPremium:s.isPremium||!1,createdAt:s.createdAt?new Date(s.createdAt.toDate()):new Date(t.metadata.creationTime||Date.now()),lastActive:new Date}}),"getUserProfile")}async updateUserProfile(e,t){return Cs.withRetry((async()=>{const a=Ge().currentUser;if(!a)throw new Error("No authenticated user found");(t.displayName||t.photoURL)&&await tt(a,{displayName:t.displayName||a.displayName,photoURL:t.photoURL||a.photoURL});const s=Je(oa,"users",e),r={lastUpdated:new Date};return t.displayName&&(r.displayName=t.displayName),t.photoURL&&(r.photoURL=t.photoURL),void 0!==t.bio&&(r.bio=t.bio),void 0!==t.isPremium&&(r.isPremium=t.isPremium),await it(s,r),await this.getUserProfile(e)}),"updateUserProfile")}async uploadProfileImage(e,t){var a;try{const s=ia.currentUser;if(!s||s.uid!==e)throw new Error("Authentication required. Please sign in again.");if(!t)throw new Error("No file provided");const r=5242880;if(t.size>r)throw new Error("File size too large. Please select an image under 5MB.");if(!t.type.startsWith("image/"))throw new Error("Please select a valid image file.");const i=Date.now(),o=(t.name.split(".").pop()||"jpg").toLowerCase(),n=`profile-images/${e}/${i}-${(null==(a=crypto.randomUUID)?void 0:a.call(crypto))||Math.random().toString(36).slice(2)}.${o}`,l=ot(na,n);console.log(`[ProfileService] Uploading profile image for user ${e}`);const c={contentType:t.type,cacheControl:"public,max-age=31536000"},d=nt(l,t,c);await new Promise(((e,t)=>{d.on("state_changed",void 0,(e=>{try{console.error("[ProfileService] Upload error payload:",{code:null==e?void 0:e.code,serverResponse:null==e?void 0:e.serverResponse,message:null==e?void 0:e.message})}catch{}t(e)}),(()=>e()))}));const u=await lt(l);return console.log(`[ProfileService] Profile image uploaded successfully: ${u}`),u}catch(s){if(console.error("[ProfileService] Error uploading profile image:",s),s instanceof Error){if("storage/unauthorized"===(null==s?void 0:s.code))throw new Error("You do not have permission to upload images. Please sign in again.");if("storage/canceled"===(null==s?void 0:s.code))throw new Error("Upload canceled. Please try again.");if("storage/retry-limit-exceeded"===(null==s?void 0:s.code)||"storage/cannot-slice-blob"===(null==s?void 0:s.code))throw new Error("Upload failed due to connection issues. Please try again.");if((null==s?void 0:s.serverResponse)&&String(s.serverResponse).includes("PreconditionFailed"))throw new Error("Upload failed due to a precondition error. Please retry.");throw new Error(`Upload failed: ${s.message}`)}throw new Error("Failed to upload profile image. Please try again.")}}async getProfileSettings(e){try{const t=await st(Je(oa,"users",e));if(t.exists()){return t.data().settings||{theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}}}return{theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}}}catch(t){throw console.error("Error getting profile settings:",t),new Error("Failed to load profile settings")}}async updateProfileSettings(e,t){try{const a=Je(oa,"users",e);return await it(a,{settings:t,lastUpdated:new Date}),await this.getProfileSettings(e)}catch(a){throw console.error("Error updating profile settings:",a),new Error("Failed to update profile settings")}}async exportUserData(e){try{const[t,a,s,r]=await Promise.all([this.getUserProfile(e),this.getUserStats(e),this.getProfileSettings(e),this.getConversionHistory(e,1e3)]);return{exportDate:(new Date).toISOString(),user:{profile:t,stats:a,settings:s},conversionHistory:r,exportFormat:"json",version:"1.0"}}catch(t){throw console.error("Error exporting user data:",t),new Error("Failed to export user data")}}async deleteUserAccount(e){try{const{ref:a,listAll:s,deleteObject:r}=await d((()=>import("./firebase-vendor-57fca5f4.js").then((e=>e.z))),["assets/firebase-vendor-57fca5f4.js","assets/vendor-0d2b1560.js","assets/react-core-d1332efd.js"]),{storage:i}=await d((()=>Promise.resolve().then((()=>xa))),void 0);try{const t=a(i,`profile-images/${e}`),o=await s(t);await Promise.all(o.items.map((e=>r(e))))}catch(t){console.warn("Could not delete profile images:",t)}const o=Je(oa,"users",e);await rt(o);const n=ct(oa,"users",e,"conversions"),l=await dt(n);return await Promise.all(l.docs.map((e=>rt(e.ref)))),!0}catch(a){throw console.error("Error deleting user account:",a),new Error("Failed to delete user account")}}async getConversionHistory(e,t=10){try{const a=ct(oa,"conversions"),s=ut(a,mt("userId","==",e),ht("createdAt","desc"),xt(t)),r=await dt(s);return r.docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:(null==(t=e.data().createdAt)?void 0:t.toDate)?e.data().createdAt.toDate():new Date}}))}catch(a){return console.error("Error getting conversion history:",a),[]}}async getPlatformUsage(e){try{const t=await this.getUserStats(e);return{spotify:t.platformUsage.spotify,youtube:t.platformUsage.youtube,soundcloud:t.platformUsage.soundcloud}}catch(t){return console.error("Error getting platform usage:",t),{spotify:0,youtube:0,soundcloud:0}}}async hasPremiumFeatures(e){try{const t=await this.getUserProfile(e);return(null==t?void 0:t.isPremium)||!1}catch(t){return console.error("Error checking premium features:",t),!1}}async upgradeToPremium(e){try{return await this.updateUserProfile(e,{isPremium:!0}),!0}catch(t){return console.error("Error upgrading to premium:",t),!1}}async getMonthlyUsage(e,t,a){try{const t=await this.getUserStats(e);return{used:t.monthlyUsage,limit:t.monthlyLimit}}catch(s){return console.error("Error getting monthly usage:",s),{used:0,limit:50}}}async resetMonthlyUsage(e){try{await this.updateUserStats(e,{monthlyUsage:0})}catch(t){console.error("Error resetting monthly usage:",t)}}async addConversion(e,t=1,a){try{const s=await this.getUserStats(e),r=s.tracks+t,i=r>0?100*s.conversions/r:0,o={...s.platformUsage};"spotify-to-youtube"===a?o.spotify=(o.spotify||0)+1:"youtube-to-spotify"===a&&(o.youtube=(o.youtube||0)+1),await this.updateUserStats(e,{conversions:s.conversions+1,tracks:r,monthlyUsage:s.monthlyUsage+1,successRate:Math.round(i),platformUsage:o}),console.log(`Updated user stats: +1 conversion, +${t} tracks, success rate: ${Math.round(i)}%, platform usage updated`)}catch(s){console.error("Error adding conversion:",s)}}async getSuccessRate(e){try{return(await this.getUserStats(e)).successRate}catch(t){return console.error("Error getting success rate:",t),0}}async calculateRealStats(e){try{console.log("[ProfileService] Calculating real stats for user:",e);const{collection:a,query:s,where:r,getDocs:i,orderBy:o}=await d((()=>import("./firebase-vendor-57fca5f4.js").then((e=>e.y))),["assets/firebase-vendor-57fca5f4.js","assets/vendor-0d2b1560.js","assets/react-core-d1332efd.js"]),{db:n}=await d((()=>Promise.resolve().then((()=>xa))),void 0),l=a(n,"users",e,"conversions");let c;try{c=s(l,o("convertedAt","desc"))}catch(t){console.warn("[ProfileService] OrderBy failed, trying without ordering:",t),c=s(l)}const u=await i(c);console.log("[ProfileService] Found",u.size,"conversions in Firestore");let m=0,h=0,x=0,p=0,g=0;const y=(new Date).getMonth(),f=(new Date).getFullYear();u.forEach((e=>{var t;const a=e.data();console.log("[ProfileService] Processing conversion:",{id:e.id,tracksMatched:a.tracksMatched,spotifyPlaylistId:a.spotifyPlaylistId,youtubePlaylistId:a.youtubePlaylistId,convertedAt:a.convertedAt});const s=(null==(t=a.convertedAt)?void 0:t.toDate)?a.convertedAt.toDate():new Date(a.convertedAt);m++;const r=a.tracksMatched||a.totalTracks||0;h+=r,a.spotifyPlaylistId&&a.youtubePlaylistId?a.spotifyPlaylistName?x++:a.youtubePlaylistId&&p++:a.spotifyPlaylistId?x++:a.youtubePlaylistId&&p++,s.getMonth()===y&&s.getFullYear()===f&&g++}));const b=m>0?Math.round(h/m*100):0,v={conversions:m,tracks:h,monthlyUsage:g,monthlyLimit:50,platformUsage:{spotify:x,youtube:p,soundcloud:0},successRate:b,totalPlaylists:m};return console.log("[ProfileService] Calculated stats:",v),v}catch(a){return console.error("[ProfileService] Error calculating real stats:",a),{conversions:0,tracks:0,monthlyUsage:0,monthlyLimit:50,platformUsage:{spotify:0,youtube:0,soundcloud:0},successRate:0,totalPlaylists:0}}}};n(Es,"instance");const Ps=Es.getInstance();var As=(e=>(e.IDLE="idle",e.LOADING_PLAYLISTS="loading_playlists",e.SELECTING_PLAYLIST="selecting_playlist",e.LOADING_TRACKS="loading_tracks",e.MATCHING_TRACKS="matching_tracks",e.CREATING_PLAYLIST="creating_playlist",e.SUCCESS="success",e.ERROR="error",e))(As||{});const _s=oa,Is={status:As.IDLE,error:null,isLoading:!1,accountType:null,spotifyPlaylists:[],youtubePlaylists:[],selectedPlaylistId:null,tracks:[],matches:new Map,currentStep:0,totalSteps:4,youtubePlaylistId:null,youtubePlaylistUrl:null,spotifyPlaylistId:null,spotifyPlaylistUrl:null,conversionHistory:[],matchingProgress:0},Rs=(e,t)=>{switch(t.type){case"SET_STATUS":return{...e,status:t.payload};case"SET_ERROR":return{...e,error:t.payload,status:t.payload?As.ERROR:e.status};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ACCOUNT_TYPE":return{...e,accountType:t.payload};case"SET_SPOTIFY_PLAYLISTS":return{...e,spotifyPlaylists:t.payload};case"SET_YOUTUBE_PLAYLISTS":return{...e,youtubePlaylists:t.payload};case"SELECT_PLAYLIST":return{...e,selectedPlaylistId:t.payload};case"SET_TRACKS":return{...e,tracks:t.payload};case"SET_MATCHES":return{...e,matches:t.payload};case"UPDATE_MATCHING_PROGRESS":return{...e,matchingProgress:t.payload};case"SET_YOUTUBE_PLAYLIST":return{...e,youtubePlaylistId:t.payload.id,youtubePlaylistUrl:t.payload.url};case"SET_SPOTIFY_PLAYLIST":return{...e,spotifyPlaylistId:t.payload.id,spotifyPlaylistUrl:t.payload.url};case"SET_CONVERSION_HISTORY":return{...e,conversionHistory:t.payload};case"RESET":return{...Is,conversionHistory:e.conversionHistory};default:return e}},Ls=l.createContext({state:Is,fetchSpotifyPlaylists:async()=>{},fetchYouTubePlaylists:async()=>{},selectPlaylist:()=>{},selectYouTubePlaylist:()=>{},startConversion:async()=>{},convertFromPublicUrl:async()=>{},reconnectWithFamilyMode:async()=>{},resetConversion:()=>{},fetchConversionHistory:async()=>{},dispatch:()=>{}}),Fs=()=>l.useContext(Ls),Ms="playlist_converter_history",Ds=(e,t)=>{try{localStorage.setItem(`${Ms}_${e}`,JSON.stringify(t))}catch(a){console.error("Error saving conversion history to localStorage:",a)}},Us=e=>{if(!e)return!1;if("object"==typeof e){if("permission-denied"===e.code)return!0;if("string"==typeof e.message){const t=e.message.toLowerCase();return t.includes("missing or insufficient permissions")||t.includes("permission denied")||t.includes("unauthorized")||t.includes("access denied")}}else if("string"==typeof e){const t=e.toLowerCase();return t.includes("missing or insufficient permissions")||t.includes("permission denied")||t.includes("unauthorized")||t.includes("access denied")}return!1},Ys=(e,t,a)=>{if(console.error(`[Firestore Error in ${e}]`,{message:(null==t?void 0:t.message)||"Unknown error",code:(null==t?void 0:t.code)||"No error code",name:(null==t?void 0:t.name)||"No error name",userId:a||"No user ID",timestamp:(new Date).toISOString(),userAuth:(null==ia?void 0:ia.currentUser)?"User is authenticated":"No authenticated user",firestoreConnected:void 0!==_s?"Firestore is initialized":"Firestore not initialized"}),Us(t)){console.warn("[PERMISSION ERROR DETECTED] This is likely a Firestore security rules issue"),console.warn("Rules should allow access to collections: users/{userId}/conversions, users/{userId}/tokens, users/{userId}/history");try{ca().catch((e=>console.warn("Failed to reconnect after permission error:",e)))}catch(s){}}},$s=({children:e})=>{const[t,a]=l.useReducer(Rs,Is),{user:s}=ya();l.useCallback((async()=>{const e=await fs();console.log("Refreshing auth state:",{user:null==s?void 0:s.uid,isSpotifyAuthed:e,hasSpotifyAuth:e}),e&&window.dispatchEvent(new CustomEvent("spotify-auth-changed",{detail:{authenticated:!0}}))}),[s]);const r=l.useCallback((async()=>{if(s){a({type:"SET_LOADING",payload:!0}),a({type:"SET_ERROR",payload:null});try{console.log("[ConversionContext] üéµ Fetching Spotify playlists...");const e=await fs(),t=await fa.getTokens("spotify");if(console.log("Spotify auth check:",{user:s.uid,isAuthed:e,hasTokensFromTokenManager:!!t,hasAccessToken:!!(null==t?void 0:t.accessToken),hasRefreshToken:!!(null==t?void 0:t.refreshToken),tokenExpiresAt:null==t?void 0:t.expiresAt}),!e||!(null==t?void 0:t.accessToken))return void a({type:"SET_ERROR",payload:"Spotify not connected. Please connect your Spotify account first."});const{detectAccountType:r}=await d((()=>Promise.resolve().then((()=>js))),void 0),i=await r(t.accessToken);if(console.log("[ConversionContext] Account type detected:",i),!i.hasPlaylistAccess){let e="üö´ **Spotify Family Account Detected**\n\n";return"family_child"===i.accountType?e+="Your account appears to be a **family plan child account** with restricted permissions.\n\n":"family_restricted"===i.accountType?e+="Your account has **family plan restrictions** on playlist access.\n\n":e+="Your account has **limited playlist permissions**.\n\n",e+="**üîÑ Alternative Solutions:**\n",e+="‚Ä¢ **Use Public Playlist URLs**: You can still convert playlists by pasting public Spotify playlist URLs\n",e+="‚Ä¢ **Ask Family Admin**: Request the family plan administrator to enable playlist permissions\n",e+='‚Ä¢ **Try Read-Only Mode**: Click "Try Family-Friendly Connection" below\n',e+="‚Ä¢ **Use Different Account**: Sign in with a personal Premium account\n\n",i.recommendations.length>0&&(e+="**üí° Specific Recommendations:**\n",i.recommendations.forEach((t=>{e+=`‚Ä¢ ${t}\n`}))),a({type:"SET_ERROR",payload:e}),void a({type:"SET_ACCOUNT_TYPE",payload:i.accountType})}const o=await bs();if(!o)return void a({type:"SET_ERROR",payload:"Failed to get Spotify access token. Please reconnect your account."});const n=await(async e=>{try{const t=await fetch("https://api.spotify.com/v1/me/playlists?limit=50",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){if(401===t.status){console.log("Spotify token expired in getSpotifyPlaylists, attempting refresh...");const e=await fa.getTokens("spotify");if(e){const t=await fa.refreshTokensPublic("spotify",e.refreshToken);if(t){const e=await fetch("https://api.spotify.com/v1/me/playlists?limit=50",{headers:{Authorization:`Bearer ${t.accessToken}`,"Content-Type":"application/json"}});if(!e.ok)throw 401===e.status?(await fa.deleteTokens("spotify"),new Error("Your Spotify session has expired. Please reconnect your Spotify account.")):403===e.status?new Error("You do not have permission to access Spotify playlists. Please check your account settings and try reconnecting."):new Error(`Failed to fetch playlists: ${e.status} ${e.statusText}`);return(await e.json()).items||[]}throw await fa.deleteTokens("spotify"),new Error("Your Spotify session has expired. Please reconnect your Spotify account.")}throw new Error("Your Spotify session has expired. Please reconnect your Spotify account.")}throw 403===t.status?new Error("You do not have permission to access Spotify playlists. Please check your account settings and try reconnecting."):new Error(`Failed to fetch playlists: ${t.status} ${t.statusText}`)}return(await t.json()).items||[]}catch(t){throw console.error("Error fetching Spotify playlists:",t),t}})(o);console.log("[ConversionContext] ‚úÖ Fetched Spotify playlists:",n.length),a({type:"SET_SPOTIFY_PLAYLISTS",payload:n}),a({type:"SET_STATUS",payload:As.SELECTING_PLAYLIST}),a({type:"SET_ACCOUNT_TYPE",payload:i.accountType})}catch(e){console.error("Error fetching Spotify playlists:",e);let t="Failed to fetch Spotify playlists";e instanceof Error&&(e.message.includes("401")||e.message.includes("Authentication")?t="Spotify authentication expired. Please reconnect your Spotify account.":e.message.includes("403")||e.message.includes("permission")?(t="üö´ **Spotify Family Account Issue**\n\n",t+="Your account doesn't have permission to access playlists. This is common with:\n\n",t+="**üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Plan Accounts:**\n",t+="‚Ä¢ Child accounts often have restricted permissions\n",t+="‚Ä¢ Some family plans limit playlist access\n",t+="‚Ä¢ Regional restrictions may apply\n\n",t+="**üîÑ Solutions to Try:**\n",t+="‚Ä¢ **Use Public URLs**: Paste any public Spotify playlist URL for conversion\n",t+='‚Ä¢ **Try Family Mode**: Use the "Family-Friendly Connection" option below\n',t+="‚Ä¢ **Contact Admin**: Ask your family plan administrator for permissions\n",t+="‚Ä¢ **Different Account**: Try with a personal Premium account\n",t+="‚Ä¢ **Check Settings**: Review your Spotify privacy settings\n\n",t+="**üí° Tip**: You can convert any public playlist by pasting its URL!"):t=e.message.includes("429")?"Rate limit exceeded. Please try again in a few minutes.":e.message),a({type:"SET_ERROR",payload:t})}finally{a({type:"SET_LOADING",payload:!1})}}else a({type:"SET_ERROR",payload:"Please sign in to continue"})}),[s,a]),i=l.useCallback((async()=>{if(s){a({type:"SET_STATUS",payload:As.LOADING_PLAYLISTS});try{const e=await Da();if(e&&e.items){const t=e.items.map((e=>{var t,a,s,r,i,o,n;const l=null==(s=null==(a=null==(t=e.snippet)?void 0:t.thumbnails)?void 0:a.default)?void 0:s.url;return l&&(console.log("Processing YouTube playlist thumbnail:",{playlistName:null==(r=e.snippet)?void 0:r.title,thumbnailUrl:l}),l.includes("no_thumbnail.jpg")&&(console.log("Removing invalid thumbnail for playlist:",null==(i=e.snippet)?void 0:i.title),(null==(n=null==(o=e.snippet)?void 0:o.thumbnails)?void 0:n.default)&&delete e.snippet.thumbnails.default)),e}));console.log(`Processed ${t.length} YouTube playlists`),a({type:"SET_YOUTUBE_PLAYLISTS",payload:t})}else a({type:"SET_YOUTUBE_PLAYLISTS",payload:[]});a({type:"SET_STATUS",payload:As.IDLE})}catch(e){console.error("Error fetching YouTube playlists:",e),a({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to load YouTube playlists"})}}else a({type:"SET_ERROR",payload:"You need to authenticate with YouTube first"})}),[s,a]),o=l.useCallback((async e=>{console.log("[selectPlaylist] Called with playlistId:",e);let s=t.spotifyPlaylists.find((t=>t.id===e));if(!s)try{s=await Ia(e),a({type:"SET_SPOTIFY_PLAYLISTS",payload:[...t.spotifyPlaylists,s]})}catch(r){return console.error("[selectPlaylist] Could not fetch playlist details:",r),void a({type:"SET_ERROR",payload:"Could not fetch playlist details. It may be private, unavailable, or you do not have access."})}a({type:"SELECT_PLAYLIST",payload:e});try{console.log("[selectPlaylist] Fetching tracks for playlistId:",e);const t=await Ea(e);console.log("[selectPlaylist] Tracks API response:",t);const s=await Pa(t);a({type:"SET_TRACKS",payload:s})}catch(r){console.error("[selectPlaylist] Could not fetch playlist tracks:",r),a({type:"SET_ERROR",payload:"Could not fetch playlist tracks. The playlist may be private, unavailable, or you do not have access."})}}),[t.spotifyPlaylists,a]),n=l.useCallback((async e=>{var s;console.log("[selectYouTubePlaylist] Called with playlistId:",e);const r=t.youtubePlaylists.find((t=>t.id===e));if(!r)return console.error("[selectYouTubePlaylist] Playlist not found in state"),void a({type:"SET_ERROR",payload:"Selected playlist not found. Please refresh and try again."});a({type:"SELECT_PLAYLIST",payload:e});const i=(null==(s=r.snippet)?void 0:s.title)||"YouTube Playlist";console.log("[selectYouTubePlaylist] Selected playlist:",i);try{console.log("[selectYouTubePlaylist] Fetching tracks for playlistId:",e);const t=await ns();if(!t)throw new Error("YouTube authentication token not found. Please reconnect to YouTube.");const s=await Ua(e,t);if(!s||0===s.length)throw new Error("No tracks found in this YouTube playlist.");const r=s.map((e=>{var t,a,s;return(null==(a=null==(t=e.snippet)?void 0:t.resourceId)?void 0:a.videoId)||(null==(s=e.contentDetails)?void 0:s.videoId)})).filter(Boolean);console.log("Fetching video details for preview:",r.length,"videos");const i=[],o=50;for(let e=0;e<r.length;e+=o){const a=r.slice(e,e+o).join(","),s=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&id=${a}`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const e=await s.json();e.items&&i.push(...e.items)}await new Promise((e=>setTimeout(e,100)))}const n=new Map;i.forEach((e=>{n.set(e.id,e)}));const l=s.map((e=>{var t,a,s,r,i,o,l;const c=(null==(a=null==(t=e.snippet)?void 0:t.resourceId)?void 0:a.videoId)||(null==(s=e.contentDetails)?void 0:s.videoId),d=n.get(c),u=(null==(r=e.snippet)?void 0:r.title)||"",m=(null==(i=e.snippet)?void 0:i.videoOwnerChannelTitle)||(null==(o=e.snippet)?void 0:o.channelTitle)||"Unknown";let h=[m],x=u;const p=[" - "," ‚Äì ",": ",' "'," '"," // "," | "];for(const n of p)if(u.includes(n)){const e=u.split(n);if(e.length>=2){h=[e[0].trim()],x=e.slice(1).join(n).trim().replace(/^['"]/,"").replace(/['"]$/,"");break}}let g=0;if(null==(l=null==d?void 0:d.contentDetails)?void 0:l.duration){const e=d.contentDetails.duration.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(e){g=1e3*(3600*parseInt(e[1]||"0")+60*parseInt(e[2]||"0")+parseInt(e[3]||"0"))}}return{id:e.id||`yt-${Math.random().toString(36).substring(2,9)}`,name:x,artists:h,album:m,duration_ms:g,popularity:0,explicit:!1,searchQuery:`${h[0]} ${x}`,videoId:c}}));a({type:"SET_TRACKS",payload:l})}catch(o){console.error("[selectYouTubePlaylist] Could not fetch playlist tracks:",o),a({type:"SET_ERROR",payload:"Could not fetch playlist tracks. The playlist may be private, unavailable, or you do not have access."})}}),[t.youtubePlaylists,a]),u=(e,t)=>{let a=0;const s=e=>e.toLowerCase().replace(/[^\w\s]/g,"").trim(),r=s(e.name),i=s(e.artists[0]),o=s(t.name),n=s(t.artists[0].name);if(r===o)a+=.4;else if(o.includes(r)||r.includes(o))a+=.3;else{const e=r.split(" "),t=o.split(" "),s=e.filter((e=>t.includes(e)));s.length>0&&(a+=s.length/Math.max(e.length,t.length)*.2)}if(i===n)a+=.4;else if(n.includes(i)||i.includes(n))a+=.3;else{const e=i.split(" "),t=n.split(" "),s=e.filter((e=>t.includes(e)));s.length>0&&(a+=s.length/Math.max(e.length,t.length)*.2)}if(e.duration_ms&&t.duration_ms){const s=Math.abs(e.duration_ms-t.duration_ms),r=Math.max(e.duration_ms,t.duration_ms);a+=.2*Math.max(0,1-s/r)}return Math.min(a,1)},m=(e,t)=>{var a;let s=0;const r=e=>e.toLowerCase().replace(/[^\w\s]/g,"").trim(),i=r(e.name),o=r(e.artists[0]),n=r(t.snippet.title),l=r(t.snippet.channelTitle);if(i===n)s+=.5;else if(n.includes(i)||i.includes(n))s+=.4;else{const e=i.split(" "),t=n.split(" "),a=e.filter((e=>t.includes(e)));a.length>0&&(s+=a.length/Math.max(e.length,t.length)*.3)}if(o===l)s+=.4;else if(l.includes(o)||o.includes(l))s+=.3;else{const e=o.split(" "),t=l.split(" "),a=e.filter((e=>t.includes(e)));a.length>0&&(s+=a.length/Math.max(e.length,t.length)*.2)}if(e.duration_ms&&(null==(a=t.contentDetails)?void 0:a.duration)){const a=t.contentDetails.duration.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(a){const t=1e3*(3600*parseInt(a[1]||"0")+60*parseInt(a[2]||"0")+parseInt(a[3]||"0")),r=Math.abs(e.duration_ms-t),i=Math.max(e.duration_ms,t);s+=.1*Math.max(0,1-r/i)}}return Math.min(s,1)},h=l.useCallback((async()=>{var e,r;if(t.status!==As.MATCHING_TRACKS&&t.status!==As.CREATING_PLAYLIST)if(t.selectedPlaylistId)try{if(!s)throw new Error("You must be logged in to convert playlists");const x=t.selectedPlaylistId;if(!x)throw new Error("Please select a playlist to convert");a({type:"SET_ERROR",payload:null}),a({type:"SET_STATUS",payload:As.LOADING_TRACKS}),a({type:"UPDATE_MATCHING_PROGRESS",payload:0});let p=localStorage.getItem("source_platform")||"spotify",g=localStorage.getItem("destination_platform")||"youtube";x.startsWith("PL")&&x.length>20?(p="youtube",g="spotify",console.log("[ConversionContext] üîç Auto-detected YouTube playlist ID, setting source=youtube, destination=spotify")):22!==x.length||x.startsWith("PL")||(p="spotify",g="youtube",console.log("[ConversionContext] üîç Auto-detected Spotify playlist ID, setting source=spotify, destination=youtube")),console.log("[ConversionContext] Platform determination:",{playlistId:x,detectedSource:p,detectedDestination:g,storedSource:localStorage.getItem("source_platform"),storedDestination:localStorage.getItem("destination_platform")});let y=[],f=new Map;const b=`${p}_${x}_tracks`,v=sessionStorage.getItem(b);if(v&&t.tracks.length>0)console.log("Using cached tracks data"),y=t.tracks;else if("spotify"===p)try{console.log("Fetching tracks from Spotify for playlist:",x);const t=Ea(x),a=new Promise(((e,t)=>setTimeout((()=>t(new Error("Spotify tracks request timed out"))),15e3))),s=await Promise.race([t,a]);console.log("Raw tracks data received:",{itemsCount:(null==(e=null==s?void 0:s.items)?void 0:e.length)||0,total:(null==s?void 0:s.total)||0}),y=await Pa(s),console.log("Processed tracks:",y.length),sessionStorage.setItem(b,JSON.stringify(y))}catch(i){console.error("Error fetching Spotify tracks:",i);let e="Failed to load tracks from Spotify";throw i instanceof Error&&(e=`Spotify error: ${i.message}`,i.message.includes("Authentication")||i.message.includes("token")?e+=". Try reconnecting to Spotify.":i.message.includes("timed out")?e="Spotify request timed out. Please try again with a better connection.":i.message.includes("403")||i.message.includes("Forbidden")?e="Access denied. The playlist may be private or you may not have permission to access it.":(i.message.includes("404")||i.message.includes("Not Found"))&&(e="Playlist not found. It may have been deleted or made private.")),new Error(e)}else if("youtube"===p)try{console.log("Fetching tracks from YouTube for playlist:",x);const e=await ns();if(!e)throw new Error("YouTube authentication token not found. Please reconnect to YouTube.");const t=Ua(x,e),a=new Promise(((e,t)=>setTimeout((()=>t(new Error("YouTube tracks request timed out"))),15e3))),s=await Promise.race([t,a]);if(console.log("Raw YouTube tracks data received:",{itemsCount:(null==s?void 0:s.length)||0}),!s||0===s.length)throw new Error("No tracks found in this YouTube playlist. It might be empty, private, or you may not have access to it.");const r=s.map((e=>{var t,a,s;return(null==(a=null==(t=e.snippet)?void 0:t.resourceId)?void 0:a.videoId)||(null==(s=e.contentDetails)?void 0:s.videoId)})).filter(Boolean);console.log("Fetching video details for",r.length,"videos");const i=[],o=50;for(let l=0;l<r.length;l+=o){const t=r.slice(l,l+o).join(","),a=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&id=${t}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const e=await a.json();e.items&&i.push(...e.items)}await new Promise((e=>setTimeout(e,100)))}const n=new Map;i.forEach((e=>{n.set(e.id,e)})),y=s.map((e=>{var t,a,s,r,i,o,l;const c=(null==(a=null==(t=e.snippet)?void 0:t.resourceId)?void 0:a.videoId)||(null==(s=e.contentDetails)?void 0:s.videoId),d=n.get(c),u=(null==(r=e.snippet)?void 0:r.title)||"",m=(null==(i=e.snippet)?void 0:i.videoOwnerChannelTitle)||(null==(o=e.snippet)?void 0:o.channelTitle)||"Unknown";let h=[m],x=u;const p=[" - "," ‚Äì ",": ",' "'," '"," // "," | "];for(const n of p)if(u.includes(n)){const e=u.split(n);if(e.length>=2){h=[e[0].trim()],x=e.slice(1).join(n).trim().replace(/^['"]/,"").replace(/['"]$/,"");break}}let g=0;if(null==(l=null==d?void 0:d.contentDetails)?void 0:l.duration){const e=d.contentDetails.duration.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(e){g=1e3*(3600*parseInt(e[1]||"0")+60*parseInt(e[2]||"0")+parseInt(e[3]||"0"))}}return{id:e.id||`yt-${Math.random().toString(36).substring(2,9)}`,name:x,artists:h,album:m,duration_ms:g,popularity:0,explicit:!1,searchQuery:`${h[0]} ${x}`,videoId:c}})),console.log("Processed YouTube tracks:",y.length),sessionStorage.setItem(b,JSON.stringify(y))}catch(i){console.error("Error fetching YouTube tracks:",i);let e="Failed to load tracks from YouTube";throw i instanceof Error&&(e=`YouTube error: ${i.message}`,i.message.includes("Authentication")||i.message.includes("token")?e+=". Try reconnecting to YouTube.":i.message.includes("timed out")?e="YouTube request timed out. Please try again with a better connection.":i.message.includes("403")||i.message.includes("Forbidden")?e="Access denied. The playlist may be private or you may not have permission to access it.":(i.message.includes("404")||i.message.includes("Not Found"))&&(e="Playlist not found. It may have been deleted or made private.")),new Error(e)}if(!y||0===y.length)throw console.error("No tracks found after processing. Debug info:",{playlistId:x,sourcePlatform:p,cachedTracks:!!v,stateTracksLength:t.tracks.length}),new Error("No tracks found in the selected playlist. This might be due to authentication issues or the playlist being empty.");if(a({type:"SET_TRACKS",payload:y}),a({type:"SET_STATUS",payload:As.MATCHING_TRACKS}),"youtube"===g){const e=5,r=Math.ceil(y.length/e);for(let t=0;t<r;t++){const r=t*e,i=Math.min(r+e,y.length),o=y.slice(r,i).map((async e=>{var t,a;try{const r=[`${e.artists[0]} ${e.name}`,`${e.name} ${e.artists[0]}`,e.name,`${e.artists[0]} - ${e.name}`,`${e.artists[0]} "${e.name}"`];let i=null,o=0;for(const t of r){const a=await Ya(s.uid,t);if(a&&a.items&&a.items.length>0)for(const t of a.items){const a=m(e,t);a>o&&(o=a,i=t)}if(o>.7)break}return i&&o>.5?{trackId:e.id,match:{videoId:i.id.videoId,title:i.snippet.title,channelTitle:i.snippet.channelTitle,thumbnailUrl:(null==(a=null==(t=i.snippet.thumbnails)?void 0:t.default)?void 0:a.url)&&!i.snippet.thumbnails.default.url.includes("no_thumbnail")?i.snippet.thumbnails.default.url:"https://via.placeholder.com/120x90/666666/FFFFFF?text=No+Thumbnail",score:Math.round(100*o),matchDetails:{titleMatch:Math.round(100*o),artistMatch:Math.round(100*o),lengthScore:Math.round(100*o)}}}:{trackId:e.id,match:null}}catch(r){return console.warn("Error matching track:",e.name,r),{trackId:e.id,match:null}}}));(await Promise.all(o)).forEach((({trackId:e,match:t})=>{f.set(e,t)}));const n=Math.min((t+1)*e/y.length*100,100);a({type:"UPDATE_MATCHING_PROGRESS",payload:n}),await new Promise((e=>setTimeout(e,10)))}a({type:"SET_MATCHES",payload:f}),a({type:"SET_STATUS",payload:As.CREATING_PLAYLIST});const d=t.spotifyPlaylists.find((e=>e.id===x));if(!d)throw new Error("Selected playlist details not found");const u=`${d.name} (Converted)`,h="Converted from spotify using Playlist Converter";try{const e=(async(e,t,a,s="private")=>{try{if(!(await Ba()))throw console.error("Cannot create YouTube playlist: No valid access token"),new Error("No valid YouTube access token available. Please reconnect your YouTube account.");return await za(e,t,a,s)}catch(i){throw console.error("Error finding or creating playlist:",i),i}})(s.uid,u,h),r=new Promise(((e,t)=>setTimeout((()=>t(new Error("YouTube playlist creation timed out"))),2e4))),c=await Promise.race([e,r]);if(!c||!c.id)throw new Error("Failed to create YouTube playlist");const m=c.id,p=(e=>e?`https://www.youtube.com/playlist?list=${e}`:"")(m);console.log(`Created YouTube playlist: ${m}`),a({type:"SET_YOUTUBE_PLAYLIST",payload:{id:m,url:p}});let g=0,b=0,v=0,w=[];for(const t of f.values())t&&t.videoId&&v++;if(0===v)throw new Error("No matching videos found for the tracks in this playlist");let j=0;const N=Array.from(f.entries());console.log(`Starting to add ${v} videos to YouTube playlist ${m}`);for(let t=0;t<N.length;t++){const[e,r]=N[t],n=y.find((t=>t.id===e));if(r&&r.videoId){try{let e=0,t=!1,a=null;for(;e<3&&!t;)try{console.log(`Adding video ${r.videoId} to YouTube playlist (attempt ${e+1}/3)`),await new Promise((t=>setTimeout(t,1e3+1e3*e))),await Oa(s.uid,m,r.videoId),t=!0,g++,console.log(`Successfully added video ${r.videoId} to YouTube playlist`)}catch(o){e++,a=o,console.warn(`Attempt ${e} failed for video ${r.videoId}:`,o),e<3&&await new Promise((t=>setTimeout(t,2e3*e)))}if(!t&&(b++,console.error(`Failed to add video ${r.videoId} after multiple attempts:`,a),n)){const t={name:n.name,artists:n.artists,reason:`Failed to add to YouTube playlist after ${e} attempts: ${a instanceof Error?a.message:"Unknown error"}`,searchQueries:[`${n.artists[0]} ${n.name}`],bestMatchScore:r.score/100,bestMatchTitle:r.title,bestMatchArtist:r.channelTitle};w.push(t)}}catch(i){if(b++,console.error(`Error adding video ${r.videoId} to playlist:`,i),n){const e={name:n.name,artists:n.artists,reason:i instanceof Error?i.message:"Unknown error",searchQueries:[`${n.artists[0]} ${n.name}`],bestMatchScore:r.score/100,bestMatchTitle:r.title,bestMatchArtist:r.channelTitle};w.push(e)}}j++,a({type:"UPDATE_MATCHING_PROGRESS",payload:Math.min(j/N.length*100,100)}),t%5==0&&t>0&&console.log(`Progress update: Added ${g} videos, ${b} failed, ${j}/${N.length} processed`)}else if(j++,b++,n){const e={name:n.name,artists:n.artists,reason:"No YouTube match found",searchQueries:[`${n.artists[0]} ${n.name}`,n.name],bestMatchScore:0,bestMatchTitle:"None",bestMatchArtist:"None"};w.push(e)}}if(null==s?void 0:s.uid)try{const e="youtube-to-spotify";await Ps.addConversion(s.uid,g,e),console.log("Successfully updated user stats for conversion")}catch(i){console.error("Failed to update user stats:",i)}a({type:"SET_STATUS",payload:As.SUCCESS});const k=y.length-g;let S=`Successfully converted ${g} tracks`;k>0&&(S+=` (${k} tracks not found on Spotify)`,"undefined"!=typeof window&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("show-toast",{detail:{type:"info",title:"Conversion Complete",message:`${g} tracks converted successfully. ${k} tracks were not found on Spotify and were skipped.`,duration:8e3}}))),console.log(S);const T={id:`conversion_${Date.now()}`,spotifyPlaylistId:x,spotifyPlaylistName:d.name,spotifyPlaylistUrl:`https://open.spotify.com/playlist/${x}`,youtubePlaylistId:m,youtubePlaylistUrl:p,tracksMatched:g,tracksFailed:b,totalTracks:y.length,convertedAt:new Date,failedTracks:w};a({type:"SET_CONVERSION_HISTORY",payload:[T,...t.conversionHistory]}),Ds(s.uid,[T,...t.conversionHistory]);try{console.log("Attempting to save conversion to Firestore:",{userId:s.uid,conversionId:T.id,playlistName:T.spotifyPlaylistName});const e=ct(_s,"users",s.uid,"conversions").withConverter(da),t=Je(e,T.id);let a=0;const r=3;let i=!1;for(;a<r&&!i;)try{await Qe(t,{...T,convertedAt:pt.fromDate(T.convertedAt),userId:s.uid,tracks:y.map((e=>({name:e.name??"Unknown",artists:Array.isArray(e.artists)?e.artists:[],album:e.album??"",duration_ms:e.duration_ms??0,popularity:e.popularity??0,explicit:e.explicit??!1,...e.releaseYear?{releaseYear:e.releaseYear}:{},genres:Array.isArray(e.genres)?e.genres:[],artistImages:Array.isArray(e.artistImages)?e.artistImages:[]}))),failedTracks:w}),console.log("Successfully saved conversion to Firestore:",t.id),i=!0;break}catch(n){if(a++,console.warn(`Failed to save conversion (attempt ${a}/${r}):`,n),!(a<r))throw n;await new Promise((e=>setTimeout(e,1e3*Math.pow(2,a))))}}catch(l){console.error("Failed to save conversion history to Firestore:",l),Ys("saveConversion",l,s.uid),"undefined"!=typeof window&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("show-toast",{detail:{type:"warning",title:"Backup Save Only",message:"Your conversion was successful but could not be saved online. It is saved locally only.",duration:5e3}}))}}catch(c){console.error("Error during YouTube playlist creation or population:",c);let e="Failed to create or update YouTube playlist";throw c instanceof Error&&(e=c.message.includes("timed out")?"YouTube request timed out. Your playlist may have been created but not fully populated. Please check your YouTube account.":c.message.includes("quota")?"YouTube API quota exceeded. Please try again later.":`YouTube error: ${c.message}`),new Error(e)}}else if("spotify"===g){console.log("=== Starting YouTube to Spotify conversion ==="),a({type:"SET_STATUS",payload:As.CREATING_PLAYLIST}),a({type:"UPDATE_MATCHING_PROGRESS",payload:5}),console.log("Source platform:",p),console.log("Destination platform:",g),console.log("Playlist ID:",x),console.log("Tracks count:",y.length);const e=await fs();if(console.log("Spotify authentication status:",e),!e)throw new Error("Spotify authentication required. Please reconnect your Spotify account.");let o=t.youtubePlaylists.find((e=>e.id===x));if(console.log("Selected YouTube playlist (from state):",o),!o)try{const e=await ns();if(e){const t=await fetch(`https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=${x}`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();e.items&&e.items.length>0&&(o=e.items[0],console.log("Fetched YouTube playlist details by ID:",o))}else console.warn("Failed to fetch YouTube playlist details:",t.status,t.statusText)}}catch(uo){console.warn("Error fetching YouTube playlist details:",uo)}o||(o={id:x,snippet:{title:"YouTube Playlist"}},console.warn("Using minimal fallback playlist details"));const n=((null==(r=o.snippet)?void 0:r.title)||"YouTube Playlist").replace(/\s*\(Converted\)+$/i,"").trim(),m="(Converted)",f=n.endsWith(m)?n:`${n} ${m}`,b="Converted from YouTube using SoundSwapp";console.log("Spotify playlist name:",f),console.log("Spotify playlist description:",b);try{console.log("Creating Spotify playlist:",f),console.log("Playlist description:",b);let e=await La(f);if(e||(e=await Aa(f,`${b} ‚Ä¢ tag:converted-by-soundswapp`)),!e||!e.id)throw new Error("Failed to create Spotify playlist");const r=e.id,o=`https://open.spotify.com/playlist/${r}`;console.log(`Created Spotify playlist: ${r}`),a({type:"SET_SPOTIFY_PLAYLIST",payload:{id:r,url:o}}),a({type:"SET_STATUS",payload:As.MATCHING_TRACKS});let n=0,c=0,m=y.length,p=[];if(console.log(`Starting to add ${m} tracks to Spotify playlist ${r}`),console.log("First few tracks:",y.slice(0,3).map((e=>({name:e.name,artists:e.artists})))),!Array.isArray(y)||0===y.length)throw new Error("No tracks available to convert. Please re-select the playlist.");for(let t=0;t<y.length;t++){const e=y[t];try{console.log(`\n--- Processing track ${t+1}/${m}: "${e.name}" by ${e.artists[0]} ---`);const a=Ns(e);console.log("Generated search queries:",a);let s=null,i=0,o="",l="";for(const t of a){console.log(`Searching Spotify for: "${t}"`);try{console.log(`Searching Spotify for: "${t}"`);const a=await Ra(t,20);if(console.log(`Search results for "${t}":`,a?"Found results":"No results"),a&&a.tracks&&a.tracks.items&&a.tracks.items.length>0){console.log(`Found ${a.tracks.items.length} results for "${t}"`);for(const t of a.tracks.items){const a=u(e,t);console.log(`  Result: "${t.name}" by ${t.artists[0].name} - Score: ${a.toFixed(2)}`),a>i&&(i=a,s=t,o=t.name,l=t.artists[0].name)}}else console.log(`No search results found for "${t}"`)}catch(d){console.error(`Error searching for "${t}":`,d)}if(i>.6){console.log(`Found good match with score ${i.toFixed(2)}, stopping search`);break}}if(s&&i>.25){const d=s.uri;console.log(`Found Spotify track: ${s.name} by ${s.artists[0].name} (score: ${i.toFixed(2)})`),console.log(`Adding track URI: ${d} to playlist ${r}`);try{await _a(r,[d]),console.log(`Successfully added track ${t+1}/${m}`),n++}catch(h){console.error("Error adding track to playlist:",h),c++;const t={name:e.name,artists:e.artists,reason:`Failed to add to playlist: ${h instanceof Error?h.message:"Unknown error"}`,searchQueries:a,bestMatchScore:i,bestMatchTitle:o||"None",bestMatchArtist:l||"None"};p.push(t)}}else{c++,console.log(`No good Spotify match found for: "${e.name}" by ${e.artists[0]} (best score: ${i.toFixed(2)})`);const t={name:e.name,artists:e.artists,reason:i>0?`Best match score (${i.toFixed(2)}) below threshold (0.3)`:"No matches found",searchQueries:a,bestMatchScore:i,bestMatchTitle:o||"None",bestMatchArtist:l||"None"};p.push(t)}}catch(i){c++,console.error(`Error processing track "${e.name}":`,i);const t={name:e.name,artists:e.artists,reason:i instanceof Error?i.message:"Unknown error",searchQueries:[`${e.artists[0]} ${e.name}`,`${e.name} ${e.artists[0]}`,e.name,`${e.artists[0]} - ${e.name}`,`${e.artists[0]} "${e.name}"`],bestMatchScore:0,bestMatchTitle:"Error occurred",bestMatchArtist:"Error occurred"};p.push(t)}const s=Math.min((t+1)/m*100,100);a({type:"UPDATE_MATCHING_PROGRESS",payload:s}),await new Promise((e=>setTimeout(e,500)))}if(console.log("\n--- Conversion Summary ---"),console.log(`Total tracks: ${m}`),console.log(`Successfully converted: ${n}`),console.log(`Failed to convert: ${c}`),console.log(`Success rate: ${(n/m*100).toFixed(1)}%`),p.length>0&&console.log("Failed tracks:",p),null==s?void 0:s.uid)try{const e="spotify-to-youtube";await Ps.addConversion(s.uid,n,e),console.log("Successfully updated user stats for conversion")}catch(i){console.error("Failed to update user stats:",i)}a({type:"SET_STATUS",payload:As.SUCCESS}),a({type:"UPDATE_MATCHING_PROGRESS",payload:100});const g={id:`conversion_${Date.now()}`,spotifyPlaylistId:r,spotifyPlaylistName:f,spotifyPlaylistUrl:o,youtubePlaylistId:x,youtubePlaylistUrl:`https://www.youtube.com/playlist?list=${x}`,tracksMatched:n,tracksFailed:c,totalTracks:y.length,convertedAt:new Date,failedTracks:p};a({type:"SET_CONVERSION_HISTORY",payload:[g,...t.conversionHistory]}),Ds(s.uid,[g,...t.conversionHistory]);try{console.log("Attempting to save conversion to Firestore:",{userId:s.uid,conversionId:g.id,playlistName:g.spotifyPlaylistName});const e=ct(_s,"users",s.uid,"conversions").withConverter(da),t=Je(e,g.id);await Qe(t,{...g,convertedAt:pt.fromDate(g.convertedAt),userId:s.uid,tracks:y.map((e=>({name:e.name??"Unknown",artists:Array.isArray(e.artists)?e.artists:[],album:e.album??"",duration_ms:e.duration_ms??0,popularity:e.popularity??0,explicit:e.explicit??!1,...e.releaseYear?{releaseYear:e.releaseYear}:{},genres:Array.isArray(e.genres)?e.genres:[],artistImages:Array.isArray(e.artistImages)?e.artistImages:[]}))),...Array.isArray(p)?{failedTracks:p}:{}}),console.log("Successfully saved conversion to Firestore:",t.id)}catch(l){console.error("Failed to save conversion history to Firestore:",l),Ys("saveConversion",l,s.uid)}}catch(c){console.error("Error during Spotify playlist creation or population:",c);let e="Failed to create or update Spotify playlist";throw c instanceof Error&&(e=c.message.includes("Authentication")||c.message.includes("token")?"Spotify authentication expired. Please reconnect your Spotify account.":c.message.includes("quota")?"Spotify API quota exceeded. Please try again later.":`Spotify error: ${c.message}`),new Error(e)}}}catch(i){console.error("Conversion error:",i);let e="An error occurred during conversion";i instanceof Error&&(e=i.message.includes("timed out")?"The request timed out. Your connection may be slow or unstable. The playlist may have been partially created.":i.message.includes("quota")?"YouTube API quota exceeded. Please try again later (usually after 24 hours).":i.message.includes("Authentication")||i.message.includes("token")?"Authentication issue. Please try reconnecting your accounts.":i.message),a({type:"SET_ERROR",payload:e}),a({type:"SET_STATUS",payload:As.ERROR})}else a({type:"SET_ERROR",payload:"No playlist selected"});else console.log("Conversion already in progress, ignoring duplicate request")}),[t.spotifyPlaylists,t.youtubePlaylists,s,a,t.tracks,t.selectedPlaylistId]),x=async()=>{if(a({type:"SET_ERROR",payload:null}),s)try{const t=(e=>{try{const t=localStorage.getItem(`${Ms}_${e}`);if(t)return JSON.parse(t).map((e=>({...e,convertedAt:new Date(e.convertedAt)})))}catch(t){console.error("Error retrieving conversion history from localStorage:",t)}return[]})(s.uid);console.log("Loaded from localStorage:",{count:t.length,conversions:t.map((e=>{var t;return{id:e.id,tracksFailed:e.tracksFailed,failedTracksLength:null==(t=e.failedTracks)?void 0:t.length}}))}),t.length>0&&a({type:"SET_CONVERSION_HISTORY",payload:t});try{if(console.log("Fetching conversion history from Firestore for user:",s.uid),!_s)throw console.error("Firestore database not initialized"),new Error("Database not available");await new Promise((e=>setTimeout(e,500)));const e=ct(_s,"users",s.uid,"conversions").withConverter(da),t=ut(e,ht("convertedAt","desc")),r=dt(t),i=new Promise(((e,t)=>setTimeout((()=>t(new Error("Firestore query timeout"))),1e4))),o=await Promise.race([r,i]);if(o.empty)console.log("No conversion history found in Firestore");else{const e=[];o.forEach((t=>{var a;const s=t.data();console.log("Loading conversion from Firestore:",{id:t.id,tracksFailed:s.tracksFailed,failedTracks:s.failedTracks,failedTracksLength:null==(a=s.failedTracks)?void 0:a.length}),e.push({id:t.id,spotifyPlaylistId:s.spotifyPlaylistId,spotifyPlaylistName:s.spotifyPlaylistName,spotifyPlaylistUrl:s.spotifyPlaylistUrl,youtubePlaylistId:s.youtubePlaylistId,youtubePlaylistUrl:s.youtubePlaylistUrl,tracksMatched:s.tracksMatched,tracksFailed:s.tracksFailed,totalTracks:s.totalTracks,convertedAt:s.convertedAt.toDate(),failedTracks:s.failedTracks||[]})})),a({type:"SET_CONVERSION_HISTORY",payload:e}),Ds(s.uid,e)}}catch(e){if(Ys("fetchConversionHistory",e,s.uid),await(async e=>{if((e=>e&&"string"==typeof e.message&&(e.message.includes("Listen/channel")||e.message.includes("terminated")||e.message.includes("Failed to load resource: the server responded with a status of 400")))(e)){console.log("Attempting to recover from Firestore channel termination error");try{return await ca(),!0}catch(t){console.error("Error recovering Firestore connection:",t)}}return!1})(e))return console.log("Firestore connection recovered, retrying fetch..."),void setTimeout((()=>x()),1500);if(0===t.length)if(Us(e)){console.log("Using offline mode for conversion history due to permission error"),window._firestoreUsingOfflineMode=!0;try{await ca()&&console.log("Successfully reconnected Firestore after permission error")}catch(uo){console.log("Failed to reconnect Firestore:",uo)}}else a({type:"SET_ERROR",payload:"Unable to retrieve conversion history. Using offline mode."})}}catch(t){console.error("Error in fetchConversionHistory:",t),a({type:"SET_ERROR",payload:"Failed to load conversion history. Please try again later."})}else console.log("No authenticated user found, cannot fetch conversion history")},p=l.useCallback((async(e,t)=>{a({type:"SET_LOADING",payload:!0}),a({type:"SET_ERROR",payload:null});try{let s;if("spotify"===t){const t=e.match(/(?:spotify:playlist:|playlist\/)([a-zA-Z0-9]{22})/);if(!t)throw new Error("Invalid Spotify playlist URL. Please paste a valid Spotify playlist link.");s=t[1]}else{const t=e.match(/[&?]list=([a-zA-Z0-9_-]+)/);if(!t)throw new Error("Invalid YouTube playlist URL. Please paste a valid YouTube playlist link.");s=t[1]}console.log(`[ConversionContext] üîó Starting conversion from public ${t} URL:`,s),localStorage.setItem("source_platform",t),localStorage.setItem("destination_platform","spotify"===t?"youtube":"spotify"),a({type:"SELECT_PLAYLIST",payload:s}),setTimeout((()=>{h()}),100)}catch(s){console.error("Error converting from public URL:",s);let e="Failed to convert playlist from URL";s instanceof Error&&(e=s.message),a({type:"SET_ERROR",payload:e})}finally{a({type:"SET_LOADING",payload:!1})}}),[a]),g=l.useCallback((async()=>{try{a({type:"SET_LOADING",payload:!0}),a({type:"SET_ERROR",payload:null});const{initProgressiveSpotifyAuth:e}=await d((()=>Promise.resolve().then((()=>js))),void 0);console.log("[ConversionContext] üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Attempting family-friendly Spotify connection...");const t=await e(!0);if(!t.success)throw new Error(t.error||"Failed to connect with family-friendly mode")}catch(e){console.error("Error reconnecting with family mode:",e),a({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to reconnect with family-friendly mode"})}finally{a({type:"SET_LOADING",payload:!1})}}),[a]),y={state:t,fetchSpotifyPlaylists:r,fetchYouTubePlaylists:i,selectPlaylist:o,selectYouTubePlaylist:n,startConversion:h,convertFromPublicUrl:p,reconnectWithFamilyMode:g,resetConversion:()=>{a({type:"RESET"})},fetchConversionHistory:x,dispatch:a};return c.jsx(Ls.Provider,{value:y,children:e})},zs=l.createContext(void 0),Os=({children:e})=>{const t=ya(),[a,s]=l.useState(null);return c.jsx(zs.Provider,{value:{user:t.user?{uid:t.user.uid,email:t.user.email,displayName:t.user.displayName}:null,loading:t.loading,error:a||t.error,signInWithEmail:async(e,a)=>{try{s(null),await t.signInWithEmail(e,a)}catch(r){throw s(r instanceof Error?r.message:"Authentication failed"),r}},signInWithGoogle:async()=>{try{s(null),await t.signIn()}catch(e){throw s(e instanceof Error?e.message:"Google authentication failed"),e}},signUpWithEmail:async(e,a,r)=>{try{s(null),await t.signUpWithEmail(e,a,r,!1)}catch(i){throw s(i instanceof Error?i.message:"Sign up failed"),i}},signOut:async()=>{try{s(null),await t.signOut()}catch(e){throw s(e instanceof Error?e.message:"Sign out failed"),e}}},children:e})},Bs=()=>{const e=l.useContext(zs);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e};function Hs(...e){return ft(bt(e))}const Gs=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Vs=()=>{if(!navigator.onLine)return"offline";if("connection"in navigator){const e=navigator.connection;if(e){if(e.saveData)return"limited";if(e.effectiveType&&["slow-2g","2g","3g"].includes(e.effectiveType))return"slow"}}return"good"},Ws=(e,t)=>Math.random()*(t-e)+e,qs=e=>{return e[(t=0,a=e.length,Math.floor(Ws(t,a)))];var t,a},Ks=(e,t)=>{let a;return function(...s){a||(e.apply(this,s),a=!0,setTimeout((()=>a=!1),t))}},Xs=u.memo((({color:e="#ffffff",className:t="",includeNotes:a=!0,includeIcons:s=!0,includePlatforms:r=!0,includeCircles:i=!0,animated:o=!0,colorScheme:n="colorful",density:d="medium",speedFactor:u=1,interactive:m=!0})=>{const h=l.useRef(null),[x,p]=l.useState([]),[g,y]=l.useState({});l.useState({x:0,y:0});const[f,b]=l.useState(!1),[v,w]=l.useState({width:0,height:0}),j=l.useRef({x:0,y:0}),N=l.useRef(!1),k=l.useRef(),S=l.useRef(),T=l.useCallback((()=>{const e="low"===d?15:"medium"===d?30:45;return Math.min(e,50)}),[d]),C=l.useCallback((t=>{if("monochrome"===n)return e;const a={note:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"],icon:["#A8E6CF","#DCEDC8","#FFD3B6","#FFAAA5","#FF8B94"],platform:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"],circle:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"]};return qs(a[t]||a.note)}),[n,e]),E=l.useCallback((e=>{const t=[];a&&t.push("note"),s&&t.push("icon"),r&&t.push("platform"),i&&t.push("circle");const o=qs(t);return{id:e,type:o,content:{note:qs(["‚ô™","‚ô´","‚ô¨","‚ô©","‚ô≠","‚ôÆ","‚ôØ"]),icon:qs(["üéµ","üé∂","üéπ","üé∏","üé∫","üé∑","üé§","üéß"]),platform:qs(["üéµ","üé∂","üéπ","üé∏","üé∫","üé∑","üé§","üéß"]),circle:""}[o],x:Ws(5,95),y:Ws(5,95),startX:Ws(5,95),startY:Ws(5,95),size:"circle"===o?Ws(4,12):Ws(12,24),color:C(o),opacity:Ws(.1,"circle"===o?.3:.6),rotation:Ws(-30,30),duration:Ws(20,40)/u,delay:Ws(0,15),path:qs(["wave","zigzag","curve","circle","linear"])}}),[a,s,r,i,C,u]);l.useEffect((()=>{const e=T(),t=Array.from({length:e},((e,t)=>E(t)));p(t);const a={};t.forEach((e=>{a[e.id]={x:e.x,y:e.y}})),y(a)}),[T,E]),l.useEffect((()=>{const e=Ks((()=>{w({width:window.innerWidth,height:window.innerHeight})}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const P=l.useCallback((e=>{const t=80;switch(e){case"wave":return{y:[0,-80,0,t,0],x:[0,40,t,40,0]};case"zigzag":return{y:[0,-80,t,-80,0],x:[0,t,0,-80,0]};case"curve":return{y:[0,-40,-80,-40,0],rotate:[0,45,0,-45,0]};case"circle":return{y:[0,-80,0,t,0],x:[0,t,0,-80,0],scale:[1,1.05,1,.95,1]};default:return{y:[0,-96,0],opacity:[.2,.8,.2]}}}),[]),A=l.useCallback(Ks((e=>{if(!h.current||!m)return;const t=h.current.getBoundingClientRect(),a=(e.clientX-t.left)/t.width*100,s=(e.clientY-t.top)/t.height*100;j.current={x:a,y:s},N.current=!0,f||b(!0),k.current&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame((()=>{const e={...g};let t=!1;x.forEach((r=>{const i=(o=r.x,n=r.y,l=a,c=s,Math.sqrt(Math.pow(l-o,2)+Math.pow(c-n,2)));var o,n,l,c;if(i<15){const o=10*(1-i/15),n=Math.atan2(r.y-s,r.x-a),l=r.x+Math.cos(n)*o,c=r.y+Math.sin(n)*o,d=5,u=Math.max(d,Math.min(100-d,l)),m=Math.max(d,Math.min(100-d,c));e[r.id]={x:u,y:m},t=!0}})),t&&y(e)}))}),16),[x,g,m,f]);l.useEffect((()=>{if(!m)return;document.addEventListener("mousemove",A);const e=Ks((()=>{N.current=!1,b(!1)}),100),t=()=>{S.current&&clearTimeout(S.current),S.current=setTimeout(e,150)};return document.addEventListener("mousemove",t),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mousemove",t),S.current&&clearTimeout(S.current),k.current&&cancelAnimationFrame(k.current)}}),[m,A]);const _=l.useMemo((()=>x.map((e=>{const t=g[e.id]||{x:e.x,y:e.y};return c.jsx(Ht.div,{className:"absolute",style:{top:`${t.y}%`,left:`${t.x}%`,color:e.color,fontSize:`${e.size}px`,opacity:e.opacity,transform:`rotate(${e.rotation}deg)`,willChange:"transform, opacity",zIndex:"circle"===e.type?0:1},animate:t,transition:{type:"spring",stiffness:150,damping:20},children:"circle"===e.type?c.jsx(Ht.div,{className:"rounded-full",style:{width:`${e.size}px`,height:`${e.size}px`,backgroundColor:e.color},animate:N.current?{}:o?{y:[0,-30,0,30,0],opacity:[e.opacity,1.3*e.opacity,e.opacity]}:{},transition:{repeat:1/0,duration:e.duration,delay:e.delay,ease:"easeInOut"}}):c.jsx(Ht.div,{animate:N.current?{}:o?P(e.path):{},transition:{repeat:1/0,duration:e.duration,delay:e.delay,ease:"easeInOut"},whileHover:m?{scale:1.2,opacity:1}:{},children:e.content})},e.id)}))),[x,g,o,m,P]);return c.jsxs("div",{ref:h,className:`absolute inset-0 overflow-hidden pointer-events-none ${t}`,style:{willChange:"transform"},children:[c.jsx(Gt,{children:_}),!1,c.jsx("style",{children:"\n        @keyframes float-up {\n          0%, 100% { transform: translateY(0) rotate(0deg); }\n          50% { transform: translateY(-100px) rotate(10deg); }\n        }\n\n        @keyframes float-wave {\n          0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }\n          25% { transform: translateY(-30px) translateX(20px) rotate(5deg); }\n          50% { transform: translateY(0) translateX(40px) rotate(0deg); }\n          75% { transform: translateY(30px) translateX(20px) rotate(-5deg); }\n        }\n\n        @keyframes float-zigzag {\n          0%, 100% { transform: translateY(0) translateX(0); }\n          25% { transform: translateY(-40px) translateX(40px); }\n          50% { transform: translateY(0) translateX(0); }\n          75% { transform: translateY(40px) translateX(-40px); }\n        }\n      "})]})}));Xs.displayName="ParticleField";const Qs=({color:e,position:t,size:a,animationDuration:s=20})=>{const r={...t,width:`${a}px`,height:`${a}px`};return c.jsx("div",{className:"absolute blur-3xl",style:{...r,background:e,borderRadius:"40% 60% 60% 40% / 60% 30% 70% 40%",animation:`morph ${s}s ease-in-out infinite alternate`},children:c.jsx("style",{children:"\n          @keyframes morph {\n            0% {\n              border-radius: 40% 60% 60% 40% / 60% 30% 70% 40%;\n              transform: translate(0, 0) rotate(0deg);\n            }\n            100% {\n              border-radius: 40% 60% 30% 70% / 50% 60% 30% 60%;\n              transform: translate(20px, 20px) rotate(15deg);\n            }\n          }\n        "})})},Js=({elements:e=[],count:t=10,className:a})=>{const[s,r]=l.useState([]),i=t=>{const a=e.length>0?Math.floor(Math.random()*e.length):-1,s=a>=0?e[a]:null;return{id:t,x:100*Math.random(),y:100*Math.random(),size:(null==s?void 0:s.size)||20*Math.random()+10,duration:15*Math.random()+30,delay:5*Math.random(),color:(null==s?void 0:s.color)||`hsla(${360*Math.random()}, ${70+30*Math.random()}%, ${70+30*Math.random()}%, ${.1+.5*Math.random()})`,icon:null==s?void 0:s.icon,dispersed:!1,respawnKey:0}};l.useEffect((()=>{r(Array.from({length:t},((e,t)=>i(t))))}),[t,e]);const o=["‚ô™","‚ô´","üéµ","üé∂","üéπ","üé∏","üé∫","üé∑","üé§"],n=e=>{r((t=>t.map((t=>t.id===e?{...t,dispersed:!0}:t)))),setTimeout((()=>{r((t=>t.map((t=>t.id===e?{...i(e),respawnKey:t.respawnKey+1}:t))))}),2600)},d={y:[0,10],transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}};return c.jsx("div",{className:Hs("absolute inset-0 overflow-hidden pointer-events-auto",a),children:c.jsx(Gt,{children:s.map((e=>c.jsx(Ht.div,{className:"absolute transform-gpu cursor-pointer pointer-events-auto",style:{left:`${e.x}%`,top:`${e.y}%`,fontSize:`${e.size}px`,color:e.color,animationDuration:`${e.duration}s`,animationDelay:`${e.delay}s`,opacity:.7,zIndex:2,userSelect:"none"},initial:{scale:1,opacity:.7,x:0,y:0},animate:e.dispersed?{scale:1.5,opacity:0,x:200*(Math.random()-.5),y:200*(Math.random()-.5),transition:{duration:2.5,ease:"easeOut"}}:{...d,scale:1,opacity:.7,transition:{type:"spring",stiffness:50,damping:20}},exit:{opacity:0,scale:.5,transition:{duration:.5}},whileHover:{scale:1.2,opacity:1,transition:{duration:.3}},onClick:()=>n(e.id),onMouseEnter:()=>n(e.id),children:e.icon||o[Math.floor(Math.random()*o.length)]},e.id+"-"+e.respawnKey)))})})},Zs=({text:e,speed:t=50,delay:a=1e3,cursor:s=!0,loop:r=!1,className:i,onComplete:o})=>{const[n,d]=l.useState(""),[u,m]=l.useState(0),[h,x]=l.useState(!0),[p,g]=l.useState(0),y=Array.isArray(e)?e[p]:e,f=l.useRef(null);return l.useEffect((()=>{if(f.current&&clearTimeout(f.current),h)u<y.length?f.current=setTimeout((()=>{d((e=>e+y[u])),m((e=>e+1))}),t):(x(!1),Array.isArray(e)&&r?f.current=setTimeout((()=>{x(!1)}),a):!Array.isArray(e)&&o&&o());else if(Array.isArray(e))if(n.length>0)f.current=setTimeout((()=>{d((e=>e.slice(0,-1)))}),t/2);else{const t=(p+1)%e.length;g(t),m(0),x(!0),0===t&&!r&&o&&o()}return()=>{f.current&&clearTimeout(f.current)}}),[u,y,p,a,n,h,r,o,t,e]),c.jsxs("span",{className:Hs("inline-block",i),children:[n,s&&c.jsx("span",{className:"inline-block w-[2px] h-[1.2em] bg-current ml-1 align-middle animate-blink"})]})},er={primary:"bg-button-primary-bg text-button-primary-text hover:bg-button-primary-hover shadow-glow",secondary:"bg-button-secondary-bg text-button-secondary-text hover:bg-button-secondary-hover shadow-glow",soundswapp:"soundswapp-button shadow-glow",outline:"bg-transparent text-content-primary border border-border-default hover:border-border-hover hover:bg-surface-elevated",glass:"bg-surface-card/50 backdrop-blur-sm border border-border-default text-content-primary hover:bg-surface-card/70",minimal:"bg-transparent text-content-secondary hover:text-content-primary hover:bg-surface-card/30"},tr={sm:"py-1 px-3 text-sm",md:"py-2 px-4",lg:"py-3 px-6 text-lg"},ar=l.forwardRef((({children:e,className:t="",disabled:a=!1,variant:s="soundswapp",size:r="md",fullWidth:i=!1,isLoading:o=!1,leftIcon:n,rightIcon:l,...d},u)=>c.jsxs("button",{ref:u,className:Hs("relative inline-flex items-center justify-center font-medium rounded-lg select-none","transition-all duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-primary/50","active:scale-[0.98]",er[s],tr[r],i?"w-full":"",a&&"opacity-60 pointer-events-none cursor-not-allowed",t),disabled:a||o,...d,children:[o&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("svg",{className:"animate-spin h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),c.jsxs("span",{className:Hs("flex items-center justify-center gap-2",o&&"opacity-0"),children:[n&&c.jsx("span",{className:"inline-flex",children:n}),e,l&&c.jsx("span",{className:"inline-flex",children:l})]})]})));ar.displayName="GlowButton";const sr={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},rr={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:10}}},ir=()=>{const{isDark:e,toggleTheme:t}=qt(),a=l.useRef(null),s=l.useRef(null),r=l.useRef(null),i=[{icon:vt,color:"text-spotify",x:-20,y:-40,scale:2.5,delay:0,rotation:-5},{icon:"youtube-logo",color:"text-youtube",x:30,y:60,scale:2.2,delay:.2,rotation:5},{icon:wt,color:"text-brand-primary",x:50,y:-50,scale:1.8,delay:.6,rotation:8},{icon:jt,color:"text-brand-accent-pink",x:70,y:10,scale:1.2,delay:.8,rotation:-8},{icon:Nt,color:"text-brand-secondary",x:-40,y:70,scale:1.3,delay:1,rotation:12},{icon:kt,color:"text-brand-accent-pink",x:-80,y:-20,scale:1,delay:1.2,rotation:-15}],o=e?"var(--brand-accent-pink)":"var(--brand-primary)",n=e?"rgba(255, 122, 89, 0.15)":"rgba(255, 122, 89, 0.1)",d=e?"rgba(255, 0, 122, 0.12)":"rgba(255, 0, 122, 0.08)",u=[{color:e?"rgba(255, 122, 89, 0.3)":"rgba(255, 122, 89, 0.25)",size:24},{color:e?"rgba(255, 0, 122, 0.25)":"rgba(255, 0, 122, 0.2)",size:20},{color:e?"rgba(0, 196, 204, 0.25)":"rgba(0, 196, 204, 0.2)",size:22}];return c.jsxs("div",{ref:s,className:"relative min-h-screen overflow-auto perspective-1000",children:[c.jsx("header",{className:"absolute top-0 left-0 w-full z-50 bg-surface-glass/80 backdrop-blur-md border-b border-border-default/30",children:c.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[c.jsxs(Ht.div,{className:"flex items-center",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},children:[c.jsx("div",{className:"mr-3 flex items-center gap-2",children:c.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 36 36",className:"text-brand-primary soundswapp-logo-hero",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"soundswapp-hero-grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--brand-primary)"}),c.jsx("stop",{offset:"35%",stopColor:"var(--brand-accent-pink)"}),c.jsx("stop",{offset:"100%",stopColor:"var(--brand-secondary)"})]}),c.jsxs("filter",{id:"hero-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"blur"}),c.jsx("feOffset",{dy:"1",result:"offsetBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"offsetBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsx("pattern",{id:"hero-bg-pattern",patternUnits:"userSpaceOnUse",width:"10",height:"10",children:c.jsx("path",{d:"M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2",stroke:"rgba(255,255,255,0.03)",strokeWidth:"0.5"})})]}),c.jsx(Ht.circle,{cx:"18",cy:"18",r:"18",fill:"url(#soundswapp-hero-grad)",initial:{opacity:.7},animate:{opacity:.9},transition:{duration:1,repeat:1/0,repeatType:"reverse"}}),c.jsx(Ht.circle,{cx:"18",cy:"18",r:"18",fill:"url(#hero-bg-pattern)",initial:{opacity:.3},animate:{opacity:.5},transition:{duration:1,repeat:1/0,repeatType:"reverse"}}),c.jsxs("g",{filter:"url(#hero-glow)",transform:"translate(0.5, 0.5)",children:[c.jsx(Ht.path,{className:"ss-letter-main-hero",d:"M12.5 23.5 C10 23.5 8.5 21.5 9 19 C9.5 16.5 12.5 15.5 15 15.5 C17.5 15.5 19.5 14 19 11.5 C18.5 9 16.5 7.5 14 7.5",stroke:"white",fill:"none",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:1.2,ease:"easeInOut",delay:.2}}),c.jsx(Ht.path,{className:"ss-letter-highlight-hero",d:"M12.8 23 C10.5 23 9.3 21.3 9.7 19.2 C10.1 17.1 12.8 16.1 15 16.1 C17.2 16.1 18.8 14.7 18.4 12.5 C18.0 10.3 16.2 8.5 14 8.5",stroke:"rgba(255,255,255,0.5)",fill:"none",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.7},transition:{duration:1.2,ease:"easeInOut",delay:.4}}),c.jsx(Ht.path,{className:"ss-letter-main-hero",d:"M23.5 23.5 C26 23.5 27.5 21.5 27 19 C26.5 16.5 23.5 15.5 21 15.5 C18.5 15.5 16.5 14 17 11.5 C17.5 9 19.5 7.5 22 7.5",stroke:"white",fill:"none",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:1.2,ease:"easeInOut",delay:.35}}),c.jsx(Ht.path,{className:"ss-letter-highlight-hero",d:"M23.2 23 C25.5 23 26.7 21.3 26.3 19.2 C25.9 17.1 23.2 16.1 21 16.1 C18.8 16.1 17.2 14.7 17.6 12.5 C18.0 10.3 19.8 8.5 22 8.5",stroke:"rgba(255,255,255,0.5)",fill:"none",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.7},transition:{duration:1.2,ease:"easeInOut",delay:.55}})]})]})}),c.jsx("h1",{className:"text-2xl font-bold",children:c.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-brand-primary via-brand-accent-pink to-brand-secondary",children:"SoundSwapp"})})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsx(Ht.button,{onClick:t,className:Hs("p-2 rounded-full backdrop-blur-md","bg-surface-alt hover:bg-surface-highlight text-content-primary"),whileHover:{scale:1.1},whileTap:{scale:.95},transition:{type:"spring",stiffness:500,damping:15},children:c.jsx(Ht.div,{initial:{rotate:0},animate:{rotate:e?180:0},transition:{type:"spring",stiffness:200,damping:10},className:"text-xl text-content-primary",children:e?"‚òÄÔ∏è":"üåô"})})})]})}),c.jsxs("div",{ref:a,className:Hs("relative min-h-screen overflow-hidden flex flex-col items-center justify-center perspective-1000","bg-background"),children:[c.jsx(Xs,{color:o,density:"high",className:"absolute inset-0"}),c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx(Qs,{color:n,position:{top:"10%",left:"5%"},size:400}),c.jsx(Qs,{color:d,position:{bottom:"10%",right:"5%"},size:350,animationDuration:25}),c.jsx(Js,{count:15,elements:u})]}),c.jsx("div",{ref:r,className:"absolute inset-0 overflow-hidden pointer-events-none",children:i.map(((e,t)=>c.jsx(Ht.div,{className:Hs("absolute text-opacity-20",e.color),initial:{scale:0,opacity:0,rotate:e.rotation},animate:{scale:e.scale,opacity:.15,x:e.x,y:e.y,rotate:e.rotation},transition:{type:"spring",stiffness:60,damping:15,delay:e.delay},style:{left:`calc(50% + ${5*e.x}px)`,top:`calc(50% + ${5*e.y}px)`,transformStyle:"preserve-3d",backfaceVisibility:"hidden"},whileHover:{scale:1.2*e.scale,opacity:.25,transition:{duration:.3}},children:"string"==typeof e.icon?c.jsx("img",{src:"/images/YouTube connection card logo.png",alt:"YouTube",style:{height:40,width:"auto",objectFit:"contain",display:"block"}}):c.jsx(m,{icon:e.icon,className:"text-4xl"})},t)))}),c.jsxs(Ht.div,{className:"relative z-10 flex flex-col items-center justify-center min-h-[60vh] pt-32 pb-16 px-4 text-center",initial:"hidden",animate:"visible",variants:sr,children:[c.jsx(Ht.h1,{className:"mb-4 drop-shadow-lg",variants:rr,children:c.jsx("div",{className:"text-5xl md:text-7xl font-bold leading-tight mb-4",children:c.jsx("span",{style:{background:"var(--soundswapp-gradient)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",display:"inline-block",fontWeight:800,textShadow:"0 0 30px rgba(255,122,89,0.3)"},className:"animated-gradient-text",children:"SoundSwapp"})})}),c.jsx(Ht.div,{className:"mb-6 flex justify-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8},children:c.jsx("svg",{width:"120",height:"32",viewBox:"0 0 120 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsxs("g",{children:[c.jsx(Ht.rect,{x:"0",y:"12",width:"8",height:"8",rx:"4",fill:"var(--brand-accent-purple)",animate:{y:[12,4,12]},transition:{repeat:1/0,duration:1.2,delay:0}}),c.jsx(Ht.rect,{x:"16",y:"8",width:"8",height:"16",rx:"4",fill:"var(--brand-secondary)",animate:{y:[8,0,8]},transition:{repeat:1/0,duration:1.2,delay:.2}}),c.jsx(Ht.rect,{x:"32",y:"4",width:"8",height:"24",rx:"4",fill:"var(--brand-accent-pink)",animate:{y:[4,12,4]},transition:{repeat:1/0,duration:1.2,delay:.4}}),c.jsx(Ht.rect,{x:"48",y:"8",width:"8",height:"16",rx:"4",fill:"var(--brand-primary)",animate:{y:[8,0,8]},transition:{repeat:1/0,duration:1.2,delay:.6}}),c.jsx(Ht.rect,{x:"64",y:"12",width:"8",height:"8",rx:"4",fill:"var(--brand-accent-yellow)",animate:{y:[12,4,12]},transition:{repeat:1/0,duration:1.2,delay:.8}})]})})}),c.jsxs("div",{className:"pointer-events-none select-none",children:[c.jsx(Ht.span,{className:"absolute left-1/4 top-32 text-3xl text-brand-accent-purple opacity-70",animate:{y:[0,-20,0],opacity:[.7,1,.7]},transition:{repeat:1/0,duration:3,delay:.2},children:"üéµ"}),c.jsx(Ht.span,{className:"absolute right-1/4 top-40 text-2xl text-brand-secondary opacity-60",animate:{y:[0,-15,0],opacity:[.6,1,.6]},transition:{repeat:1/0,duration:2.5,delay:.7},children:"üé∂"}),c.jsx(Ht.span,{className:"absolute left-1/3 top-56 text-2xl text-brand-accent-pink opacity-60",animate:{y:[0,-18,0],opacity:[.6,1,.6]},transition:{repeat:1/0,duration:2.8,delay:1.1},children:"üéº"})]}),c.jsx(Ht.h2,{className:"text-2xl md:text-3xl font-medium mb-6 text-content-primary tracking-tight h-[3em] md:h-[2em]",variants:rr,children:c.jsx(Zs,{text:"Seamlessly sync your music across all platforms.",speed:50,cursor:!0})}),c.jsx(Ht.p,{className:"max-w-2xl mx-auto mb-10 text-lg md:text-xl text-content-secondary",variants:rr,children:"Transform playlists between Spotify, YouTube, and more with our intelligent, AI-powered music platform."}),c.jsx(Ht.div,{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",variants:rr,children:c.jsx(ar,{onClick:()=>{var e;return null==(e=document.getElementById("converter"))?void 0:e.scrollIntoView({behavior:"smooth"})},variant:"soundswapp",size:"lg","aria-label":"Get Started",children:"Get Started"})})]})]})]})},or=({children:e,className:t,blurStrength:a=10,hoverScale:s=1.02,gradientOverlay:r=!1,rounded:i="xl",variant:o="default",magneticEffect:n=!1,glowIntensity:d="none"})=>{const{isDark:u}=qt(),[m,h]=l.useState(!1),[x,p]=l.useState({x:0,y:0}),[g,y]=l.useState(!1);l.useEffect((()=>{const e=()=>{const e=window.innerWidth<768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);h(e),e?document.documentElement.classList.add("has-glassmorphic-cards-mobile"):document.documentElement.classList.remove("has-glassmorphic-cards-mobile")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const f=()=>{if("none"===d)return"";const e=(()=>{switch(o){case"primary":return"hsl(var(--button-primary-glow))";case"secondary":return"hsl(var(--button-secondary-glow))";case"vibrant":return"hsl(var(--brand-accent-yellow))";case"spotify":return"var(--spotify-glow-color)";case"youtube":return"var(--youtube-glow-color)";default:return u?"var(--surface-glow-color-dark)":"var(--surface-glow-color-light)"}})();if(u){return{high:`0 0 30px ${e}, 0 0 15px ${e}80`,medium:`0 0 20px ${e}, 0 0 10px ${e}60`,low:`0 0 12px ${e}80`}[d]}return`${{high:"0 0 25px",medium:"0 0 15px",low:"0 0 8px"}[d]} ${e}`},b=m?{backgroundColor:"hsl(var(--surface-card))",boxShadow:"var(--shadow-elevation-medium)",padding:"16px",margin:"0",borderRadius:"12px",border:"1px solid hsl(var(--border-default))",overflow:"hidden"}:{backdropFilter:"default"!==o||u?`blur(${a}px)`:"none",WebkitBackdropFilter:"default"!==o||u?`blur(${a}px)`:"none",backgroundColor:"default"===o?u?"transparent":"var(--surface-card)":"var(--surface-glass)",border:"default"===o?u?"1px solid var(--surface-glass-border-dark, rgba(255,255,255,0.08))":"1px solid var(--border-default)":"1px solid var(--surface-glass-border)",borderRadius:"full"===i?"9999px":`var(--radius-${i}, 0.75rem)`,boxShadow:f()||"var(--shadow-elevation-low)",overflow:"hidden",position:"relative"},v=`rounded-${i}`;return c.jsxs(Ht.div,{className:Hs(v,"overflow-hidden relative glassmorphic-card",t),style:b,whileHover:m?{}:{scale:s,boxShadow:"none"!==d?f():"var(--shadow-elevation-medium)"},animate:n&&g&&!m?{transform:`perspective(1000px) rotateX(${5*-x.y}deg) rotateY(${5*x.x}deg)`}:{transform:"perspective(1000px) rotateX(0deg) rotateY(0deg)"},transition:{type:"spring",stiffness:n?150:300,damping:n?15:20,scale:{duration:.2}},onMouseMove:e=>{if(!n||m)return;const t=e.currentTarget.getBoundingClientRect(),a=(e.clientX-t.left-t.width/2)/(t.width/2),s=(e.clientY-t.top-t.height/2)/(t.height/2);p({x:a,y:s})},onHoverStart:()=>y(!0),onHoverEnd:()=>{y(!1),n&&p({x:0,y:0})},children:[r&&!m&&c.jsx(Ht.div,{className:"absolute inset-0 opacity-20 pointer-events-none -z-10",style:{background:(()=>{switch(o){case"primary":return"linear-gradient(135deg, hsl(var(--brand-primary-light)), hsl(var(--brand-primary)), hsl(var(--brand-primary-dark)))";case"secondary":return"linear-gradient(135deg, hsl(var(--brand-secondary-light)), hsl(var(--brand-secondary)), hsl(var(--brand-secondary-dark)))";case"vibrant":return"var(--brand-gradient-vibrant)";case"spotify":return"linear-gradient(135deg, hsl(var(--brand-accent-green)), hsl(var(--brand-accent-green) / 0.8), hsl(var(--brand-accent-green) / 0.6))";case"youtube":return"linear-gradient(135deg, hsl(var(--youtube-base-color-hsl)), hsl(var(--youtube-base-color-hsl) / 0.8), hsl(var(--youtube-base-color-hsl) / 0.6))";default:return u?"var(--default-card-gradient-dark)":"var(--default-card-gradient-light)"}})(),mixBlendMode:"overlay"},animate:{opacity:g&&"default"!==o?.35:.15},transition:{duration:.3}}),!m&&("primary"===o||"secondary"===o||"vibrant"===o)&&c.jsx(Ht.div,{className:"absolute inset-0 pointer-events-none -z-10",style:{background:"linear-gradient(45deg, transparent 40%, var(--surface-shine-color, rgba(255,255,255,0.1)) 50%, transparent 60%)",backgroundSize:"200% 100%"},animate:{backgroundPosition:g?["0% 0%","200% 0%"]:"0% 0%"},transition:{duration:g?.8:0,ease:"easeOut"}}),c.jsx("div",{className:Hs("relative z-0",{"p-4 md:p-6":!0}),children:e})]})},nr=({isActive:e,message:t="Successfully converted!",duration:a=4e3,onComplete:s})=>{const{width:r,height:i}=h(),{isDark:o}=qt(),[n,d]=l.useState(!1),[u,m]=l.useState(!1);l.useEffect((()=>{if(e){d(!0);const e=setTimeout((()=>{m(!0)}),300),t=setTimeout((()=>{m(!1),d(!1),s&&s()}),a);return()=>{clearTimeout(e),clearTimeout(t)}}d(!1),m(!1)}),[e,a,s]);const p=o?["#8B5CF6","#EC4899","#6EE7B7","#3B82F6","#F87171"]:["#8B5CF6","#EC4899","#10B981","#3B82F6","#F87171"];return c.jsx(Gt,{children:n&&c.jsxs(c.Fragment,{children:[c.jsx(x,{width:r,height:i,recycle:!1,numberOfPieces:200,gravity:.15,colors:p,tweenDuration:5e3}),u&&c.jsx(Ht.div,{initial:{opacity:0,scale:.8,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},className:"fixed top-1/4 left-1/2 transform -translate-x-1/2 z-50",children:c.jsx("div",{className:"px-8 py-4 rounded-xl shadow-xl "+(o?"bg-gray-800 text-white":"bg-white text-gray-800"),children:c.jsxs(Ht.div,{initial:{scale:.8},animate:{scale:[.8,1.2,1],rotate:[-5,5,0]},transition:{duration:.6},className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-2",children:"üéâ"}),c.jsx("h3",{className:"text-xl font-bold mb-1",children:t}),c.jsx("p",{className:o?"text-gray-300":"text-gray-600",children:"Your playlist is ready to use!"})]})})})]})})},lr=Object.freeze(Object.defineProperty({__proto__:null,SuccessCelebration:nr},Symbol.toStringTag,{value:"Module"})),cr={success:{icon:p,lightStyles:{bg:"bg-green-50",border:"border-l-4 border-green-500",iconColor:"text-green-500",title:"text-green-800",message:"text-green-700"},darkStyles:{bg:"bg-green-900/30",border:"border-l-4 border-green-500",iconColor:"text-green-400",title:"text-green-300",message:"text-green-400"}},error:{icon:g,lightStyles:{bg:"bg-red-50",border:"border-l-4 border-red-500",iconColor:"text-red-500",title:"text-red-800",message:"text-red-700"},darkStyles:{bg:"bg-red-900/30",border:"border-l-4 border-red-500",iconColor:"text-red-400",title:"text-red-300",message:"text-red-400"}},warning:{icon:y,lightStyles:{bg:"bg-yellow-50",border:"border-l-4 border-yellow-500",iconColor:"text-yellow-500",title:"text-yellow-800",message:"text-yellow-700"},darkStyles:{bg:"bg-yellow-900/30",border:"border-l-4 border-yellow-500",iconColor:"text-yellow-400",title:"text-yellow-300",message:"text-yellow-400"}},info:{icon:f,lightStyles:{bg:"bg-blue-50",border:"border-l-4 border-blue-500",iconColor:"text-blue-500",title:"text-blue-800",message:"text-blue-700"},darkStyles:{bg:"bg-blue-900/30",border:"border-l-4 border-blue-500",iconColor:"text-blue-400",title:"text-blue-300",message:"text-blue-400"}}},dr=l.forwardRef((({toast:e,onDismiss:t},a)=>{const{isDark:s}=qt(),{type:r,message:i,title:o,id:n,actionLabel:l,onAction:d,duration:m=5e3}=e,h=cr[r],x=s?h.darkStyles:h.lightStyles,[y,f]=u.useState(!1),[b,v]=u.useState(100),w=u.useRef(100),j=u.useRef(null),N=u.useRef(Date.now()),k=u.useRef(m),[S,T]=u.useState(null),[C,E]=u.useState(0);u.useEffect((()=>y?(j.current&&clearInterval(j.current),void(k.current=k.current-(Date.now()-N.current))):(N.current=Date.now(),j.current=setInterval((()=>{const e=Date.now()-N.current,a=Math.max(0,100-100*(m-k.current+e)/m);v(a),w.current=a,a<=0&&t(n)}),50),()=>{j.current&&clearInterval(j.current)})),[y,m,n,t]);return c.jsxs(Ht.div,{ref:a,layout:!0,initial:{opacity:0,y:40,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:40,scale:.95,transition:{duration:.2}},className:Hs("p-4 rounded-lg shadow-lg max-w-md w-full backdrop-blur-sm relative",x.bg,x.border,"select-none","transition-all duration-200","focus-within:ring-2 focus-within:ring-purple-400","outline-none","z-[1000]","mobile:py-6 mobile:px-5"),role:"alert","aria-live":"assertive",tabIndex:0,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onFocus:()=>f(!0),onBlur:()=>f(!1),onTouchStart:e=>{T(e.touches[0].clientX)},onTouchMove:e=>{null!==S&&E(e.touches[0].clientX-S)},onTouchEnd:()=>{Math.abs(C)>80&&t(n),T(null),E(0)},style:{transform:`translateX(${C}px)`},children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:Hs("flex-shrink-0 w-6 h-6 mt-0.5 text-xl",x.iconColor),children:c.jsx(p,{className:"h-5 w-5 bg-gradient-to-r from-green-400 to-red-500 text-transparent bg-clip-text"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[o&&c.jsx("h3",{className:Hs("text-sm font-medium mb-1",x.title),children:o}),c.jsx("p",{className:Hs("text-sm break-words",x.message),children:i}),l&&d&&c.jsx("button",{onClick:()=>{d(),t(n)},className:Hs("mt-2 text-xs font-medium rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 px-2 py-1","success"===r?"text-green-600 dark:text-green-400":"error"===r?"text-red-600 dark:text-red-400":"warning"===r?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"),tabIndex:0,children:l})]}),c.jsx("button",{onClick:()=>t(n),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 p-2","aria-label":"Close notification",tabIndex:0,children:c.jsx(g,{className:"h-4 w-4"})})]}),c.jsx(Ht.div,{className:Hs("h-0.5 absolute bottom-0 left-0 right-0","success"===r?"bg-green-500":"error"===r?"bg-red-500":"warning"===r?"bg-yellow-500":"bg-blue-500"),initial:{width:"100%"},animate:{width:y?`${b}%`:0},transition:{duration:y?0:b/100*(m/1e3),ease:"linear"}})]})}));dr.displayName="ToastItem";const ur=({toasts:e,onDismiss:t,position:a="bottom-right"})=>c.jsx("div",{className:`fixed z-[1000] flex flex-col gap-2 max-w-full w-full pointer-events-none ${{"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 -translate-x-1/2","bottom-center":"bottom-4 left-1/2 -translate-x-1/2"}[a]}`,style:{maxWidth:"100vw"},"aria-live":"polite","aria-atomic":"true",children:c.jsx(Gt,{mode:"popLayout",children:e.map((e=>c.jsx(dr,{toast:e,onDismiss:t},e.id)))})}),mr=l.forwardRef((({children:e,className:t,rounded:a="lg",shadow:s="lg",blur:r="md",border:i=!0,intensity:o="medium",onClick:n,animate:l=!1,hoverEffect:d=!0},u)=>{const m={ref:u,className:Hs("transition-all duration-300",{none:"",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl","3xl":"rounded-3xl",full:"rounded-full"}[a],{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl","2xl":"shadow-2xl"}[s],{none:"",sm:"backdrop-blur-sm",md:"backdrop-blur-md",lg:"backdrop-blur-lg",xl:"backdrop-blur-xl"}[r],{light:"bg-white/30 dark:bg-gray-900/30",medium:"bg-white/40 dark:bg-gray-900/40",heavy:"bg-white/50 dark:bg-gray-900/50"}[o],i?"border border-white/20 dark:border-gray-700/20":"",d&&"hover:bg-opacity-[0.45] dark:hover:bg-opacity-[0.45]","focus:outline-none focus:ring-2 focus:ring-purple-500/50",t),onClick:n};return l?c.jsx(Ht.div,{...m,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e}):c.jsx("div",{...m,children:e})}));mr.displayName="GlassmorphicContainer",St.register(Tt,Ct,Et,Pt,At,_t,It,Rt,Lt);const hr={animate:{transition:{staggerChildren:.1}}},xr={whileHover:{scale:1.05,y:-2},whileTap:{scale:.98}},pr=e=>({listeningTime:Math.round(e.totalDuration/36e5),avgTracksPerArtist:e.uniqueArtists?Math.round(e.totalTracks/e.uniqueArtists):0,diversityScore:e.totalTracks>0?Math.min(100,Math.round(e.genres.length/e.totalTracks*100)):0,vintageScore:e.releaseYears?Math.round(Object.entries(e.releaseYears).filter((([e])=>parseInt(e)<2e3)).reduce(((e,[t,a])=>e+a),0)/e.totalTracks*100):0}),gr=({icon:e,title:t,value:a,subtitle:s,color:r="purple",trend:i,onClick:o,gradient:n=!0})=>{const l={purple:"from-purple-500 to-pink-500",blue:"from-blue-500 to-cyan-500",green:"from-green-500 to-teal-500",red:"from-red-500 to-orange-500",yellow:"from-yellow-500 to-orange-500",indigo:"from-indigo-500 to-purple-500"};return c.jsxs(Ht.div,{...xr,onClick:o,className:`relative overflow-hidden rounded-xl border backdrop-blur-sm cursor-pointer\n        ${n?"bg-gradient-to-br from-white/80 to-white/40 dark:from-gray-800/80 dark:to-gray-900/40":"bg-white/60 dark:bg-gray-800/60"}\n        ${{purple:"bg-purple-500/10 border-purple-500/20",blue:"bg-blue-500/10 border-blue-500/20",green:"bg-green-500/10 border-green-500/20",red:"bg-red-500/10 border-red-500/20",yellow:"bg-yellow-500/10 border-yellow-500/20",indigo:"bg-indigo-500/10 border-indigo-500/20"}[r]} shadow-lg hover:shadow-xl transition-all duration-300`,children:[c.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${l[r]} opacity-0 hover:opacity-5 transition-opacity duration-300`}),c.jsx("div",{className:"relative p-6",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${l[r]} text-white shadow-md`,children:c.jsx(e,{size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t}),i&&c.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[c.jsx(k,{size:12,className:"text-green-500"}),c.jsx("span",{className:"text-xs text-green-500 font-medium",children:i})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ht.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2},className:"text-2xl font-bold text-gray-900 dark:text-white",children:a}),s&&c.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s})]})]})})})]})},yr=({className:e="",size:t=36})=>c.jsxs("svg",{width:t,height:t,viewBox:"0 0 36 36",fill:"currentColor",className:e,children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"soundswapp-grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--brand-primary)"}),c.jsx("stop",{offset:"35%",stopColor:"var(--brand-accent-pink)"}),c.jsx("stop",{offset:"100%",stopColor:"var(--brand-secondary)"})]}),c.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"1.8",result:"blur"}),c.jsx("feOffset",{dy:"1",result:"offsetBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"offsetBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsx("pattern",{id:"bg-pattern",patternUnits:"userSpaceOnUse",width:"10",height:"10",children:c.jsx("path",{d:"M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2",stroke:"rgba(255,255,255,0.03)",strokeWidth:"0.5"})})]}),c.jsx("circle",{cx:"18",cy:"18",r:"18",fill:"url(#soundswapp-grad)",opacity:"0.9"}),c.jsx("circle",{cx:"18",cy:"18",r:"18",fill:"url(#bg-pattern)",opacity:"0.5"}),c.jsxs("g",{filter:"url(#glow)",transform:"translate(0.5, 0.5)",children:[c.jsx("path",{className:"ss-letter-main",d:"M12.5 23.5 C10 23.5 8.5 21.5 9 19 C9.5 16.5 12.5 15.5 15 15.5 C17.5 15.5 19.5 14 19 11.5 C18.5 9 16.5 7.5 14 7.5",stroke:"white",fill:"none",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{className:"ss-letter-highlight",d:"M12.8 23 C10.5 23 9.3 21.3 9.7 19.2 C10.1 17.1 12.8 16.1 15 16.1 C17.2 16.1 18.8 14.7 18.4 12.5 C18.0 10.3 16.2 8.5 14 8.5",stroke:"rgba(255,255,255,0.5)",fill:"none",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{className:"ss-letter-main",d:"M23.5 23.5 C26 23.5 27.5 21.5 27 19 C26.5 16.5 23.5 15.5 21 15.5 C18.5 15.5 16.5 14 17 11.5 C17.5 9 19.5 7.5 22 7.5",stroke:"white",fill:"none",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{className:"ss-letter-highlight",d:"M23.2 23 C25.5 23 26.7 21.3 26.3 19.2 C25.9 17.1 23.2 16.1 21 16.1 C18.8 16.1 17.2 14.7 17.6 12.5 C18.0 10.3 19.8 8.5 22 8.5",stroke:"rgba(255,255,255,0.5)",fill:"none",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),fr={responsive:!0,maintainAspectRatio:!1,animation:{duration:1e3,easing:"easeInOutQuart"},plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,color:"rgb(156, 163, 175)",font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleFont:{size:14,weight:"bold"},bodyFont:{size:13},padding:12,cornerRadius:8,callbacks:{label:function(e){const t=e.raw,a=(t/e.dataset.data.reduce(((e,t)=>e+t),0)*100).toFixed(1);return`${e.label}: ${t} (${a}%)`}}},datalabels:{color:"#fff",font:{weight:"bold",size:12},formatter:(e,t)=>`${(e/t.dataset.data.reduce(((e,t)=>e+t),0)*100).toFixed(1)}%`}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(156, 163, 175, 0.1)"},ticks:{color:"rgb(156, 163, 175)",font:{size:12}}},x:{grid:{display:!1},ticks:{color:"rgb(156, 163, 175)",font:{size:12}}}}},br=e=>{var t,a,s;return{labels:["< 3 min","3-5 min","> 5 min"],datasets:[{data:[(null==(t=e.durationCategories)?void 0:t.short)||0,(null==(a=e.durationCategories)?void 0:a.medium)||0,(null==(s=e.durationCategories)?void 0:s.long)||0],backgroundColor:["rgba(147, 51, 234, 0.7)","rgba(59, 130, 246, 0.7)","rgba(236, 72, 153, 0.7)"],borderColor:["rgb(147, 51, 234)","rgb(59, 130, 246)","rgb(236, 72, 153)"],borderWidth:2}]}},vr=e=>{var t,a,s;return{labels:["Low (0-33)","Medium (34-66)","High (67-100)"],datasets:[{data:[(null==(t=e.popularityRanges)?void 0:t.low)||0,(null==(a=e.popularityRanges)?void 0:a.medium)||0,(null==(s=e.popularityRanges)?void 0:s.high)||0],backgroundColor:["rgba(239, 68, 68, 0.7)","rgba(245, 158, 11, 0.7)","rgba(34, 197, 94, 0.7)"],borderColor:["rgb(239, 68, 68)","rgb(245, 158, 11)","rgb(34, 197, 94)"],borderWidth:2}]}},wr=e=>{const t=Object.keys(e.releaseYears).sort(),a=t.map((t=>e.releaseYears[t])),s=a.reduce(((e,t)=>e+t),0);return a.map((e=>(e/s*100).toFixed(1))),{labels:t,datasets:[{label:"Tracks by Year",data:a,borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",borderWidth:2,tension:.3,fill:!0,pointBackgroundColor:"rgb(147, 51, 234)",pointBorderColor:"#fff",pointHoverRadius:6,pointHoverBackgroundColor:"rgb(147, 51, 234)",pointHoverBorderColor:"#fff"}]}};function jr(e){return!(!e||0===e.length)&&e.every((e=>!(0!==e.duration_ms&&void 0!==e.duration_ms||0!==e.popularity&&void 0!==e.popularity)))}function Nr(e){return!(!e||0===e.length)&&e.some((e=>(e.duration_ms??0)>0&&e.releaseYear))}function kr(e){return null==e||0===e?"N/A":`${e} mins`}function Sr(e){return null==e||0===e?"N/A":e}function Tr(e){return null==e||0===e?"N/A":`${e}%`}const Cr=function({stats:e,tracks:t}){var a,s,r,i,o,n;const[d,u]=l.useState("overview");l.useState(!1);const[m,h]=l.useState("popularity"),[x,p]=l.useState(null),g=pr(e),y=jr(t);return Nr(t),c.jsxs(mr,{className:"max-w-7xl mx-auto p-6 space-y-8",rounded:"xl",children:[c.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx(yr,{size:48,className:"text-purple-500"}),y&&c.jsx("a",{href:"https://www.youtube.com/",target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",style:{display:"inline-block",padding:"8px"},children:c.jsx("img",{src:"/images/yt_logo_rgb_dark.png",alt:"YouTube",style:{height:32,minHeight:20,maxHeight:40,width:"auto",objectFit:"contain",minWidth:"32px"}})}),c.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[var(--brand-primary)] to-[var(--brand-accent-pink)] bg-clip-text text-transparent",children:"Playlist Insights"})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Discover the hidden patterns and stories within your music collection with advanced analytics and beautiful visualizations."})]}),c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex justify-center",children:c.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl max-w-full overflow-x-auto hide-scrollbar",children:[{key:"overview",label:"Overview",icon:w},{key:"genres",label:"Genres",icon:j},{key:"artists",label:"Artists",icon:N},{key:"trends",label:"Trends",icon:k},{key:"musicTaste",label:"Music Taste",icon:S}].map((({key:e,label:t,icon:a})=>c.jsxs(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(e),className:"flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all whitespace-nowrap min-w-0 flex-shrink-0 "+(d===e?"bg-gradient-to-r from-orange-500 to-pink-500 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-200/60 dark:border-gray-600/60 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600"),children:[c.jsx(a,{size:14}),c.jsx("span",{className:"text-xs font-medium",children:t})]},e)))})}),c.jsxs(Gt,{mode:"wait",children:["overview"===d&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-8",children:[c.jsxs(Ht.div,{variants:hr,initial:"initial",animate:"animate",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(gr,{icon:T,title:"Total Tracks",value:Sr(e.totalTracks),subtitle:`${Sr(e.uniqueArtists)} unique artists`,color:"purple",trend:void 0}),c.jsx(gr,{icon:C,title:"Total Duration",value:kr(e.totalDuration),color:"blue",subtitle:0===e.totalDuration?"Data not available":void 0}),c.jsx(gr,{icon:E,title:"Avg. Popularity",value:Sr(Math.round(e.avgPopularity)),subtitle:0===e.avgPopularity?"Data not available":"Out of 100",color:"red"}),c.jsx(gr,{icon:P,title:"Diversity Score",value:Tr(g.diversityScore),subtitle:0===g.diversityScore?"Data not available":"Genre variety index",color:"green"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx("span",{children:"Playlist Analysis"}),c.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>p((e=>e?null:{x:0,y:0,content:"Click on different metrics to explore your playlist data in detail."})),children:c.jsx(f,{size:16})})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h("popularity"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("popularity"===m?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Popularity"}),c.jsx(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h("duration"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("duration"===m?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Duration"}),c.jsx(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h("release"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("release"===m?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Release Year"})]})]}),y?c.jsx("div",{className:"text-center text-gray-500 my-8",children:"Popularity and duration insights are not available for YouTube playlists due to API limitations."}):c.jsx("div",{className:"h-80 relative",children:c.jsxs(Gt,{mode:"wait",children:["popularity"===m&&c.jsx(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"h-full",children:c.jsx(_,{options:{...fr,plugins:{...fr.plugins,title:{display:!0,text:"Track Popularity Distribution",color:"rgb(107, 114, 128)",font:{size:16,weight:"bold"}}}},data:vr(e)})},"popularity"),"duration"===m&&c.jsx(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"h-full",children:c.jsx(I,{options:{...fr,plugins:{...fr.plugins,title:{display:!0,text:"Track Duration Distribution",color:"rgb(107, 114, 128)",font:{size:16,weight:"bold"}}}},data:br(e)})},"duration"),"release"===m&&c.jsx(Ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"h-full",children:c.jsx(R,{options:{...fr,plugins:{...fr.plugins,title:{display:!0,text:"Tracks by Release Year",color:"rgb(107, 114, 128)",font:{size:16,weight:"bold"}}}},data:wr(e)})},"release")]})})]})]},"overview"),"genres"===d&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:c.jsxs(mr,{className:"bg-gradient-to-br from-white/80 to-white/40 dark:from-gray-800/80 dark:to-gray-900/40 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(j,{className:"text-purple-500",size:20}),"Genre Distribution"]}),c.jsx("div",{className:"space-y-4",children:e.genres.map(((t,a)=>{const s=Math.round(t.count/(e.totalGenreMentions||e.totalTracks)*100);return c.jsxs(mr,{className:"group",rounded:"xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:t.color}}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm text-gray-500",children:[t.count," tracks"]}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s,"%"]})]})]}),c.jsx("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:c.jsx(Ht.div,{initial:{width:0},animate:{width:`${s}%`},transition:{duration:1,delay:.1*a},className:"h-full rounded-full",style:{backgroundColor:t.color}})})]})}))})]})},"genres"),"artists"===d&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:c.jsxs(mr,{className:"p-6",rounded:"xl",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(N,{className:"text-purple-500",size:20}),"Top Artists"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.topArtists.map(((t,a)=>c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"group relative",children:c.jsxs("div",{className:"flex items-center p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-all duration-300",children:[c.jsxs("div",{className:"relative w-16 h-16 rounded-full overflow-hidden border-2 border-white/20 shadow-xl",children:[t.image?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 animate-pulse"}),c.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-300 relative z-10",loading:"lazy",onLoad:e=>{const t=e.target;t.previousElementSibling&&t.previousElementSibling.remove()},onError:e=>{const a=e.target;if(a.style.display="none",a.previousElementSibling&&a.previousElementSibling.remove(),a.parentElement){a.parentElement.classList.add("bg-gradient-to-br","from-purple-500/10","to-pink-500/10");const e=document.createElement("div");e.className="w-full h-full flex items-center justify-center",e.innerHTML=`<span class="text-2xl font-bold text-purple-500/70">${t.name.charAt(0).toUpperCase()}</span>`,a.parentElement.appendChild(e)}}})]}):c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500/10 to-pink-500/10 flex items-center justify-center",children:c.jsx("span",{className:"text-2xl font-bold text-purple-500/70",children:t.name.charAt(0).toUpperCase()})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),c.jsxs("div",{className:"flex-1 min-w-0 ml-4",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate group-hover:text-purple-500 transition-colors",children:t.name}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:c.jsx(Ht.div,{initial:{width:0},animate:{width:t.count/e.totalTracks*100+"%"},transition:{duration:1,delay:.1*a},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"})})}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap",children:[t.count," ",1===t.count?"track":"tracks"]})]}),void 0!==t.popularity&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(E,{size:14,className:"text-orange-500"}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Popularity: ",t.popularity]})]})]})]})},a)))})]})},"artists"),"trends"===d&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:c.jsxs(mr,{className:"bg-gradient-to-br from-white/80 to-white/40 dark:from-gray-800/80 dark:to-gray-900/40 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(k,{className:"text-green-500",size:20}),"Listening Trends & Patterns"]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(E,{className:"text-red-500",size:18}),"Popularity Distribution"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-red-500",children:(null==(a=e.popularityRanges)?void 0:a.low)||0}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Underground"}),c.jsx("div",{className:"text-xs text-gray-500",children:"(0-33)"})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-orange-500",children:(null==(s=e.popularityRanges)?void 0:s.medium)||0}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Balanced"}),c.jsx("div",{className:"text-xs text-gray-500",children:"(34-66)"})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-500",children:(null==(r=e.popularityRanges)?void 0:r.high)||0}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mainstream"}),c.jsx("div",{className:"text-xs text-gray-500",children:"(67-100)"})]})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(C,{className:"text-blue-500",size:18}),"Track Length Preferences"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-500",children:(null==(i=e.durationCategories)?void 0:i.short)||0}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Short Tracks"}),c.jsx("div",{className:"text-xs text-gray-500",children:"< 3 minutes"})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-500",children:(null==(o=e.durationCategories)?void 0:o.medium)||0}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Standard"}),c.jsx("div",{className:"text-xs text-gray-500",children:"3-5 minutes"})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-pink-500",children:(null==(n=e.durationCategories)?void 0:n.long)||0}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Extended"}),c.jsx("div",{className:"text-xs text-gray-500",children:"> 5 minutes"})]})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(j,{className:"text-purple-500",size:18}),"Genre Distribution"]}),c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4",children:c.jsx("div",{className:"space-y-3",children:e.genres.slice(0,5).map(((t,a)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.count," tracks"]}),c.jsxs("span",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400",children:[Math.round(t.count/e.totalTracks*100),"%"]})]})]},a)))})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(N,{className:"text-indigo-500",size:18}),"Artist Concentration"]}),c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-4",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Total Artists:"}),c.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:e.uniqueArtists})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Avg. Tracks per Artist:"}),c.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:e.uniqueArtists?Math.round(e.totalTracks/e.uniqueArtists):0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Diversity Score:"}),c.jsxs("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:[g.diversityScore,"%"]})]})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(L,{className:"text-teal-500",size:18}),"Key Insights"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx(F,{className:"text-teal-500",size:16}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Listening Time"})]}),c.jsxs("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:[Math.round(e.totalDuration/36e5),"h ",Math.round(e.totalDuration%36e5/6e4),"m"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total playlist duration"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx(M,{className:"text-yellow-500",size:16}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Average Rating"})]}),c.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[Math.round(e.avgPopularity),"/100"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Track popularity score"})]})]})]})]})]})},"trends"),"musicTaste"===d&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:c.jsxs(mr,{className:"bg-gradient-to-br from-white/80 to-white/40 dark:from-gray-800/80 dark:to-gray-900/40 backdrop-blur-sm rounded-xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(S,{className:"text-red-500",size:20}),"Music Taste Analysis"]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(A,{className:"text-purple-500",size:18}),"Your Musical Identity"]}),c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4",children:c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e.genres&&e.genres.length>0?c.jsxs(c.Fragment,{children:["Your playlist reveals a strong affinity for ",c.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:e.genres[0].name})," music, with ",e.genres.length>1&&c.jsx("span",{className:"font-semibold",children:e.genres[1].name})," as your secondary preference. You tend to enjoy ",e.avgPopularity>70?"highly popular, mainstream":e.avgPopularity>40?"moderately popular, balanced":"underground, niche"," tracks."]}):"Your musical taste shows diverse preferences across multiple genres."})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(D,{className:"text-blue-500",size:18}),"Listening Patterns"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx(C,{className:"text-blue-500",size:16}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Track Length Preference"})]}),c.jsx("div",{className:"space-y-2",children:(()=>{var t,a,s;const r=(null==(t=e.durationCategories)?void 0:t.short)||0,i=(null==(a=e.durationCategories)?void 0:a.medium)||0,o=(null==(s=e.durationCategories)?void 0:s.long)||0;if(0===r+i+o)return c.jsx("span",{className:"text-gray-500",children:"Data not available"});const n=r>i&&r>o?"Short tracks (under 3 min)":o>i&&o>r?"Extended tracks (over 5 min)":"Standard length (3-5 min)";return c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["You prefer ",c.jsx("span",{className:"font-semibold",children:n})]})})()})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx(k,{className:"text-green-500",size:16}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Popularity Range"})]}),c.jsx("div",{className:"space-y-2",children:(()=>{var t,a,s;const r=(null==(t=e.popularityRanges)?void 0:t.low)||0,i=(null==(a=e.popularityRanges)?void 0:a.medium)||0,o=(null==(s=e.popularityRanges)?void 0:s.high)||0;if(0===r+i+o)return c.jsx("span",{className:"text-gray-500",children:"Data not available"});const n=o>i&&o>r?"Mainstream hits":r>i&&r>o?"Underground gems":"Balanced mix";return c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["You enjoy ",c.jsx("span",{className:"font-semibold",children:n})]})})()})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(U,{className:"text-orange-500",size:18}),"Musical Era Preferences"]}),c.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-lg p-4",children:(()=>{if(!e.releaseYears||0===Object.keys(e.releaseYears).length)return c.jsx("span",{className:"text-gray-500",children:"Release year data not available"});const t=Object.keys(e.releaseYears).map(Number).sort(),a=t.filter((e=>e>=2020)).length,s=t.filter((e=>e>=2010&&e<2020)).length,r=t.filter((e=>e>=2e3&&e<2010)).length,i=t.filter((e=>e<2e3)).length,o=a>s&&a>r&&a>i?"contemporary (2020s)":s>a&&s>r&&s>i?"modern (2010s)":r>a&&r>s&&r>i?"classic (2000s)":"vintage (pre-2000)";return c.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["You gravitate toward ",c.jsx("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:o})," music, showing appreciation for ",i>0?"both timeless classics and contemporary hits":"current trends and recent releases","."]})})()})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(N,{className:"text-indigo-500",size:18}),"Artist Diversity"]}),c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-4",children:(()=>{const e=g.diversityScore,t=g.avgTracksPerArtist;let a="Low",s="You tend to stick with familiar artists";return e>60?(a="High",s="You explore a wide variety of artists"):e>30&&(a="Moderate",s="You balance favorites with new discoveries"),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Diversity Level:"}),c.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:a})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Avg. tracks per artist:"}),c.jsx("span",{className:"font-medium",children:t||"N/A"})]})]})})()})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Y,{className:"text-yellow-500",size:18}),"Discover More"]}),c.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg p-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:"Based on your taste, you might enjoy:"}),c.jsx("div",{className:"space-y-2",children:(()=>{var t,a;const s=[];return e.genres&&e.genres.length>0&&s.push(`More ${e.genres[0].name} artists`),e.avgPopularity<50?s.push("Underground and indie discoveries"):e.avgPopularity>70&&s.push("Chart-topping hits and trending tracks"),(null==(t=e.durationCategories)?void 0:t.long)&&(null==(a=e.durationCategories)?void 0:a.short)&&e.durationCategories.long>e.durationCategories.short&&s.push("Extended mixes and live performances"),0===s.length&&s.push("Exploring new genres and artists"),c.jsx("ul",{className:"space-y-1",children:s.map(((e,t)=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full"}),c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e})]},t)))})})()})]})]})]})]})},"musicTaste")]}),c.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-12 text-center",children:[c.jsx(yr,{size:24,className:"mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Powered by SoundSwapp Analytics"})]})]})};function Er({stats:e,tracks:t}){var a;const[s,r]=l.useState("overview"),i=b(),o=pr(e),n=jr(t);Nr(t);const d=({icon:e,title:t,value:a,subtitle:s,color:r="purple",onClick:i})=>{const o={purple:{bg:"bg-gradient-to-br from-purple-500/10 to-pink-500/10",icon:"from-purple-500 to-pink-500",text:"text-purple-600 dark:text-purple-400",border:"border-purple-500/20"},blue:{bg:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10",icon:"from-blue-500 to-cyan-500",text:"text-blue-600 dark:text-blue-400",border:"border-blue-500/20"},green:{bg:"bg-gradient-to-br from-green-500/10 to-teal-500/10",icon:"from-green-500 to-teal-500",text:"text-green-600 dark:text-green-400",border:"border-green-500/20"},red:{bg:"bg-gradient-to-br from-red-500/10 to-orange-500/10",icon:"from-red-500 to-orange-500",text:"text-red-600 dark:text-red-400",border:"border-red-500/20"},yellow:{bg:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10",icon:"from-yellow-500 to-orange-500",text:"text-yellow-600 dark:text-yellow-400",border:"border-yellow-500/20"},indigo:{bg:"bg-gradient-to-br from-indigo-500/10 to-purple-500/10",icon:"from-indigo-500 to-purple-500",text:"text-indigo-600 dark:text-indigo-400",border:"border-indigo-500/20"}}[r];return c.jsxs(Ht.div,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:i,className:`relative overflow-hidden rounded-xl border backdrop-blur-sm cursor-pointer ${o.bg} ${o.border} shadow-lg hover:shadow-xl transition-all duration-300`,children:[c.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${o.icon} opacity-0 hover:opacity-5 transition-opacity duration-300`}),c.jsxs("div",{className:"relative p-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-r ${o.icon} text-white shadow-md`,children:c.jsx(e,{size:18})}),c.jsx("div",{className:"flex-1",children:c.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t})})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ht.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2},className:`text-xl font-bold ${o.text}`,children:a}),s&&c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s})]})]})]})};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 font-sf-pro",children:[c.jsx(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-b border-gray-200/50 dark:border-gray-700/50 shadow-sm",children:c.jsx("div",{className:"flex items-center justify-between px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(-1),className:"p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:c.jsx(v,{size:20})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"soundswapp-logo",children:c.jsx(yr,{size:32})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-sf-pro-display font-bold text-gray-900 dark:text-white",children:"Playlist Insights"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-sf-pro-text",children:(null==(a=t[0])?void 0:a.playlistName)||"Playlist Analysis"})]})]})]})})}),c.jsxs("div",{className:"px-4 py-6 space-y-6",children:[c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center space-y-4",children:[c.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:n&&c.jsx("div",{className:"p-2 rounded-xl bg-white shadow-md",children:c.jsx("img",{src:"/images/yt_logo_rgb_dark.png",alt:"YouTube",className:"h-6 w-auto object-contain"})})}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-sf-pro-text max-w-sm mx-auto",children:"Discover the hidden patterns and stories within your music collection with advanced analytics and beautiful visualizations."})]}),c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex justify-center px-2",children:c.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl max-w-full overflow-x-auto hide-scrollbar",children:[{key:"overview",label:"Overview",icon:w},{key:"genres",label:"Genres",icon:j},{key:"artists",label:"Artists",icon:N},{key:"trends",label:"Trends",icon:k},{key:"musicTaste",label:"Music Taste",icon:S}].map((({key:e,label:t,icon:a})=>c.jsxs(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(e),className:"flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all whitespace-nowrap min-w-0 flex-shrink-0 "+(s===e?"bg-gradient-to-r from-orange-500 to-pink-500 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-200/60 dark:border-gray-600/60 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600"),children:[c.jsx(a,{size:14}),c.jsx("span",{className:"text-xs font-medium",children:t})]},e)))})}),c.jsxs(Gt,{mode:"wait",children:["overview"===s&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-6",children:[c.jsxs(Ht.div,{variants:hr,initial:"initial",animate:"animate",className:"grid grid-cols-2 gap-4",children:[c.jsx(d,{icon:T,title:"Total Tracks",value:Sr(e.totalTracks),subtitle:`${Sr(e.uniqueArtists)} unique artists`,color:"purple"}),c.jsx(d,{icon:C,title:"Total Duration",value:kr(e.totalDuration),color:"blue"}),c.jsx(d,{icon:E,title:"Avg. Popularity",value:Sr(Math.round(e.avgPopularity)),subtitle:"Out of 100",color:"red"}),c.jsx(d,{icon:P,title:"Diversity Score",value:Tr(o.diversityScore),subtitle:"Genre variety index",color:"green"})]}),c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-lg font-sf-pro-display font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(A,{className:"text-purple-500",size:20}),"Quick Insights"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Listening Time"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white font-sf-pro-display",children:[Math.round(e.totalDuration/36e5),"h ",Math.round(e.totalDuration%36e5/6e4),"m"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Top Genre"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white font-sf-pro-display",children:e.genres&&e.genres.length>0?e.genres[0].name:"N/A"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. Tracks/Artist"}),c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white font-sf-pro-display",children:e.uniqueArtists?Math.round(e.totalTracks/e.uniqueArtists):"N/A"})]})]})]})]},"overview"),"genres"===s&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-4",children:c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-lg font-sf-pro-display font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(j,{className:"text-purple-500",size:20}),"Genre Distribution"]}),c.jsx("div",{className:"space-y-3",children:e.genres.map(((t,a)=>{const s=Math.round(t.count/(e.totalGenreMentions||e.totalTracks)*100);return c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:t.color}}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:[t.count," tracks"]}),c.jsxs("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:[s,"%"]})]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:c.jsx(Ht.div,{initial:{width:0},animate:{width:`${s}%`},transition:{delay:.1*a+.2,duration:.5},className:"h-2 rounded-full shadow-sm",style:{backgroundColor:t.color}})})]},t.name)}))})]})},"genres"),"artists"===s&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-4",children:c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-lg font-sf-pro-display font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(N,{className:"text-purple-500",size:20}),"Top Artists"]}),c.jsx("div",{className:"space-y-3",children:e.topArtists.map(((t,a)=>c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"flex items-center p-3 bg-gray-50/80 dark:bg-gray-700/50 rounded-xl backdrop-blur-sm",children:[c.jsx("div",{className:"relative w-12 h-12 rounded-full overflow-hidden border-2 border-white/20 shadow-md",children:t.image?c.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover",loading:"lazy"}):c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500/10 to-pink-500/10 flex items-center justify-center",children:c.jsx("span",{className:"text-lg font-bold text-purple-500/70 font-sf-pro-display",children:t.name.charAt(0).toUpperCase()})})}),c.jsxs("div",{className:"flex-1 ml-3",children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.count," tracks"]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Math.round(t.count/e.totalTracks*100),"%"]})})]},a)))})]})},"artists"),"trends"===s&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-4",children:c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-lg font-sf-pro-display font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(k,{className:"text-green-500",size:20}),"Listening Trends"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Popularity Distribution"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{label:"High",range:"80-100",count:Math.round(.3*e.avgPopularity)},{label:"Medium",range:"40-79",count:Math.round(.5*e.avgPopularity)},{label:"Low",range:"0-39",count:Math.round(.2*e.avgPopularity)}].map(((e,t)=>c.jsxs("div",{className:"text-center p-3 bg-gray-50/80 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.count}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.label}),c.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.range})]},e.label)))})]}),e.releaseYears&&Object.keys(e.releaseYears).length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Release Year Trends"}),c.jsx("div",{className:"space-y-2",children:Object.entries(e.releaseYears).sort((([e],[t])=>parseInt(t)-parseInt(e))).slice(0,5).map((([e,t],a)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50/80 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e}),c.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," tracks"]})]},e)))})]})]})]})},"trends"),"musicTaste"===s&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-4",children:c.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("h3",{className:"text-lg font-sf-pro-display font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(S,{className:"text-red-500",size:20}),"Music Taste Analysis"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Musical Identity"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"text-center p-3 bg-purple-50/80 dark:bg-purple-900/20 rounded-lg border border-purple-200/50 dark:border-purple-700/50",children:[c.jsxs("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[o.diversityScore,"%"]}),c.jsx("div",{className:"text-xs text-purple-500 dark:text-purple-300",children:"Diversity"})]}),c.jsxs("div",{className:"text-center p-3 bg-blue-50/80 dark:bg-blue-900/20 rounded-lg border border-blue-200/50 dark:border-blue-700/50",children:[c.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:o.avgTracksPerArtist}),c.jsx("div",{className:"text-xs text-blue-500 dark:text-blue-300",children:"Tracks/Artist"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Listening Patterns"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50/80 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Listening Time"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Math.round(e.totalDuration/36e5),"h ",Math.round(e.totalDuration%36e5/6e4),"m"]})]}),c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50/80 dark:bg-gray-700/50 rounded-lg",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Average Track Length"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Math.round(e.totalDuration/e.totalTracks/6e4),"m"]})]})]})]})]})]})},"musicTaste")]})]})]})}const Pr={spotify:{name:"Spotify",icon:function({className:e}){return c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",className:e,style:{height:24,width:"auto",objectFit:"contain",display:"block"}})},colors:{primary:"var(--spotify-base-color-hsl)",secondary:"var(--spotify-base-color-hsl)",background:"bg-gradient-to-br from-spotify/20 to-surface-alt/10",text:"text-spotify",border:"border-spotify/50",hover:"hover:bg-spotify/10",tabActiveBg:"bg-spotify/20",tabText:"text-spotify",buttonVariant:"spotify"},features:["Stream Music","Create Playlists","Share Tracks","Offline Download"]},youtube:{name:"YouTube",icon:function({className:e}){return c.jsx("svg",{viewBox:"0 0 24 24",className:e,fill:"currentColor",children:c.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})},colors:{primary:"var(--youtube-base-color-hsl)",secondary:"var(--youtube-base-color-hsl)",background:"bg-gradient-to-br from-youtube/20 to-surface-alt/10",text:"text-youtube",border:"border-youtube/50",hover:"hover:bg-youtube/10",tabActiveBg:"bg-youtube/20",tabText:"text-youtube",buttonVariant:"youtube"},features:["Upload & Manage Videos","Create & Edit Playlists","Live Streaming","Community Features","Comments & Ratings","Channel Analytics","Monetization Tools","Collaboration Features","Content Moderation","Multi-Language Support","Advanced Privacy Controls","Cross-Platform Sync"],permissions:{basic:["View your YouTube account","View your videos and playlists","View your YouTube activity"],advanced:["Manage your YouTube account","View and manage your videos and playlists","View and manage your YouTube activity","Post, edit or delete your comments and captions","Rate videos and manage ratings","See, edit and permanently delete your YouTube videos","Manage your channel settings and preferences"],personal:["See your personal info","See your full name and profile picture","See your primary Google Account email address","Associate you with your personal info on Google"]},capabilities:{content:["Upload videos up to 12 hours long","Create unlimited playlists","Edit video metadata and descriptions","Add custom thumbnails and end screens","Schedule video releases","Set video privacy settings","Add captions and translations"],community:["Respond to comments","Moderate community posts","Create community posts","Host live streams","Enable super chat and memberships","Collaborate with other creators"],analytics:["View detailed analytics","Track video performance","Monitor audience engagement","Analyze viewer demographics","Track revenue and monetization"],monetization:["Enable channel monetization","Set up ad revenue sharing","Create channel memberships","Enable super chat and super thanks","Sell merchandise through YouTube"]}}},Ar={overview:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),permissions:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),usage:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),settings:c.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},_r=({isOpen:e,onClose:t,onConfirm:a,platform:s})=>{const r=Pr[s],i=r.icon,{isDark:o}=qt();return l.useEffect((()=>{if(e){const e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}}),[e,t]),c.jsx(Gt,{children:e&&c.jsxs(c.Fragment,{children:[c.jsx(Ht.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),c.jsx(Ht.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:c.jsxs("div",{className:Hs("rounded-2xl shadow-2xl max-w-md w-full p-6",o?"bg-bg-secondary":"bg-surface-card"),role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title",onClick:e=>e.stopPropagation(),children:[c.jsx("div",{className:Hs("w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4","border-2",r.colors.border,r.colors.background),children:c.jsx(i,{className:Hs("w-8 h-8",r.colors.text)})}),c.jsxs("h3",{id:"dialog-title",className:Hs("text-xl font-bold text-center mb-2","text-content-primary"),children:["Disconnect ",r.name,"?"]}),c.jsxs("p",{className:Hs("text-center mb-6","text-content-secondary"),children:["This will remove access to your ",r.name," account and delete all synced data. You can reconnect anytime."]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(ar,{variant:"secondary",onClick:t,className:"flex-1","aria-label":"Cancel Disconnect",children:"Cancel"}),c.jsx(ar,{variant:"soundswapp",onClick:()=>{a(),t()},className:"flex-1","aria-label":`Confirm Disconnect from ${r.name}`,children:"Disconnect"})]})]})})]})})},Ir=()=>{const{isDark:e}=qt();return c.jsxs("div",{className:"animate-pulse space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:Hs("w-16 h-16 rounded-full","bg-surface-alt")}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:Hs("h-4 rounded w-3/4","bg-surface-alt")}),c.jsx("div",{className:Hs("h-3 rounded w-1/2","bg-surface-alt")})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:Hs("h-3 rounded","bg-surface-alt")}),c.jsx("div",{className:Hs("h-3 rounded w-5/6","bg-surface-alt")})]})]})},Rr=({message:e,onRetry:t})=>{const{isDark:a}=qt();return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[c.jsx("div",{className:Hs("w-16 h-16 rounded-full flex items-center justify-center mb-4",a?"bg-state-error/20":"bg-state-error/10"),children:c.jsx("svg",{className:Hs("w-8 h-8","text-state-error"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("p",{className:Hs("mb-4","text-content-secondary"),children:e}),t&&c.jsx(ar,{variant:"primary",onClick:t,"aria-label":"Try Again",children:"Try Again"})]})},Lr=({isOpen:e,onClose:t,platform:a,settings:s,onSettingChange:r})=>{const{isDark:i}=qt(),o=Pr[a];return l.useEffect((()=>{if(e){const e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}}),[e,t]),c.jsx(Gt,{children:e&&c.jsxs(c.Fragment,{children:[c.jsx(Ht.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),c.jsx(Ht.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-2",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:c.jsxs("div",{className:Hs("rounded-2xl shadow-2xl w-full h-full max-w-6xl max-h-[98vh] overflow-y-auto",i?"bg-gray-800":"bg-white"),role:"dialog","aria-modal":"true","aria-labelledby":"settings-modal-title",onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{className:Hs("flex items-center justify-between p-6 border-b",i?"border-gray-700":"border-gray-200"),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:Hs("w-10 h-10 rounded-lg flex items-center justify-center",o.colors.background),children:c.jsxs("svg",{className:Hs("w-5 h-5",o.colors.text),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),c.jsxs("div",{children:[c.jsxs("h2",{id:"settings-modal-title",className:Hs("text-xl font-semibold",i?"text-white":"text-gray-900"),children:[o.name," Settings"]}),c.jsx("p",{className:Hs("text-sm",i?"text-gray-400":"text-gray-600"),children:"Configure your connection preferences"})]})]}),c.jsx("button",{onClick:t,className:Hs("p-2 rounded-full transition-colors",i?"hover:bg-gray-700":"hover:bg-gray-100"),"aria-label":"Close settings",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:Hs("p-4 rounded-lg border",i?"bg-blue-900/20 border-blue-800/50":"bg-blue-50 border-blue-100"),children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("h3",{className:Hs("text-sm font-medium",i?"text-blue-300":"text-blue-700"),children:"Quick Overview"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(s.autoSync?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:Hs(i?"text-blue-300":"text-blue-600"),children:["Auto-sync: ",s.autoSync?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(s.realTimeSync?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:Hs(i?"text-blue-300":"text-blue-600"),children:["Real-time: ",s.realTimeSync?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(s.analyticsCollection?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:Hs(i?"text-blue-300":"text-blue-600"),children:["Analytics: ",s.analyticsCollection?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(s.crossPlatformSync?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:Hs(i?"text-blue-300":"text-blue-600"),children:["Cross-platform: ",s.crossPlatformSync?"ON":"OFF"]})]})]})]}),c.jsxs("div",{className:Hs("p-4 rounded-lg border",i?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[c.jsxs("h3",{className:Hs("font-medium mb-3 flex items-center gap-2",i?"text-white":"text-gray-900"),children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}),"Account Settings"]}),c.jsxs("p",{className:Hs("text-sm mb-4",i?"text-gray-400":"text-gray-600"),children:["Configure how your ",o.name," account interacts with SoundSwapp."]}),c.jsx("div",{className:"space-y-3",children:[{key:"autoSync",label:"Auto-sync playlists",color:"bg-green-400",description:"Automatically sync your playlists when changes are detected"},{key:"backgroundSync",label:"Background sync",color:"bg-blue-400",description:"Sync data in the background without interrupting your experience"},{key:"syncFavorites",label:"Sync favorites",color:"bg-purple-400",description:"Keep your favorite tracks synchronized across platforms"}].map((e=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${e.color}`}),c.jsx("span",{className:Hs("text-sm font-medium",i?"text-white":"text-gray-900"),children:e.label}),c.jsxs("span",{className:Hs("text-xs","text-gray-500"),children:["(",s[e.key]?"ON":"OFF",")"]})]}),c.jsx("p",{className:Hs("text-xs",i?"text-gray-400":"text-gray-600"),children:e.description})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s[e.key],onChange:()=>r(e.key),"data-setting":e.key}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]},e.key)))})]}),c.jsxs("div",{className:Hs("p-4 rounded-lg border",i?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[c.jsxs("h3",{className:Hs("font-medium mb-3 flex items-center gap-2",i?"text-white":"text-gray-900"),children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Privacy Settings"]}),c.jsx("p",{className:Hs("text-sm mb-4",i?"text-gray-400":"text-gray-600"),children:"Manage data sharing preferences"}),c.jsx("div",{className:"space-y-3",children:[{key:"shareListeningData",label:"Share listening data",color:"bg-yellow-400",description:"Allow sharing of your listening habits for better recommendations"},{key:"analyticsCollection",label:"Analytics collection",color:"bg-orange-400",description:"Help improve SoundSwapp by sharing anonymous usage data"},{key:"thirdPartySharing",label:"Third-party sharing",color:"bg-red-400",description:"Allow data sharing with trusted third-party services"}].map((e=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${e.color}`}),c.jsx("span",{className:Hs("text-sm font-medium",i?"text-white":"text-gray-900"),children:e.label}),c.jsxs("span",{className:Hs("text-xs","text-gray-500"),children:["(",s[e.key]?"ON":"OFF",")"]})]}),c.jsx("p",{className:Hs("text-xs",i?"text-gray-400":"text-gray-600"),children:e.description})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s[e.key],onChange:()=>r(e.key),"data-setting":e.key}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]},e.key)))})]}),c.jsxs("div",{className:Hs("p-4 rounded-lg border",i?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"),children:[c.jsxs("h3",{className:Hs("font-medium mb-3 flex items-center gap-2",i?"text-white":"text-gray-900"),children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Sync Settings"]}),c.jsx("p",{className:Hs("text-sm mb-4",i?"text-gray-400":"text-gray-600"),children:"Configure automatic sync options"}),c.jsx("div",{className:"space-y-3",children:[{key:"realTimeSync",label:"Real-time sync",color:"bg-indigo-400",description:"Sync changes immediately as they happen"},{key:"offlineSync",label:"Offline sync",color:"bg-teal-400",description:"Queue sync operations when offline"},{key:"crossPlatformSync",label:"Cross-platform sync",color:"bg-pink-400",description:"Keep data synchronized across all your devices"}].map((e=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${e.color}`}),c.jsx("span",{className:Hs("text-sm font-medium",i?"text-white":"text-gray-900"),children:e.label}),c.jsxs("span",{className:Hs("text-xs","text-gray-500"),children:["(",s[e.key]?"ON":"OFF",")"]})]}),c.jsx("p",{className:Hs("text-xs",i?"text-gray-400":"text-gray-600"),children:e.description})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s[e.key],onChange:()=>r(e.key),"data-setting":e.key}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]},e.key)))})]})]}),c.jsxs("div",{className:Hs("flex gap-3 p-6 border-t",i?"border-gray-700":"border-gray-200"),children:[c.jsx(ar,{variant:"secondary",onClick:t,className:"flex-1",children:"Close"}),c.jsx(ar,{variant:"soundswapp",onClick:()=>{Object.keys({autoSync:!0,backgroundSync:!1,syncFavorites:!0,shareListeningData:!1,analyticsCollection:!0,thirdPartySharing:!1,realTimeSync:!0,offlineSync:!1,crossPlatformSync:!0}).forEach((e=>{r(e)}))},className:"flex-1",children:"Reset to Defaults"})]})]})})]})})},Fr=u.forwardRef((({onBack:e,platform:t,accountDetails:a,permissions:s,usage:r,onDisconnect:i,cardStyles:o={},isLoading:n=!1,error:d,isFlipped:u},m)=>{const{isDark:h}=qt(),x=Pr[t],p=x.icon;console.log("[PlatformCardBack] Starting render",{platform:t,isLoading:n,error:d});const[g,y]=l.useState("overview"),[f,b]=l.useState(!1),[v,w]=l.useState(!1),[j,N]=l.useState({autoSync:!0,backgroundSync:!1,syncFavorites:!0,shareListeningData:!1,analyticsCollection:!0,thirdPartySharing:!1,realTimeSync:!0,offlineSync:!1,crossPlatformSync:!0});l.useEffect((()=>{const e=localStorage.getItem(`${t}_settings`);if(e)try{const a=JSON.parse(e);N((e=>({...e,...a}))),console.log(`[DEBUG] Loaded ${t} settings:`,a)}catch(a){console.error("Error loading saved settings:",a)}else console.log(`[DEBUG] No saved settings found for ${t}, using defaults`)}),[t]);const k=e=>{const a={...j,[e]:!j[e]};N(a);const s=String(e).replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()));console.log(`${s} ${j[e]?"disabled":"enabled"}`),localStorage.setItem(`${t}_settings`,JSON.stringify(a));const r=document.querySelector(`[data-setting="${e}"]`);r&&(r.classList.add("scale-110"),setTimeout((()=>{r.classList.remove("scale-110")}),150))};try{console.log("[PlatformCardBack] Config resolved:",t,null==x?void 0:x.name),l.useEffect((()=>{const e=e=>{if("Tab"!==e.key&&("ArrowLeft"===e.key||"ArrowRight"===e.key)){const t=["overview","permissions","usage","settings"],a=t.indexOf(g);let s=a;s="ArrowLeft"===e.key?a>0?a-1:t.length-1:a<t.length-1?a+1:0,"usage"!==t[s]||r||(s="ArrowLeft"===e.key?s-1:s+1,s<0&&(s=t.length-1),s>=t.length&&(s=0)),y(t[s]),e.preventDefault()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[g,r]);const S=()=>{if(console.log("[PlatformCardBack] Rendering tab content:",g),n)return console.log("[PlatformCardBack] Rendering loading state"),c.jsx(Ir,{});if(d)return console.log("[PlatformCardBack] Rendering error state:",d),c.jsx(Rr,{message:d,onRetry:()=>console.log("Retry logic not implemented yet")});switch(g){case"overview":const e=x.name.replace(" Music","");return c.jsxs(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"p-1 md:p-2 space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 shadow",children:[a.profilePicture?c.jsx("img",{src:a.profilePicture,alt:`${a.username} profile`,className:"w-14 h-14 rounded-md object-cover border border-gray-200 dark:border-gray-600"}):c.jsx("div",{className:"w-14 h-14 rounded-md bg-gray-200 dark:bg-gray-600 flex items-center justify-center border border-gray-300 dark:border-gray-500",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:a.username}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mb-1",children:a.email}),c.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[c.jsx("span",{className:Hs("px-2.5 py-1 text-xs font-medium rounded shadow-sm cursor-default","border","spotify"===t&&"premium"===a.product?"bg-green-100 border-green-300 text-green-700 dark:bg-green-900/30 dark:border-green-500 dark:text-green-300":"spotify"===t&&"free"===a.product?"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-900/30 dark:border-gray-500 dark:text-gray-300":h?`bg-${t}-600/30 border-${t}-500 text-${t}-200`:`bg-${t}-100 border-${t}-300 text-${t}-700`),children:"spotify"===t&&a.product?`${a.product.charAt(0).toUpperCase()+a.product.slice(1)}`:a.plan||`Link ${e}`}),a.since&&c.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1 text-gray-400 dark:text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Since ",a.since]})]})]})]}),"spotify"===t&&c.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 shadow",children:[c.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-1.5 text-gray-500 dark:text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Account Details"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.country&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-.8-.4L2.2 8.4A1 1 0 012 7.6V6z",clipRule:"evenodd"})}),"Country: ",a.country]}),a.followers&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Followers: ",a.followers.toLocaleString()]}),a.totalTracks&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),c.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v9a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Tracks: ",a.totalTracks]}),a.publicPlaylists&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),c.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v9a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Public Playlists: ",a.publicPlaylists]}),a.privatePlaylists&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Private Playlists: ",a.privatePlaylists]}),a.collaborativePlaylists&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Collaborative: ",a.collaborativePlaylists]}),a.followedPlaylists&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Following: ",a.followedPlaylists]}),a.savedTracks&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Saved Tracks: ",a.savedTracks]}),a.savedAlbums&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M2 6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),"Saved Albums: ",a.savedAlbums]}),a.favoriteArtists&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Favorite Artists: ",a.favoriteArtists]}),a.listeningTime&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Listening Time: ",a.listeningTime]}),a.monthlyListeners&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Monthly Listeners: ",a.monthlyListeners]}),a.explicitContentFilter&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-.8-.4L2.2 8.4A1 1 0 012 7.6V6z",clipRule:"evenodd"})}),"Content Filter: ",a.explicitContentFilter]}),a.familyPlanMembers&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Family Members: ",a.familyPlanMembers]}),a.deviceLimit&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Device Limit: ",a.deviceLimit]}),a.audioQuality&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V5l8-1.6v6.114A4.369 4.369 0 0015 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Audio Quality: ",a.audioQuality]}),a.lastActive&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Last Active: ",a.lastActive]}),a.nextBilling&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Next Billing: ",a.nextBilling]}),a.paymentMethod&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"})}),"Payment: ",a.paymentMethod]}),void 0!==a.autoRenew&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Auto Renew: ",a.autoRenew?"Yes":"No"]}),void 0!==a.studentVerification&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Student Verified: ",a.studentVerification?"Yes":"No"]}),void 0!==a.dataSaver&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Data Saver: ",a.dataSaver?"On":"Off"]}),void 0!==a.privateSession&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Private Session: ",a.privateSession?"Active":"Inactive"]}),a.lastSync&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Last Sync: ",a.lastSync]}),a.offlineDownloads&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Offline Downloads: ",a.offlineDownloads]}),a.crossfade&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V5l8-1.6v6.114A4.369 4.369 0 0015 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Crossfade: ",a.crossfade]}),a.equalizer&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),"Equalizer: ",a.equalizer]}),a.socialFeatures&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Social Features: ",a.socialFeatures]}),a.recentlyPlayed&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Recently Played: ",a.recentlyPlayed]}),a.topGenres&&a.topGenres.length>0&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300 col-span-2",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),c.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v9a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Top Genres: ",a.topGenres.join(", ")]})]})]}),"youtube"===t&&c.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 shadow",children:[c.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-1.5 text-gray-500 dark:text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Channel Details"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.subscriberCount&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Subscribers: ",a.subscriberCount.toLocaleString()]}),a.totalVideos&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M2 6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),"Videos: ",a.totalVideos.toLocaleString()]}),a.totalViews&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Views: ",a.totalViews.toLocaleString()]}),a.totalPlaylists&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),c.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v9a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Playlists: ",a.totalPlaylists]}),a.averageViews&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Avg Views: ",a.averageViews.toLocaleString()]}),a.channelType&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Type: ",a.channelType.charAt(0).toUpperCase()+a.channelType.slice(1)]}),a.verificationStatus&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Status: ",a.verificationStatus.charAt(0).toUpperCase()+a.verificationStatus.slice(1)]}),a.monetizationStatus&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),"Monetization: ",a.monetizationStatus.charAt(0).toUpperCase()+a.monetizationStatus.slice(1)]}),a.contentRating&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-.8-.4L2.2 8.4A1 1 0 012 7.6V6z",clipRule:"evenodd"})}),"Content Rating: ",a.contentRating.charAt(0).toUpperCase()+a.contentRating.slice(1)]}),a.language&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 10-2 0v2a1 1 0 102 0v-2h4v2a1 1 0 102 0v-2h4v2a1 1 0 102 0v-2h-4v-2.07z",clipRule:"evenodd"})}),"Language: ",a.language.toUpperCase()]}),a.location&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"Location: ",a.location]}),a.joinDate&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Joined: ",a.joinDate]}),a.lastUploadDate&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Last Upload: ",a.lastUploadDate]}),void 0!==a.collaborationStatus&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Collaborations: ",a.collaborationStatus?"Enabled":"Disabled"]}),void 0!==a.liveStreamingEnabled&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Live Streaming: ",a.liveStreamingEnabled?"Enabled":"Disabled"]}),void 0!==a.communityTabEnabled&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})}),"Community Tab: ",a.communityTabEnabled?"Enabled":"Disabled"]}),void 0!==a.membershipsEnabled&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Memberships: ",a.membershipsEnabled?"Enabled":"Disabled"]}),void 0!==a.superChatEnabled&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),"Super Chat: ",a.superChatEnabled?"Enabled":"Disabled"]}),a.channelMembershipLevel&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Membership Level: ",a.channelMembershipLevel.charAt(0).toUpperCase()+a.channelMembershipLevel.slice(1)]}),a.topCategories&&a.topCategories.length>0&&c.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300 col-span-2",children:[c.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[c.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),c.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v9a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),"Top Categories: ",a.topCategories.join(", ")]})]})]}),c.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 shadow",children:[c.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-1.5 text-gray-500 dark:text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{d:"M10 3.5a.75.75 0 01.75.75V6h1.75a.75.75 0 010 1.5H10.75V9.25a.75.75 0 01-1.5 0V7.5H7.5a.75.75 0 010-1.5H9.25V4.25A.75.75 0 0110 3.5zM3.5 10a.75.75 0 01.75-.75H6V7.5a.75.75 0 011.5 0V9.25H9.25a.75.75 0 010 1.5H7.5v1.75a.75.75 0 01-1.5 0V10.75H4.25a.75.75 0 01-.75-.75zM10 16.5a.75.75 0 01-.75-.75V14H7.5a.75.75 0 010-1.5h1.75v-1.75a.75.75 0 011.5 0v1.75h1.75a.75.75 0 010 1.5H10.75v1.75a.75.75 0 01-.75.75z"})}),"Available Features"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-3 gap-y-1.5",children:x.features.map(((e,t)=>c.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-300",children:[c.jsx("svg",{className:Hs("w-3.5 h-3.5 mr-1.5",x.colors.text),viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e]},t)))})]}),"spotify"===t&&c.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 shadow border border-blue-100 dark:border-blue-800/50",children:[c.jsxs("h4",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-1.5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Permissions & Capabilities"]}),c.jsxs("div",{className:"space-y-2 text-xs",children:[c.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[c.jsx("svg",{className:"w-3 h-3 mr-1.5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Read & create playlists"]}),c.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[c.jsx("svg",{className:"w-3 h-3 mr-1.5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Access profile & preferences"]}),c.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[c.jsx("svg",{className:"w-3 h-3 mr-1.5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Cross-platform sync enabled"]}),c.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[c.jsx("svg",{className:"w-3 h-3 mr-1.5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Real-time playlist updates"]})]})]})]});case"permissions":return c.jsxs(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"space-y-5",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),c.jsx("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Granted Permissions"})]}),c.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3 italic",children:["These permissions allow SoundSwapp to interact with your ",x.name," account."]}),c.jsx("div",{className:"space-y-3",children:s.map(((e,t)=>c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t,duration:.2},whileHover:{x:3,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",borderColor:"rgba(var(--platform-base-color-rgb), 0.5)"},className:Hs("p-4 rounded-lg flex items-center gap-4","bg-gray-50 dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700","hover:border-gray-300 dark:hover:border-gray-600","transition-all duration-200"),children:[c.jsx("div",{className:Hs("w-10 h-10 rounded-lg flex items-center justify-center","bg-gradient-to-br",x.colors.background),children:c.jsx("svg",{className:Hs("w-5 h-5",x.colors.text),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("span",{className:"text-base text-gray-700 dark:text-gray-300",children:e})]},e)))})]});case"usage":return r?c.jsxs(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"space-y-5",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Usage Statistics"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[void 0!==r.playlists&&c.jsxs(Ht.div,{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-700 shadow-sm",whileHover:{y:-3,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},children:[c.jsx("p",{className:Hs("text-3xl font-bold mb-1",x.colors.text),children:r.playlists}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center justify-center gap-1.5",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Playlists"]})]}),void 0!==r.tracks&&c.jsxs(Ht.div,{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-700 shadow-sm",whileHover:{y:-3,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},children:[c.jsx("p",{className:Hs("text-3xl font-bold mb-1",x.colors.text),children:r.tracks.toLocaleString()}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center justify-center gap-1.5",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),"Tracks"]})]}),void 0!==r.playbackHours&&c.jsxs(Ht.div,{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-700 shadow-sm",whileHover:{y:-3,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},children:[c.jsxs("p",{className:Hs("text-3xl font-bold mb-1",x.colors.text),children:[r.playbackHours,"h"]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center justify-center gap-1.5",children:[c.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Playback"]})]}),r.storage&&c.jsxs(Ht.div,{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-700 shadow-sm",whileHover:{y:-3,boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},children:[c.jsx("p",{className:Hs("text-3xl font-bold mb-1",x.colors.text),children:r.storage}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center justify-center gap-1.5",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),"Storage"]})]})]}),r.lastSynced&&c.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800/50 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Last synced: ",r.lastSynced]})]})]}):null;case"settings":return c.jsxs(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"space-y-5",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsxs("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Connection Settings"})]}),c.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800/50",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 dark:text-blue-300",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{children:'üí° Double-click the "Settings" tab above to open detailed settings'})]})}),c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-100 dark:border-blue-800/50 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("h5",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Settings Summary"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(j.autoSync?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Auto-sync: ",j.autoSync?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(j.realTimeSync?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Real-time: ",j.realTimeSync?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(j.analyticsCollection?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Analytics: ",j.analyticsCollection?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full "+(j.crossPlatformSync?"bg-green-400":"bg-gray-400")}),c.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["Cross-platform: ",j.crossPlatformSync?"ON":"OFF"]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("h5",{className:"text-gray-900 dark:text-white font-medium mb-3 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}),"Account Settings"]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Configure how your ",x.name," account interacts with SoundSwapp."]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Auto-sync playlists"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.autoSync?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.autoSync,onChange:()=>k("autoSync"),"data-setting":"autoSync"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Background sync"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.backgroundSync?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.backgroundSync,onChange:()=>k("backgroundSync"),"data-setting":"backgroundSync"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Sync favorites"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.syncFavorites?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.syncFavorites,onChange:()=>k("syncFavorites"),"data-setting":"syncFavorites"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("h5",{className:"text-gray-900 dark:text-white font-medium mb-3 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Privacy Settings"]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Manage data sharing preferences"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Share listening data"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.shareListeningData?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.shareListeningData,onChange:()=>k("shareListeningData"),"data-setting":"shareListeningData"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Analytics collection"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.analyticsCollection?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.analyticsCollection,onChange:()=>k("analyticsCollection"),"data-setting":"analyticsCollection"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Third-party sharing"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.thirdPartySharing?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.thirdPartySharing,onChange:()=>k("thirdPartySharing"),"data-setting":"thirdPartySharing"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[c.jsxs("h5",{className:"text-gray-900 dark:text-white font-medium mb-3 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Sync Settings"]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Configure automatic sync options"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Real-time sync"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.realTimeSync?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.realTimeSync,onChange:()=>k("realTimeSync"),"data-setting":"realTimeSync"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-teal-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Offline sync"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.offlineSync?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.offlineSync,onChange:()=>k("offlineSync"),"data-setting":"offlineSync"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-pink-400 rounded-full"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:"Cross-platform sync"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["(",j.crossPlatformSync?"ON":"OFF",")"]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:j.crossPlatformSync,onChange:()=>k("crossPlatformSync"),"data-setting":"crossPlatformSync"}),c.jsx("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-checked:bg-green-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white border border-white/20"})]})]})]})]}),c.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Debug Info:"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Auto-sync: ",j.autoSync?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Background sync: ",j.backgroundSync?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Sync favorites: ",j.syncFavorites?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Share listening data: ",j.shareListeningData?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Analytics collection: ",j.analyticsCollection?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Third-party sharing: ",j.thirdPartySharing?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Real-time sync: ",j.realTimeSync?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Offline sync: ",j.offlineSync?"ON":"OFF"]}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Cross-platform sync: ",j.crossPlatformSync?"ON":"OFF"]})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsxs("button",{onClick:()=>{console.log(`Refreshing ${t} connection...`);const e=null==event?void 0:event.target;if(e){const t=e.innerHTML;e.innerHTML='\n                          <svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />\n                          </svg>\n                          Refreshing...\n                        ',setTimeout((()=>{e.innerHTML='\n                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />\n                            </svg>\n                            Refreshed!\n                          ',setTimeout((()=>{e.innerHTML=t}),1e3)}),2e3)}},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Connection"]}),c.jsxs("button",{onClick:()=>{try{const e={platform:t,settings:j,exportDate:(new Date).toISOString()},a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`${t}-settings.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),console.log(`${t} settings exported successfully`);const i=null==event?void 0:event.target;if(i){const e=i.innerHTML;i.innerHTML='\n                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />\n                            </svg>\n                            Exported!\n                          ',setTimeout((()=>{i.innerHTML=e}),1e3)}}catch(e){console.error("Error exporting settings:",e)}},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm transition-colors",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Settings"]})]}),c.jsx("div",{className:"pt-2",children:c.jsxs("button",{onClick:()=>{const e={autoSync:!0,backgroundSync:!1,syncFavorites:!0,shareListeningData:!1,analyticsCollection:!0,thirdPartySharing:!1,realTimeSync:!0,offlineSync:!1,crossPlatformSync:!0};N(e),localStorage.setItem(`${t}_settings`,JSON.stringify(e)),console.log(`${t} settings reset to defaults`);const a=null==event?void 0:event.target;if(a){const e=a.innerHTML;a.innerHTML='\n                          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />\n                          </svg>\n                          Reset Complete!\n                        ',setTimeout((()=>{a.innerHTML=e}),1e3)}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg text-sm transition-colors",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset to Default Settings"]})})]});default:return c.jsx("div",{children:"Select a tab"})}};console.log("[PlatformCardBack] About to return JSX");const T=c.jsxs(Ht.div,{ref:m,className:Hs("absolute inset-0 overflow-hidden rounded-xl shadow-xl","flex flex-col",h?"bg-gray-800 text-gray-200":"bg-white text-gray-800",x.colors.background),style:{...o,transformStyle:"preserve-3d",transform:u?"rotateY(0deg)":"rotateY(180deg)",transition:"transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",MozBackfaceVisibility:"hidden",visibility:u?"visible":"hidden",padding:"0rem"},children:[c.jsxs("div",{className:Hs("flex items-center justify-between p-4 border-b",h?"border-gray-700":"border-gray-200",`bg-${t}-600 dark:bg-${t}-700`),children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(p,{className:Hs("w-7 h-7","text-white")}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-lg font-semibold text-white",children:[x.name," Account"]}),c.jsx("p",{className:"text-xs text-white opacity-80",children:"Manage your connection"})]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Go back",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),c.jsx("div",{className:"flex justify-around border-b p-2",style:{borderColor:h?"var(--gray-700)":"var(--gray-200)"},children:["overview","permissions","settings"].map((e=>{if("usage"===e&&!r)return null;const t=Ar[e];return c.jsxs("button",{onClick:()=>y(e),onDoubleClick:()=>{"settings"===e&&w(!0)},className:Hs("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-all duration-150",g===e?Hs(x.colors.tabActiveBg,x.colors.tabText,"shadow-sm"):Hs("hover:bg-gray-100 dark:hover:bg-gray-700",h?"text-gray-400 hover:text-gray-100":"text-gray-500 hover:text-gray-800"),"settings"===e?"cursor-pointer":""),"aria-current":g===e?"page":void 0,title:"settings"===e?"Double-click to open detailed settings":void 0,children:[t,c.jsx("span",{children:e.charAt(0).toUpperCase()+e.slice(1)}),"settings"===e&&c.jsx("svg",{className:"w-3 h-3 ml-1 opacity-60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},e)}))}),c.jsx("div",{className:"flex-grow p-3 md:p-4 overflow-y-auto",children:S()}),i&&c.jsx("div",{className:"px-4 py-3 border-t",style:{borderColor:h?"var(--gray-700)":"var(--gray-200)"},children:c.jsx(ar,{variant:"secondary",onClick:()=>b(!0),className:"w-full !bg-red-600 hover:!bg-red-700 !text-white",children:"Disconnect Account"})}),c.jsx(_r,{isOpen:f,onClose:()=>b(!1),onConfirm:i||(()=>{}),platform:t}),c.jsx(Lr,{isOpen:v,onClose:()=>w(!1),platform:t,settings:j,onSettingChange:k})]});return console.log("[PlatformCardBack] JSX created, returning"),T}catch(S){return console.error("[PlatformCardBack] Error rendering component:",S),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 text-red-500 p-4 text-center",children:c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:"Error rendering card"}),c.jsx("p",{children:S instanceof Error?S.message:"Unknown error"})]})})}}));Fr.displayName="PlatformCardBack";const Mr=({platform:e,onConnect:t,onDisconnect:a,isConnecting:s=!1,connectionError:r="",userEmail:i,userMeta:o,connected:n,userName:d,userPhoto:u})=>{const{isDark:m}=qt(),{hasSpotifyAuth:h,hasYouTubeAuth:x,spotifyUserProfile:p,youtubeUserProfile:g,fetchSpotifyProfile:y,fetchYouTubeProfile:f,user:b}=ya(),[v,w]=l.useState(!1),[j,N]=l.useState(!1),[k,S]=l.useState(null),T=l.useRef(null),C=l.useRef(null);l.useEffect((()=>{document.documentElement.classList.contains("dark")}),[]),l.useEffect((()=>{b&&S(null)}),[b]);const E=void 0!==n?n:"spotify"===e?h:x,P="spotify"===e?p:g;l.useEffect((()=>{E&&!P&&("spotify"===e?(console.log("EnhancedConnectionCard: Spotify connected but profile missing, fetching..."),y()):"youtube"===e&&(console.log("EnhancedConnectionCard: YouTube connected but profile missing, fetching..."),f()))}),[E,P,e,y,f]);const A=()=>{s||w(!v)};l.useEffect((()=>{var e;v&&(null==(e=C.current)||e.focus())}),[v]);const _=l.useMemo((()=>{const t="spotify"===e,a={textColor:"text-content-primary",userMetaDisplay:(null==o?void 0:o.plan)||(t?"Spotify Premium":"YouTube Premium")};return t?{...a,name:"Spotify",icon:c.jsx($,{className:"w-10 h-10 text-white"}),iconContainerBg:"bg-spotify",indicator:"bg-spotify",accountTypeColor:"text-spotify-text",glowHslVar:"var(--spotify-base-color-hsl)",glowRgbVar:"var(--spotify-base-color-rgb)",disconnectBg:"bg-spotify/80 hover:bg-spotify",buttonVariant:"soundswapp",cardGradient:m?"from-spotify/20 to-bg-secondary/10":"from-spotify/10 to-bg-secondary/5",cssVariables:{"--platform-bg":"hsl(var(--spotify-base-color-hsl))","--platform-text":"hsl(var(--text-on-primary-action-hsl))","--platform-bg-hover":"hsla(var(--spotify-base-color-hsl), 0.8)","--platform-indicator":"hsl(var(--spotify-base-color-hsl))","--platform-glow-color":"hsl(var(--spotify-base-color-hsl))","--platform-glow-color-rgb":"var(--spotify-base-color-rgb)"}}:{...a,name:"YouTube",icon:c.jsx(z,{className:"w-10 h-10 text-white"}),iconContainerBg:"bg-youtube",indicator:"bg-youtube",accountTypeColor:"text-youtube-text",glowHslVar:"var(--youtube-base-color-hsl)",glowRgbVar:"var(--youtube-base-color-rgb)",disconnectBg:"bg-youtube/80 hover:bg-youtube",buttonVariant:"soundswapp",cardGradient:m?"from-youtube/20 to-bg-secondary/10":"from-youtube/10 to-bg-secondary/5",cssVariables:{"--platform-bg":"hsl(var(--youtube-base-color-hsl))","--platform-text":"hsl(var(--text-on-primary-action-hsl))","--platform-bg-hover":"hsla(var(--youtube-base-color-hsl), 0.8)","--platform-indicator":"hsl(var(--youtube-base-color-hsl))","--platform-glow-color":"hsl(var(--youtube-base-color-hsl))","--platform-glow-color-rgb":"var(--youtube-base-color-rgb)"}}}),[e,o,m]),I=Hs("rounded-xl border shadow-md transition-all duration-300","backdrop-blur-md bg-opacity-90","bg-surface-card border-border-default","shadow-[0_0_12px_3px_rgba(var(--platform-glow-color-rgb),0.15)]","hover:shadow-[0_0_20px_5px_rgba(var(--platform-glow-color-rgb),0.25)] hover:border-border-interactive hover:scale-[1.01] hover:brightness-102"),R=l.useMemo((()=>["Read your playlists",`Access your ${_.name} profile information`,E?`Create and modify your ${_.name} playlists`:`Connect to manage ${_.name} playlists`]),[_.name,E]),L=l.useMemo((()=>{var t,a,s,r,n,l;const c={username:(null==P?void 0:P.displayName)||("spotify"===e?"Mich":"YouTube User"),email:i||(E&&P?"michmichira@gmail.com":"Not available"),profilePicture:null==P?void 0:P.imageUrl,plan:(null==o?void 0:o.plan)||(E?`${_.name} Connected`:`Link ${_.name}`),since:(null==o?void 0:o.lastSignInTime)?new Date(o.lastSignInTime).toLocaleDateString():E?"8/5/2025":"N/A"};if(console.log("[EnhancedConnectionCard] Building account details:",{platform:e,connected:E,hasUserMeta:!!o,userProfile:null==P?void 0:P.displayName,userEmail:i}),"youtube"===e&&E&&o)return console.log("[EnhancedConnectionCard] Building YouTube account details with userMeta"),{...c,channelId:o.channelId||o.id,subscriberCount:o.subscriberCount||(null==(t=o.statistics)?void 0:t.subscriberCount)||0,totalVideos:o.videoCount||(null==(a=o.statistics)?void 0:a.videoCount)||0,totalPlaylists:o.playlistCount||(null==(s=o.statistics)?void 0:s.playlistCount)||0,totalViews:o.viewCount||(null==(r=o.statistics)?void 0:r.viewCount)||0,channelType:o.channelType||"personal",monetizationStatus:o.monetizationStatus||"disabled",verificationStatus:o.verificationStatus||"unverified",contentRating:o.contentRating||"family",language:o.language||"en",location:o.location||o.country||"Unknown",joinDate:o.publishedAt?new Date(o.publishedAt).toLocaleDateString():"8/5/2025",lastUploadDate:o.lastUploadDate?new Date(o.lastUploadDate).toLocaleDateString():"2 days ago",averageViews:o.averageViews||(null==(n=o.statistics)?void 0:n.averageViews)||0,topCategories:o.topCategories||["Music","Entertainment","Education"],collaborationStatus:o.collaborationStatus||!1,liveStreamingEnabled:o.liveStreamingEnabled||!1,communityTabEnabled:o.communityTabEnabled||!1,membershipsEnabled:o.membershipsEnabled||!1,superChatEnabled:o.superChatEnabled||!1,channelMembershipLevel:o.channelMembershipLevel||"none"};if("youtube"===e&&E)return console.log("[EnhancedConnectionCard] Building YouTube account details (fallback)"),{...c,channelId:"Connected",subscriberCount:1250,totalVideos:45,totalPlaylists:12,totalViews:125e3,channelType:"personal",monetizationStatus:"disabled",verificationStatus:"unverified",contentRating:"family",language:"en",location:"United States",joinDate:"8/5/2025",lastUploadDate:"2 days ago",averageViews:2800,topCategories:["Music","Entertainment","Education"],collaborationStatus:!1,liveStreamingEnabled:!1,communityTabEnabled:!1,membershipsEnabled:!1,superChatEnabled:!1,channelMembershipLevel:"none"};if("spotify"===e&&E&&o){console.log("[EnhancedConnectionCard] Building Spotify account details with userMeta:",o);const e={...c,country:o.country,followers:null==(l=o.followers)?void 0:l.total,product:o.product||"free",explicitContent:o.explicit_content,totalTracks:o.totalTracks,lastActive:o.lastActive,subscription:"premium"===o.product?"Premium":"Free",accountCountry:o.country||"Unknown",explicitContentFilter:o.explicit_content?"Enabled":"Disabled",displayName:(null==P?void 0:P.displayName)||"Mich",profilePicture:null==P?void 0:P.imageUrl,publicPlaylists:12,privatePlaylists:8,collaborativePlaylists:3,followedPlaylists:45,recentlyPlayed:"Last 30 days",topGenres:["Pop","Hip-Hop","Electronic"],listeningTime:"2.5 hours/day",favoriteArtists:23,savedAlbums:67,savedTracks:2847,monthlyListeners:890,accountType:"premium"===o.product?"Premium Individual":"Free",familyPlanMembers:"family"===o.product?6:null,studentVerification:"student"===o.product,deviceLimit:"premium"===o.product?5:1,offlineDownloads:"premium"===o.product?"Unlimited":"Not available",audioQuality:"premium"===o.product?"High (320kbps)":"Standard (128kbps)",crossfade:"12 seconds",equalizer:"Custom",socialFeatures:"Enabled",dataSaver:!1,privateSession:!1,lastSync:"2 hours ago",nextBilling:"9/5/2025",paymentMethod:"Credit Card",autoRenew:!0};return console.log("[EnhancedConnectionCard] Spotify account details built:",e),e}return"spotify"===e&&E?(console.log("[EnhancedConnectionCard] Building Spotify account details (fallback)"),{...c,username:"Mich",email:"michmichira@gmail.com",since:"8/5/2025",product:"premium",country:"US",followers:1250,explicitContent:!1,totalTracks:2847,lastActive:"8/5/2025",subscription:"Premium",accountCountry:"United States",explicitContentFilter:"Disabled",displayName:"Mich",profilePicture:null==P?void 0:P.imageUrl,publicPlaylists:12,privatePlaylists:8,collaborativePlaylists:3,followedPlaylists:45,recentlyPlayed:"Last 30 days",topGenres:["Pop","Hip-Hop","Electronic"],listeningTime:"2.5 hours/day",favoriteArtists:23,savedAlbums:67,savedTracks:2847,monthlyListeners:890,accountType:"Premium Individual",familyPlanMembers:null,studentVerification:!1,deviceLimit:5,offlineDownloads:"Unlimited",audioQuality:"High (320kbps)",crossfade:"12 seconds",equalizer:"Custom",socialFeatures:"Enabled",dataSaver:!1,privateSession:!1,lastSync:"2 hours ago",nextBilling:"9/5/2025",paymentMethod:"Credit Card",autoRenew:!0}):(console.log("[EnhancedConnectionCard] Returning base details"),c)}),[P,i,e,o,_.name,E]);return c.jsxs(Ht.div,{className:"min-h-[320px] md:min-h-[360px] w-full max-w-[450px] relative rounded-xl overflow-hidden",style:{perspective:"2000px",..._.cssVariables,backgroundImage:"linear-gradient(var(--surface-card), var(--surface-card)), \n                        linear-gradient(135deg, \n                          hsla(var(--platform-base-color-hsl), 0.7), \n                          hsla(var(--platform-base-color-hsl), 0.15), \n                          hsla(var(--platform-base-color-hsl), 0.7)\n                        )",backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",borderWidth:"1.5px",borderStyle:"solid",borderColor:"transparent",animation:j?"borderGradientFlow 2.5s ease infinite":"borderGradientFlow 5s ease infinite"},onHoverStart:()=>N(!0),onHoverEnd:()=>N(!1),children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-xl opacity-60",children:[c.jsx(Ht.div,{className:`absolute -bottom-8 -left-8 w-56 h-56 rounded-full filter blur-3xl bg-gradient-to-br ${_.cardGradient}`,animate:{opacity:j?[.2,.35,.2]:[.15,.25,.15],scale:j?[1,1.15,1]:[1,1.05,1]},transition:{duration:j?5:7,repeat:1/0,ease:"easeInOut"}}),c.jsx(Ht.div,{className:`absolute -top-8 -right-8 w-56 h-56 rounded-full filter blur-3xl bg-gradient-to-br ${_.cardGradient}`,animate:{opacity:j?[.15,.3,.15]:[.1,.2,.1],scale:j?[1.1,1,1.1]:[1.05,1,1.05]},transition:{duration:j?6:8,repeat:1/0,ease:"easeInOut",delay:.5}})]}),c.jsxs("div",{className:"relative w-full h-full",style:{perspective:"2000px"},children:[c.jsxs("div",{ref:T,className:Hs("absolute inset-0",I,s?"cursor-default":"cursor-pointer"),onClick:A,onKeyDown:e=>{s||("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),w(!v)),v&&"Escape"===e.key&&(e.preventDefault(),w(!1)))},style:{transformStyle:"preserve-3d",transform:v?"rotateY(180deg)":"rotateY(0deg)",transition:"transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",MozBackfaceVisibility:"hidden",visibility:v?"hidden":"visible",padding:"0.5rem"},role:"button",tabIndex:0,"aria-label":`${_.name} connection card. ${E?"Connected":"Not connected"}. Press Enter or Space to flip.`,children:[c.jsx("div",{className:"absolute inset-0 bg-surface-card z-0"}),c.jsx(Ht.div,{className:"absolute -bottom-20 -left-20 w-48 h-48 rounded-full opacity-50 filter blur-3xl",style:{backgroundColor:`hsl(${_.glowHslVar})`},animate:{opacity:j?[.3,.5,.3]:[.2,.3,.2],scale:j?[1,1.3,1]:[1,1.15,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),c.jsx(Ht.div,{className:"absolute inset-0 bg-white/0 backdrop-blur-0 transition-all duration-300 z-0",initial:!1,animate:j?{backgroundColor:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(3px)"}:{backgroundColor:"rgba(255, 255, 255, 0)",backdropFilter:"blur(0px)"},"aria-hidden":"true"}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-between h-full p-4 md:p-6 text-center",children:[c.jsx("div",{className:Hs("absolute top-3 right-3 px-2 py-0.5 rounded-full text-xs font-medium shadow",E?_.indicator:m?"bg-gray-600 text-gray-200":"bg-gray-300 text-gray-700"),children:s?"Connecting...":E?"Connected":"Not Connected"}),c.jsxs("div",{className:"mb-3 mt-6 flex items-center justify-center",children:["youtube"===e&&c.jsx("img",{src:m?"/images/yt_logo_rgb_dark.png":"/images/yt_logo_rgb_light.png",alt:"YouTube",style:{height:72,width:"auto",objectFit:"contain",display:"block",minWidth:"72px"},className:"h-18 w-auto"}),"spotify"===e&&c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",style:{height:72,width:"auto",objectFit:"contain",display:"block",minWidth:"72px"},className:"h-18 w-auto"})]}),E&&(null==P?void 0:P.displayName)&&c.jsx("p",{className:`text-sm ${_.textColor} opacity-80 mb-2 truncate max-w-[90%]`,children:P.displayName}),(!E||!(null==P?void 0:P.displayName))&&c.jsx("p",{className:`text-sm ${_.textColor} opacity-70 mb-2`,children:E?"Account linked":`Connect your ${_.name} account`}),E&&(null==P?void 0:P.imageUrl)&&c.jsx("img",{src:P.imageUrl,alt:`${P.displayName||_.name} profile`,className:"w-10 h-10 rounded-full mb-3 border-2 border-[var(--platform-indicator)] shadow-md object-cover"}),c.jsx(Gt,{children:r&&c.jsxs(Ht.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-xs text-red-500 dark:text-red-400 mt-1 mb-2 px-2 break-words",children:["Error: ",r]})}),c.jsxs("div",{className:"mt-auto w-full flex flex-col items-center space-y-2",children:[E?c.jsx(ar,{variant:"outline",className:"w-full max-w-xs text-sm py-2.5",onClick:e=>{e.stopPropagation(),A()},disabled:s,children:"View Details / Disconnect"}):c.jsx(ar,{onClick:async()=>{b?(S(null),t()):S("Please sign in to connect your account")},disabled:s,variant:_.buttonVariant,className:"w-full max-w-xs py-2.5",children:s?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting..."]}):`Connect ${_.name}`}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2 px-1",children:E?`Manage your ${_.name} connection.`:`Log in to link your ${_.name} account.`})]})]})]}),c.jsx(Fr,{platform:e,accountDetails:L,permissions:R,onBack:A,onDisconnect:a?()=>{a(),w(!1)}:void 0,isFlipped:v})]}),k&&c.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-red-400 text-sm",children:k})]})},Dr=({label:e,variant:t="default",error:a,helpText:s,className:r,containerClassName:i,labelClassName:o,inputClassName:n,required:d,id:u,...m})=>{const[h,x]=l.useState(!1),[p,g]=l.useState(!1),y=l.useRef(null),f=u||`input-${Math.random().toString(36).substring(2,9)}`;l.useEffect((()=>{void 0!==m.value&&g(Boolean(m.value))}),[m.value]);const b={default:{container:"",input:"px-3 pt-6 pb-2 rounded-lg border bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-700 focus:ring-indigo-500 dark:focus:ring-indigo-400",label:"text-gray-500 dark:text-gray-400",labelActive:"text-xs -translate-y-3",labelInactive:"text-base translate-y-2"},minimal:{container:"",input:"px-0 pt-6 pb-1 border-0 border-b-2 border-gray-300 dark:border-slate-700 focus:ring-0 focus:border-indigo-500 dark:focus:border-indigo-400 bg-transparent",label:"text-gray-500 dark:text-gray-400 left-0",labelActive:"text-xs -translate-y-4 text-indigo-600 dark:text-indigo-400",labelInactive:"text-base translate-y-2"},outlined:{container:"",input:"px-3 py-3 border-2 rounded-xl focus:ring-0 focus:border-indigo-500 dark:focus:border-indigo-400 bg-transparent border-gray-300 dark:border-slate-700",label:"text-gray-500 dark:text-gray-400 bg-white dark:bg-slate-900 px-1",labelActive:"text-xs -translate-y-5 text-indigo-600 dark:text-indigo-400 scale-90",labelInactive:"text-base translate-y-2"}}[t],v=h||p;return c.jsxs("div",{className:Hs("relative mb-4",b.container,i),children:[c.jsx("input",{id:f,ref:y,className:Hs("block w-full text-base transition-all duration-200 ease-in-out focus:outline-none focus:ring-2",b.input,a?"border-red-500 focus:ring-red-500 focus:border-red-500":"",n,r),onFocus:e=>{var t;x(!0),null==(t=m.onFocus)||t.call(m,e)},onBlur:e=>{var t;x(!1),g(Boolean(e.target.value)),null==(t=m.onBlur)||t.call(m,e)},onChange:e=>{var t;g(Boolean(e.target.value)),null==(t=m.onChange)||t.call(m,e)},"aria-invalid":a?"true":"false","aria-describedby":a?`${f}-error`:s?`${f}-help`:void 0,required:d,...m}),c.jsxs("label",{htmlFor:f,className:Hs("absolute left-3 transition-all duration-200 pointer-events-none",b.label,v?b.labelActive:b.labelInactive,o),children:[e,d&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a&&c.jsx("p",{id:`${f}-error`,className:"mt-1 text-sm text-red-500",children:a}),s&&!a&&c.jsx("p",{id:`${f}-help`,className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s})]})};function Ur({className:e,children:t,variant:a="default",...s}){return c.jsx("div",{...s,className:Hs("bg-size animate-bg-position bg-[length:200%_auto] bg-clip-text text-transparent",{spotify:"bg-gradient-to-r from-green-400 from-20% via-blue-500 via-50% to-green-600 to-80%",youtube:"bg-gradient-to-r from-red-500 from-30% via-red-600 via-50% to-amber-500 to-80%",default:"bg-gradient-to-r from-yellow-500 from-30% via-purple-500 via-50% to-pink-500 to-80%"}[a],e),children:t})}function Yr(e,t){l.useEffect((()=>{var a,s;const r=a=>{var s;const{clientX:r,clientY:i}=a,{top:o,left:n}=(null==(s=e.current)?void 0:s.getBoundingClientRect())||{top:0,left:0};null==t||t({x:r-n,y:i-o})},i=a=>{var s;const{clientX:r,clientY:i}=a.touches[0],{top:o,left:n}=(null==(s=e.current)?void 0:s.getBoundingClientRect())||{top:0,left:0};null==t||t({x:r-n,y:i-o})};null==(a=e.current)||a.addEventListener("mousemove",r,{passive:!0}),null==(s=e.current)||s.addEventListener("touchmove",i,{passive:!0});const o=e.current;return()=>{null==o||o.removeEventListener("mousemove",r),null==o||o.removeEventListener("touchmove",i)}}),[e,t])}function $r({className:e,baseColor:t="text-gray-800",highlightColor:a="text-indigo-600",size:s=150,children:r,...i}){const o=l.useRef(null),[n,d]=l.useState({x:0,y:0}),[u,m]=l.useState(!1);return Yr(o,(({x:e,y:t})=>{d({x:e,y:t})})),c.jsxs("div",{ref:o,className:Hs("relative",e),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),...i,children:[c.jsx("div",{className:Hs("transition-colors duration-200",t),children:r}),u&&c.jsx("div",{className:Hs("absolute top-0 left-0 w-full h-full pointer-events-none",a),style:{WebkitMaskImage:`radial-gradient(${s}px circle at ${n.x}px ${n.y}px, black 10%, transparent 70%)`,maskImage:`radial-gradient(${s}px circle at ${n.x}px ${n.y}px, black 10%, transparent 70%)`},children:r})]})}function zr({className:e,glowColor:t="rgba(120, 119, 198, 0.4)",size:a=350,strength:s=.3,children:r,...i}){const o=l.useRef(null),[n,d]=l.useState({x:0,y:0}),[u,m]=l.useState(0);return Yr(o,(({x:e,y:t})=>{d({x:e,y:t}),m(1)})),c.jsxs("div",{ref:o,className:Hs("relative overflow-hidden rounded-xl bg-white",e),onMouseLeave:()=>m(0),...i,children:[c.jsx("div",{className:"pointer-events-none absolute -inset-px opacity-0 transition-opacity duration-300",style:{opacity:u,background:`radial-gradient(${a}px circle at ${n.x}px ${n.y}px, ${t}, transparent ${100*s}%)`}}),r]})}const Or=e=>{const t=[],a=e.artists[0],s=e.name.replace(/\(feat\.?.*?\)/gi,"").replace(/\(Explicit.*?\)/gi,"").replace(/\(Album Version\)/gi,"").replace(/\(Clean.*?\)/gi,"").trim();if(t.push(`${a} ${s}`),t.push(`${s} ${a}`),t.push(`${a} - ${s}`),a.includes("(")&&a.includes(")")){const e=a.split("(")[0].trim();t.push(`${e} ${s}`)}if(s.includes("(")){const e=s.split("(")[0].trim();t.push(`${a} ${e}`)}if(a.toLowerCase().includes("feat")){const e=a.split(/feat\.?/i)[0].trim();t.push(`${e} ${s}`)}return[...new Set(t)]},Br=({failedTracks:e,onClose:t,onAddToYouTube:a,onAddToSpotify:s})=>{const[r,i]=l.useState(null),[o,n]=l.useState({}),d=(e,t,a)=>{let s=a;if("youtube"===t&&(a.includes("youtube.com")||a.includes("youtu.be"))){const e=a.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);e&&(s=e[1])}if("spotify"===t&&a.includes("spotify.com/track/")){const e=a.match(/spotify\.com\/track\/([a-zA-Z0-9]+)/);e&&(s=`spotify:track:${e[1]}`)}n((a=>({...a,[e]:{...a[e],[t]:s}})))};return c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-surface-card rounded-lg shadow-xl max-w-6xl w-full max-h-[80vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-border-default",children:[c.jsxs("h3",{className:"text-lg md:text-xl font-bold text-content-primary flex items-center gap-2",children:[c.jsx(y,{className:"h-5 w-5 text-error-text"}),"Failed Tracks Details"]}),c.jsx("button",{onClick:t,className:"text-content-secondary hover:text-content-primary transition-colors","aria-label":"Close modal",children:c.jsx(O,{className:"h-6 w-6"})})]}),c.jsxs("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[60vh]",children:[c.jsxs("div",{className:"mb-4 md:mb-6",children:[c.jsxs("div",{className:"text-sm text-content-secondary mb-3 md:mb-4",children:[e.length," tracks failed to convert. Use the search tools below to find and add missing tracks:"]}),c.jsxs("div",{className:"bg-warning-bg border border-warning-border rounded-lg p-3 md:p-4 mb-4 md:mb-6",children:[c.jsxs("h4",{className:"font-semibold text-warning-text mb-2 flex items-center gap-2",children:[c.jsx(f,{className:"h-4 w-4"}),"Smart Search Tips"]}),c.jsxs("ul",{className:"text-sm text-content-secondary space-y-1",children:[c.jsx("li",{children:'‚Ä¢ Try removing "feat." or "(feat.)" from artist names'}),c.jsx("li",{children:"‚Ä¢ Search for just the main artist name"}),c.jsx("li",{children:"‚Ä¢ Try different spellings or abbreviations"}),c.jsx("li",{children:'‚Ä¢ For explicit content, try searching without "Explicit" in the title'}),c.jsx("li",{children:"‚Ä¢ Use YouTube's search suggestions for better results"}),c.jsx("li",{children:"‚Ä¢ Check for remixes, covers, or live versions"})]})]})]}),c.jsx("div",{className:"space-y-4 md:space-y-6",children:e.map(((e,t)=>{var n,l,u,m;return c.jsxs("div",{className:"border border-border-default rounded-lg p-3 md:p-4 bg-surface-alt",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-content-primary mb-1",children:e.name}),c.jsxs("p",{className:"text-sm text-content-secondary",children:["by ",e.artists.join(", ")]})]}),void 0!==e.bestMatchScore&&e.bestMatchScore>0&&c.jsx("div",{className:"text-right",children:c.jsxs("span",{className:"text-xs bg-warning-bg text-warning-text px-2 py-1 rounded",children:["Best match: ",Math.round(100*e.bestMatchScore),"%"]})})]}),c.jsxs("div",{className:"space-y-2 md:space-y-3 mb-3 md:mb-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-content-primary",children:"Reason:"}),c.jsx("p",{className:"text-sm text-error-text mt-1",children:e.reason})]}),e.bestMatchTitle&&"None"!==e.bestMatchTitle&&"Error occurred"!==e.bestMatchTitle&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-content-primary",children:"Best match found:"}),c.jsxs("p",{className:"text-sm text-content-secondary mt-1",children:['"',e.bestMatchTitle,'" by ',e.bestMatchArtist]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-content-primary",children:"Search queries tried:"}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.searchQueries.map(((e,t)=>c.jsxs("span",{className:"text-xs bg-input text-content-secondary px-2 py-1 rounded",children:['"',e,'"']},t)))})]})]}),c.jsxs("div",{className:"border-t border-border-default pt-4",children:[c.jsxs("h5",{className:"font-medium text-content-primary mb-3 flex items-center gap-2",children:[c.jsx(B,{className:"h-4 w-4"}),"Find This Track:"]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("span",{className:"text-sm font-medium text-content-primary",children:"Try these alternative searches:"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Or(e).map(((e,t)=>c.jsx("button",{onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),i(e),setTimeout((()=>i(null)),2e3)}catch(t){console.error("Failed to copy to clipboard:",t)}})(e),className:"text-xs bg-brand-primary/10 text-brand-primary px-3 py-1 rounded-full hover:bg-brand-primary/20 transition-colors cursor-pointer flex items-center gap-1",children:r===e?c.jsxs(c.Fragment,{children:[c.jsx(H,{className:"h-3 w-3"}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(G,{className:"h-3 w-3"}),e]})},t)))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-content-primary",children:"YouTube Search:"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",defaultValue:e.artists[0]+" "+e.name,className:"flex-1 px-3 py-2 bg-input border border-border-default rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Search YouTube..."}),c.jsx("button",{onClick:()=>{const t=encodeURIComponent(e.artists[0]+" "+e.name);window.open(`https://www.youtube.com/results?search_query=${t}`,"_blank")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm flex items-center justify-center",children:c.jsx(B,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-content-primary",children:"Spotify Search:"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",defaultValue:e.artists[0]+" "+e.name,className:"flex-1 px-3 py-2 bg-input border border-border-default rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Search Spotify..."}),c.jsx("button",{onClick:()=>{const t=encodeURIComponent(e.artists[0]+" "+e.name);window.open(`https://open.spotify.com/search/${t}`,"_blank")},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm flex items-center justify-center",children:c.jsx(B,{className:"h-4 w-4"})})]})]})]}),c.jsxs("div",{className:"p-4 bg-surface-card rounded-lg border border-border-default",children:[c.jsx("h6",{className:"font-medium text-content-primary mb-3",children:"Add Track Manually:"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-content-primary",children:"YouTube Video ID:"}),c.jsx("input",{type:"text",placeholder:"e.g., dQw4w9WgXcQ or https://youtu.be/dQw4w9WgXcQ",value:(null==(n=o[t])?void 0:n.youtube)||"",onChange:e=>d(t,"youtube",e.target.value),className:"w-full px-3 py-2 bg-input border border-border-default rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary"}),c.jsx("p",{className:"text-xs text-content-secondary",children:"Paste a YouTube URL or enter the 11-character video ID"}),c.jsx("button",{onClick:()=>(e=>{var t;const s=null==(t=o[e])?void 0:t.youtube;s&&a&&a(s,e)})(t),disabled:!(null==(l=o[t])?void 0:l.youtube),className:"w-full px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to YouTube Playlist"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-content-primary",children:"Spotify Track URI:"}),c.jsx("input",{type:"text",placeholder:"e.g., spotify:track:4iV5W9uYEdYUVa79Axb7Rh or https://open.spotify.com/track/4iV5W9uYEdYUVa79Axb7Rh",value:(null==(u=o[t])?void 0:u.spotify)||"",onChange:e=>d(t,"spotify",e.target.value),className:"w-full px-3 py-2 bg-input border border-border-default rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary"}),c.jsx("p",{className:"text-xs text-content-secondary",children:"Paste a Spotify track URL or enter the track URI"}),c.jsx("button",{onClick:()=>(e=>{var t;const a=null==(t=o[e])?void 0:t.spotify;a&&s&&s(a,e)})(t),disabled:!(null==(m=o[t])?void 0:m.spotify),className:"w-full px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Spotify Playlist"})]})]})]})]})]},t)}))})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-t border-border-default bg-surface-alt",children:[c.jsxs("div",{className:"text-sm text-content-secondary",children:[e.length," failed tracks"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:()=>{e.map((e=>encodeURIComponent(e.artists[0]+" "+e.name))).forEach((e=>{window.open(`https://www.youtube.com/results?search_query=${e}`,"_blank")}))},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm flex items-center gap-2 whitespace-nowrap shadow-sm",children:[c.jsx(V,{className:"h-4 w-4"}),"Search All on YouTube"]}),c.jsx("button",{onClick:t,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-primaryHover transition-colors text-sm shadow-sm",children:"Close"})]})]})]})})},Hr=({width:e=36,height:t=36,className:a})=>c.jsxs("svg",{width:e,height:t,viewBox:"0 0 36 36",fill:"currentColor",className:a,xmlns:"http://www.w3.org/2000/svg",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"soundswapp-grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--brand-primary)"}),c.jsx("stop",{offset:"35%",stopColor:"var(--brand-accent-pink)"}),c.jsx("stop",{offset:"100%",stopColor:"var(--brand-secondary)"})]}),c.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"1.8",result:"blur"}),c.jsx("feOffset",{dy:"1",result:"offsetBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"offsetBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsx("pattern",{id:"bg-pattern",patternUnits:"userSpaceOnUse",width:"10",height:"10",children:c.jsx("path",{d:"M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2",stroke:"rgba(255,255,255,0.03)",strokeWidth:"0.5"})})]}),c.jsx("circle",{cx:"18",cy:"18",r:"18",fill:"url(#soundswapp-grad)",opacity:"0.9"}),c.jsx("circle",{cx:"18",cy:"18",r:"18",fill:"url(#bg-pattern)",opacity:"0.5"}),c.jsxs("g",{filter:"url(#glow)",transform:"translate(0.5, 0.5)",children:[c.jsx("path",{d:"M12.5 23.5 C10 23.5 8.5 21.5 9 19 C9.5 16.5 12.5 15.5 15 15.5 C17.5 15.5 19.5 14 19 11.5 C18.5 9 16.5 7.5 14 7.5",stroke:"white",fill:"none",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M12.8 23 C10.5 23 9.3 21.3 9.7 19.2 C10.1 17.1 12.8 16.1 15 16.1 C17.2 16.1 18.8 14.7 18.4 12.5 C18.0 10.3 16.2 8.5 14 8.5",stroke:"rgba(255,255,255,0.5)",fill:"none",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M23.5 23.5 C26 23.5 27.5 21.5 27 19 C26.5 16.5 23.5 15.5 21 15.5 C18.5 15.5 16.5 14 17 11.5 C17.5 9 19.5 7.5 22 7.5",stroke:"white",fill:"none",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M23.2 23 C25.5 23 26.7 21.3 26.3 19.2 C25.9 17.1 23.2 16.1 21 16.1 C18.8 16.1 17.2 14.7 17.6 12.5 C18.0 10.3 19.8 8.5 22 8.5",stroke:"rgba(255,255,255,0.5)",fill:"none",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),Gr=({children:e,onKeyDown:t,onClick:a,className:s,...r})=>{const i=l.useCallback((e=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),null==t||t(e),!e.defaultPrevented&&a&&a(e)):t&&t(e)}),[t,a]);return c.jsx("div",{tabIndex:0,role:"button",className:Hs("focus:outline-none focus:ring-2 focus:ring-brand-primary-action focus:ring-offset-2 focus:ring-offset-background-primary rounded-lg transition-all",s),onKeyDown:i,onClick:a,...r,children:e})},Vr=({platform:e,isConnected:t,onConnect:a,className:s})=>{const{isDark:r}=qt(),i={spotify:{icon:c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",style:{height:24,width:"auto",objectFit:"contain",display:"block",minWidth:"24px"},className:"h-6 w-auto"}),text:"Spotify",bgColor:"bg-platform-spotify hover:bg-platform-spotify-hover",bgColorConnected:"bg-platform-spotify-connected text-content-on-platform-spotify-connected"},youtube:{icon:c.jsx("img",{src:t?"/images/yt_logo_rgb_dark.png":r?"/images/yt_logo_mono_dark.png":"/images/yt_logo_mono_light.png",alt:"YouTube",style:{height:24,width:"auto",objectFit:"contain",display:"block",minWidth:"24px"},className:"h-6 w-auto"}),text:"YouTube",bgColor:"bg-platform-youtube hover:bg-platform-youtube-hover",bgColorConnected:"bg-platform-youtube-connected text-content-on-platform-youtube-connected"},soundcloud:{icon:c.jsx(T,{className:"h-5 w-5"}),text:"SoundCloud",bgColor:"bg-platform-soundcloud hover:bg-platform-soundcloud-hover",bgColorConnected:"bg-platform-soundcloud-connected text-content-on-platform-soundcloud-connected"}}[e];return c.jsxs("button",{onClick:a,disabled:t,className:Hs("flex items-center justify-center gap-2 px-5 py-3 rounded-lg font-medium transition-colors",t?i.bgColorConnected:`${i.bgColor} text-content-inverse`,"focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background-primary","spotify"===e?"focus:ring-platform-spotify":"youtube"===e?"focus:ring-platform-youtube":"soundcloud"===e?"focus:ring-platform-soundcloud":"focus:ring-brand-primary-action",s),"aria-label":`${t?"Connected to":"Connect to"} ${i.text}`,children:[i.icon,c.jsx("span",{children:t?"Connected":`Connect ${i.text}`}),t&&c.jsx(p,{className:"h-5 w-5 text-current"})]})},Wr=e=>({name:e.name,artists:e.artists,popularity:e.popularity,duration_ms:e.duration_ms,explicit:e.explicit,album:e.album,releaseYear:e.releaseYear?Number(e.releaseYear):void 0,genres:e.genres,artistImages:e.artistImages}),qr=e=>{let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return`hsl(${Math.abs(t%360)}, 70%, 50%)`},Kr=e=>{const t={},a={},s={},r={},i={},o=new Set;let n=e.length,l=0,c=0,d=0,u=0,m=0,h=0,x=1/0,p=null,g=null,y=null,f=null,b=0,v=100,w="9999",j="0",N=null,k=null;const S={short:0,medium:0,long:0},T={low:0,medium:0,high:0};e.forEach((e=>{if(e.artists.forEach(((s,r)=>{var i;t[s]=(t[s]||0)+1,(null==(i=e.artistImages)?void 0:i[r])&&!a[s]&&(a[s]=e.artistImages[r])})),e.genres&&e.genres.forEach((e=>{o.add(e),s[e]=(s[e]||0)+1})),e.duration_ms){m+=e.duration_ms;const t=e.duration_ms/1e3/60;t<3?S.short++:t<=5?S.medium++:S.long++,e.duration_ms>h&&(h=e.duration_ms,p=e),e.duration_ms<x&&(x=e.duration_ms,g=e)}if(void 0!==e.popularity&&(u+=e.popularity,d++,e.popularity<=33?T.low++:e.popularity<=66?T.medium++:T.high++,e.popularity>b&&(b=e.popularity,y=e),e.popularity<v&&(v=e.popularity,f=e)),e.releaseYear){const t=e.releaseYear.toString();r[t]=(r[t]||0)+1,t<w&&(w=t,N=e),t>j&&(j=t,k=e)}e.explicit?l++:c++,e.album&&(i[e.album]=(i[e.album]||0)+1)}));const C={},E=Object.values(s).reduce(((e,t)=>e+t),0);Object.entries(s).forEach((([e,t])=>{C[e]=t/E*100}));const P=Object.entries(r).map((([t,a])=>({year:t,count:a,avgPopularity:e.filter((e=>{var a;return(null==(a=e.releaseYear)?void 0:a.toString())===t&&void 0!==e.popularity})).reduce(((e,t)=>e+(t.popularity||0)),0)/a}))).sort(((e,t)=>e.year.localeCompare(t.year))),A={};Object.entries(r).forEach((([e,t])=>{const a=e.slice(0,3)+"0";A[a]=(A[a]||0)+t}));const _=Array.from(o).map((e=>({name:e,count:s[e],color:qr(e),percentage:C[e]}))).sort(((e,t)=>t.count-e.count)),I=Object.entries(t).map((([t,s])=>{var r;return{name:t,count:s,image:a[t],popularity:null==(r=e.find((e=>e.artists.includes(t))))?void 0:r.popularity}})).sort(((e,t)=>t.count-e.count)).slice(0,10),R=Object.entries(i).map((([t,a])=>{const s=e.find((e=>e.album===t)),r=(null==s?void 0:s.releaseYear)?Number(s.releaseYear):void 0;return{name:t,trackCount:a,year:isNaN(r)?void 0:r}})).sort(((e,t)=>t.trackCount-e.trackCount)).slice(0,5);return{totalTracks:n,avgPopularity:d?u/d:0,totalDuration:Math.round(m/6e4),genres:_,topArtists:I,releaseYears:r,totalGenreMentions:E,mostPopularTrack:y?Wr(y):void 0,leastPopularTrack:f?Wr(f):void 0,longestTrack:p?Wr(p):void 0,shortestTrack:g?Wr(g):void 0,explicitCount:l,nonExplicitCount:c,topAlbums:R,avgTrackLength:m/n,oldestTrack:N?Wr(N):void 0,newestTrack:k?Wr(k):void 0,explicitPercentage:l/n*100,uniqueArtists:Object.keys(t).length,uniqueAlbums:Object.keys(i).length,decadeDistribution:A,genrePercentages:C,yearlyTrends:P,durationCategories:S,popularityRanges:T}},Xr=()=>{var e,t,a,s,r,i,o;const{isDark:n}=qt(),d=b(),[m,h]=l.useState(!1);l.useEffect((()=>{const e=()=>{const e=window.innerWidth<768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);h(e),e?document.body.classList.add("is-mobile"):document.body.classList.remove("is-mobile")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const{user:x,isAuthenticated:g,hasSpotifyAuth:v,hasYouTubeAuth:w,signOut:j,disconnectFromSpotify:N,disconnectFromYouTube:k,isConnectingSpotify:S,isConnectingYouTube:C,spotifyError:E,youtubeError:P,spotifyUserProfile:A,youtubeUserProfile:_}=ya(),I=Fs(),{state:R,fetchSpotifyPlaylists:L,selectPlaylist:F,startConversion:M,fetchConversionHistory:D,dispatch:U}=I,z=I.fetchYouTubePlaylists||(()=>{console.warn("fetchYouTubePlaylists not available")}),[O,H]=l.useState(""),[G,ue]=l.useState(""),[me,he]=l.useState(!1),[xe,pe]=l.useState([]),[ge,ye]=l.useState(!1),[fe,be]=l.useState(1),[ve,we]=l.useState(!1),[je,Ne]=l.useState(!1),[ke,Se]=l.useState(""),[Te,Ce]=l.useState(""),[Ee,Pe]=l.useState(null),Ae=l.useMemo((()=>[{key:"spotify",label:"Spotify",color:"bg-green-500",icon:$},{key:"youtube",label:"YouTube",color:"bg-red-500",icon:W}]),[]),[_e,Ie]=l.useState("spotify"),[Re,Le]=l.useState("youtube");l.useEffect((()=>{if(Re===_e){const e=Ae.find((e=>e.key!==_e));e&&Le(e.key)}localStorage.setItem("source_platform",_e),localStorage.setItem("destination_platform",Re)}),[_e,Re,Ae]),l.useEffect((()=>{const e=localStorage.getItem("source_platform"),t=localStorage.getItem("destination_platform"),a=localStorage.getItem("last_playlist_url");e&&Ae.some((t=>t.key===e))&&Ie(e),t&&Ae.some((e=>e.key===t))&&t!==_e&&Le(t),a&&H(a)}),[Ae,_e]),l.useEffect((()=>{var e,t;document.title=`Playlist Converter - Convert ${null==(e=Ae.find((e=>e.key===_e)))?void 0:e.label} to ${null==(t=Ae.find((e=>e.key===Re)))?void 0:t.label}`}),[_e,Re,Ae]);const Fe=l.useRef(!1);l.useEffect((()=>{if(g&&!Fe.current){Fe.current=!0;(async()=>{try{await D()}catch(e){console.error("Error loading conversion history:",e)}})()}}),[g,D]),l.useEffect((()=>{if(R.selectedPlaylistId&&R.spotifyPlaylists){const e=R.spotifyPlaylists.find((e=>e.id===R.selectedPlaylistId));e&&(Se(`${e.name} (Converted)`),Ce(`Converted from ${_e} using SoundSwapp`))}}),[R.selectedPlaylistId,R.spotifyPlaylists,_e]),l.useEffect((()=>{if(R.status===As.SUCCESS){he(!0),ye(!1);const e="spotify"===Re,t=e?R.spotifyPlaylistUrl:R.youtubePlaylistUrl;De({type:"success",title:"Conversion Complete",message:`Your playlist has been successfully converted to ${e?"Spotify":"YouTube"}!`,actionLabel:"View Playlist",onAction:()=>{t&&window.open(t,"_blank")}}),be(4)}}),[R.status,R.youtubePlaylistUrl,R.spotifyPlaylistUrl,Re]),l.useEffect((()=>{const e=[As.LOADING_TRACKS,As.MATCHING_TRACKS,As.CREATING_PLAYLIST];ye(e.includes(R.status))}),[R.status]),l.useEffect((()=>{R.error&&De({type:"error",title:"Conversion Error",message:R.error||"An error occurred during conversion.",actionLabel:"Try Again"})}),[R.error]),l.useEffect((()=>{2===fe&&R.tracks.length>0&&!ge&&setTimeout((()=>{var e;be(3),null==(e=document.getElementById("playlist-wizard-card"))||e.scrollIntoView({behavior:"smooth",block:"center"})}),500),R.selectedPlaylistId&&2===fe&&("spotify"===_e?localStorage.setItem("last_playlist_url",O):"youtube"===_e&&localStorage.setItem("last_playlist_url",G))}),[R.tracks.length,ge,fe,R.selectedPlaylistId,O,G,_e]);const Me=l.useCallback((e=>{pe((t=>t.filter((t=>t.id!==e))))}),[]),De=l.useCallback((({type:e,message:t,title:a,actionLabel:s,onAction:r,duration:i=5e3})=>{const o=Date.now(),n={id:o,type:e,title:a||"",message:t||"",actionLabel:s,onAction:r};pe((e=>[...e,n])),setTimeout((()=>{Me(o)}),i)}),[Me]),Ue=l.useCallback(((e,t)=>{const a={success:{title:"Success",message:t||"Operation completed successfully!",actionLabel:"Ok"},error:{title:"Error",message:t||"Something went wrong. Please try again.",actionLabel:"Retry"},warning:{title:"Warning",message:t||"Some tracks might not have been matched correctly.",actionLabel:"Review"},info:{title:"Information",message:t||"Your conversion is being processed in the background.",actionLabel:"Details"}};De({type:e,title:a[e].title,message:a[e].message,actionLabel:a[e].actionLabel})}),[De]),Ye=l.useCallback((async e=>{U({type:"SET_STATUS",payload:As.LOADING_TRACKS}),ye(!0),U({type:"SELECT_PLAYLIST",payload:e});const t=await ns();if(!t)return Ue("error","YouTube authentication token not found. Please reconnect."),void ye(!1);const a=new AbortController;setTimeout((()=>a.abort()),3e4),async function(e,t){let a=[],s="";try{do{const r=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails&maxResults=50&playlistId=${e}`+(s?`&pageToken=${s}`:""),i=await fetch(r,{headers:{Authorization:`Bearer ${t}`}});if(!i.ok)throw new Error(`YouTube API error: ${i.status}`);const o=await i.json();o.items&&o.items.length>0&&(a=a.concat(o.items)),s=o.nextPageToken||""}while(s);return a}catch(r){return console.error("Error fetching playlist items (pagination):",r),a}}(e,t).then((async e=>{if(!e||0===e.length)return console.warn("No tracks found in playlist or playlist is private/empty."),ye(!1),void De({type:"error",title:"No tracks found",message:"This playlist appears to be empty or private."});const a=e.map((e=>{var t,a,s;return(null==(a=null==(t=e.snippet)?void 0:t.resourceId)?void 0:a.videoId)||(null==(s=e.contentDetails)?void 0:s.videoId)})).filter(Boolean),s=[];for(let t=0;t<a.length;t+=50)s.push(a.slice(t,t+50));let r={};for(const n of s)try{const e=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${n.join(",")}`,{headers:{Authorization:`Bearer ${t}`}});if(e.ok){(await e.json()).items.forEach((e=>{e.id&&e.snippet&&e.snippet.publishedAt&&(r[e.id]=parseInt(e.snippet.publishedAt.split("-")[0],10))}))}}catch(o){console.error("Error fetching video details batch:",o)}const i=e.map((e=>{var t,a,s,i,o,n,l;let c=(null==(t=e.snippet)?void 0:t.title)||"",d=[(null==(a=e.snippet)?void 0:a.videoOwnerChannelTitle)||"Unknown"],u=c;const m=[" - "," ‚Äì ",": ",' "'," '"," // "];for(const r of m)if(c.includes(r)){const e=c.split(r);if(e.length>=2){d=[e[0].trim()],u=e.slice(1).join(r).trim().replace(/^['"]/,"").replace(/['"]$/,"");break}}const h=(null==(i=null==(s=e.snippet)?void 0:s.resourceId)?void 0:i.videoId)||(null==(o=e.contentDetails)?void 0:o.videoId);return{id:e.id||`yt-${Math.random().toString(36).substring(2,9)}`,name:u,artists:d,album:(null==(n=e.snippet)?void 0:n.channelTitle)||"",duration_ms:0,popularity:0,explicit:!1,searchQuery:`${d[0]} ${u}`,videoId:h,releaseYear:null==(l=r[h])?void 0:l.toString()}}));U({type:"SET_TRACKS",payload:i}),ye(!1),setTimeout((()=>{var e;be(3),null==(e=document.getElementById("playlist-wizard-card"))||e.scrollIntoView({behavior:"smooth",block:"center"})}),500)})).catch((e=>{ye(!1),console.error("Error fetching YouTube playlist tracks:",e);let t="An error occurred trying to load the YouTube playlist.";"AbortError"===e.name?t="Request timed out. Please try again or check your internet connection.":e.message&&e.message.includes("401")?t="YouTube authorization expired. Please reconnect your YouTube account.":e.message&&e.message.includes("403")?t="You don't have permission to access this playlist.":e.message&&e.message.includes("404")&&(t="Playlist not found. It may have been deleted or set to private."),De({type:"error",title:"Failed to load playlist",message:t})}))}),[U,De,Ue]);const $e=l.useCallback((async e=>{const t="spotify"===e?O:G;if(t.trim())try{const s=((e,t)=>{if(!e)return null;try{if("spotify"===t){let t=e.match(/spotify\.com\/playlist\/([a-zA-Z0-9_-]+)/);if(!t&&e.includes("spotify:playlist:")&&(t=e.match(/spotify:playlist:([a-zA-Z0-9_-]+)/)),t&&t[1])return t[1].split(/[/?#]/)[0];if(/^[a-zA-Z0-9]{22}$/.test(e))return e}else if("youtube"===t){const t=e.match(/[?&]list=([a-zA-Z0-9_-]+)/);if(t&&t[1])return t[1];if(/^[a-zA-Z0-9_-]{24,34}$/.test(e))return e}}catch(a){console.error("Error extracting playlist ID:",a)}return null})(t,e);if(console.log("Extracted playlist ID:",s,"from URL:",t),!s)return void Ue("error",`Invalid ${e} playlist URL format`);if("spotify"===e&&22!==s.length&&Ue("warning","The playlist ID format looks unusual, but trying anyway..."),Ue("info","Fetching playlist details..."),ye(!0),"spotify"===e)try{await F(s),console.log("Playlist import successful for ID:",s),ye(!1)}catch(a){console.error("Error importing playlist:",a),Ue("error",`Failed to import playlist: ${a instanceof Error?a.message:String(a)}`),ye(!1)}else"youtube"===e&&Ye(s)}catch(s){console.error(`Error parsing ${e} URL:`,s),Ue("error",`Failed to process ${e} URL`),ye(!1)}else Ue("error",`Please enter a ${e} playlist URL`)}),[O,G,Ue,F,Ye]),ze=l.useCallback((()=>{try{if(!g)return console.warn("User not authenticated when trying to connect to Spotify"),Ue("error","Please sign in to your account first before connecting to Spotify"),sessionStorage.setItem("connect_after_login","spotify"),void d("/login");setTimeout((()=>{console.log("Initiating Spotify auth with user state:",{isAuthenticated:g,user:x}),ps()}),500)}catch(e){console.error("Error initiating Spotify auth:",e),Ue("error","Failed to connect to Spotify")}}),[Ue,g,x,d]),Oe=l.useCallback((()=>{try{window.location.href=as()}catch(e){console.error("Error initiating YouTube auth:",e),Ue("error","Failed to connect to YouTube")}}),[Ue]),Be=l.useCallback((()=>{switch(R.status){case As.LOADING_PLAYLISTS:case As.SELECTING_PLAYLIST:case As.IDLE:return 1;case As.LOADING_TRACKS:return 2;case As.MATCHING_TRACKS:return 3;case As.CREATING_PLAYLIST:case As.SUCCESS:return 4;default:return 1}}),[R.status]),He=l.useCallback((async()=>{if(R.selectedPlaylistId)if("spotify"!==_e||v)if("youtube"!==Re||w)try{ye(!0),Ue("info","Starting conversion process..."),await M()}catch(e){console.error("Error starting conversion:",e),ye(!1),e instanceof Error?Ue("error",`Conversion failed: ${e.message}`):Ue("error","Conversion failed. Please try again.")}else Ue("error","Please connect to YouTube first");else Ue("error","Please connect to Spotify first");else Ue("error","Please select a playlist first")}),[R.selectedPlaylistId,_e,Re,v,w,Ue,M]);l.useEffect((()=>{g&&v&&L()}),[g,v,L]),l.useEffect((()=>{g&&w&&"function"==typeof z&&z()}),[g,w,z]),l.useEffect((()=>{if(g&&!ge){const e=sessionStorage.getItem("connect_after_login");e&&(console.log("Auto-connecting to",e,"after login"),sessionStorage.removeItem("connect_after_login"),setTimeout((()=>{"spotify"===e?ze():"youtube"===e&&Oe()}),1e3))}}),[g,ge,ze,Oe]);const Ge=l.useCallback((()=>({sourceAuth:"spotify"===_e?v:w,destinationAuth:"spotify"===Re?v:w})),[_e,Re,v,w]),Ve=l.useCallback((()=>({connectToSource:"spotify"===_e?ze:Oe,connectToDestination:"spotify"===Re?ze:Oe})),[_e,Re,ze,Oe]),{sourceAuth:We,destinationAuth:qe}=Ge(),{connectToSource:Ke,connectToDestination:Xe}=Ve(),Qe=l.useMemo((()=>{var e;return"spotify"===_e?null==(e=R.spotifyPlaylists)?void 0:e.find((e=>e.id===R.selectedPlaylistId)):(R.youtubePlaylists||[]).find((e=>e.id===R.selectedPlaylistId))}),[R.spotifyPlaylists,R.youtubePlaylists,R.selectedPlaylistId,_e]),Je=l.useMemo((()=>[{number:1,label:"Select Source",help:"Choose the platform you want to import your playlist from (Spotify or YouTube).",icon:c.jsx(q,{size:24}),className:"text-white"},{number:2,label:"Import Playlist",help:"Paste your playlist URL or select from your library to import tracks.",icon:c.jsx(K,{size:24}),className:"text-white"},{number:3,label:"Review Tracks",help:"Review the imported tracks and make sure everything looks correct.",icon:c.jsx(X,{size:24}),className:"text-white"},{number:4,label:"Export Playlist",help:"Export your playlist to the destination platform with one click.",icon:c.jsx(Q,{size:24}),className:"text-white"}]),[]),Ze=l.useMemo((()=>[{title:"Modern UI",description:"Sleek, responsive design that works on all devices",icon:c.jsx(q,{size:24}),color:"bg-blue-100 text-blue-600"},{title:"Type-Safe",description:"Built with TypeScript and React for maximum reliability",icon:c.jsx(J,{size:24}),color:"bg-green-100 text-green-600"},{title:"Privacy First",description:"We don't store your playlists or personal data",icon:c.jsx(Z,{size:24}),color:"bg-yellow-100 text-yellow-600"},{title:"Fast Conversion",description:"Convert your playlists in seconds with our optimized algorithms",icon:c.jsx(Y,{size:24}),color:"bg-red-100 text-red-600"}]),[]),et=l.useMemo((()=>[{title:"1. Paste Playlist URL",description:"Copy the link to your playlist and paste it into our converter",icon:c.jsx(ee,{size:24}),color:"bg-green-100 text-green-600"},{title:"2. Fetch & Verify",description:"We'll retrieve all songs from your playlist and display them for verification",icon:c.jsx(B,{size:24}),color:"bg-blue-100 text-blue-600"},{title:"3. Create New Playlist",description:"Create a new playlist with matching songs with just one click",icon:c.jsx(te,{size:24}),color:"bg-red-100 text-red-600"}]),[]),tt=l.useCallback((()=>{H(""),ue(""),Se(""),Ce(""),be(1),ye(!1),U({type:"RESET"})}),[U]);l.useEffect((()=>{R.tracks.length>0&&ge&&(ye(!1),setTimeout((()=>{var e;be(3),null==(e=document.getElementById("playlist-wizard-card"))||e.scrollIntoView({behavior:"smooth",block:"center"})}),100))}),[R.tracks]);const at=l.useCallback((()=>{v&&w?j():(v||w)&&v?Oe():ze()}),[v,w,j,ze,Oe]);return c.jsxs("div",{className:Hs("min-h-screen transition-colors duration-300 relative overflow-hidden","bg-white dark:bg-gray-900 text-gray-900 dark:text-white"),children:[c.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",children:c.jsx(Xs,{color:"var(--particle-color, #A855F7)",density:m?"low":"medium",className:"absolute inset-0"})}),c.jsx(ir,{})," ",c.jsxs("section",{id:"auth",className:Hs("py-12 px-4 bg-transparent relative overflow-hidden"),children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[c.jsx(Ht.div,{className:"absolute -top-20 -right-20 w-[40vw] h-[40vw] rounded-full opacity-10 bg-brand-blob-1 filter blur-[80px]",animate:{opacity:[.05,.15,.05],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),c.jsx(Ht.div,{className:"absolute -bottom-20 -left-20 w-[45vw] h-[45vw] rounded-full opacity-10 bg-brand-blob-2 filter blur-[100px]",animate:{opacity:[.1,.05,.1],scale:[1,1.15,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut",delay:5}})]}),c.jsxs("div",{className:"container mx-auto max-w-5xl relative z-10",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(Ht.h2,{className:"text-3xl lg:text-4xl font-bold mb-6 text-content-primary",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},children:c.jsx(Ur,{variant:"default",children:"Connect Your Music Accounts"})}),c.jsx(Ht.p,{className:"text-lg text-content-secondary mb-6 max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},children:"Sign in to both platforms to easily convert playlists between services"}),c.jsx(Ht.p,{className:"text-md mb-12 max-w-2xl mx-auto text-content-tertiary",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},viewport:{once:!0},children:"Your account credentials are securely handled and we only request read-only access to your playlists"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8",children:[c.jsx(Mr,{platform:"spotify",connected:v,onConnect:ze,onDisconnect:N,isConnecting:S,connectionError:E||void 0,userEmail:(null==A?void 0:A.email)||(null==x?void 0:x.email)||void 0,userName:(null==A?void 0:A.displayName)||(null==x?void 0:x.displayName)||void 0,userPhoto:(null==A?void 0:A.imageUrl)||(null==x?void 0:x.photoURL)||void 0,userMeta:v?{displayName:null==A?void 0:A.displayName,imageUrl:null==A?void 0:A.imageUrl,email:null==A?void 0:A.email,country:(null==A?void 0:A.country)||"Unknown",product:(null==A?void 0:A.product)||"free",publicPlaylists:(null==A?void 0:A.publicPlaylists)||0,privatePlaylists:(null==A?void 0:A.privatePlaylists)||0,collaborativePlaylists:(null==A?void 0:A.collaborativePlaylists)||0,totalPlaylists:(null==A?void 0:A.totalPlaylists)||0,savedTracks:(null==A?void 0:A.savedTracks)||0,savedAlbums:(null==A?void 0:A.savedAlbums)||0,followingArtists:(null==A?void 0:A.followingArtists)||0,accountType:(null==A?void 0:A.accountType)||"Free",explicitContentFilter:(null==A?void 0:A.explicitContentFilter)||"Unknown",audioQuality:(null==A?void 0:A.audioQuality)||"Standard",offlineDownloads:(null==A?void 0:A.offlineDownloads)||"Not Available",deviceLimit:(null==A?void 0:A.deviceLimit)||1,topGenres:(null==A?void 0:A.topGenres)||["Music Lover"],lastActive:(null==A?void 0:A.lastActive)||"Data not available",listeningTime:(null==A?void 0:A.listeningTime)||"Data not available",monthlyListeners:(null==A?void 0:A.monthlyListeners)||"Not applicable",nextBilling:(null==A?void 0:A.nextBilling)||"Not available",crossfade:(null==A?void 0:A.crossfade)||"Not available",equalizer:(null==A?void 0:A.equalizer)||"Not available",plan:(null==A?void 0:A.product)||"free",subscription:(null==A?void 0:A.accountType)||"Free",accountCountry:(null==A?void 0:A.country)||"Unknown",totalTracks:(null==A?void 0:A.savedTracks)||0,followedPlaylists:(null==A?void 0:A.followingArtists)||0,favoriteArtists:(null==A?void 0:A.followingArtists)||0,recentlyPlayed:"Last 30 days",socialFeatures:"Enabled",dataSaver:!1,privateSession:!1,lastSync:(null==A?void 0:A.lastActive)||"Unknown",paymentMethod:"Not available",autoRenew:!0,familyPlanMembers:null,studentVerification:!1,explicit_content:"Enabled"===(null==A?void 0:A.explicitContentFilter)}:void 0}),c.jsx(Mr,{platform:"youtube",connected:w,onConnect:Oe,onDisconnect:k,isConnecting:C,connectionError:P||void 0,userEmail:(null==_?void 0:_.email)||(null==x?void 0:x.email)||void 0,userName:(null==_?void 0:_.displayName)||(null==x?void 0:x.displayName)||void 0,userPhoto:(null==_?void 0:_.imageUrl)||(null==x?void 0:x.photoURL)||void 0,userMeta:w?{displayName:null==_?void 0:_.displayName,imageUrl:null==_?void 0:_.imageUrl,email:null==_?void 0:_.email,plan:"youtube",lastSignInTime:(new Date).toISOString(),subscriberCount:1500,videoCount:45,playlistCount:12,viewCount:25e3,channelType:"personal",monetizationStatus:"disabled",verificationStatus:"unverified",contentRating:"standard",language:"English",location:"United States",joinDate:"2020-01-01",lastUploadDate:"2024-01-15",averageViews:1500,topCategories:["Music","Entertainment","Gaming"],collaborationStatus:!1,liveStreamingEnabled:!0,communityTabEnabled:!0,membershipsEnabled:!1,superChatEnabled:!1,channelMembershipLevel:"none"}:void 0})]}),c.jsxs(Ht.div,{className:"mt-12 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},viewport:{once:!0},children:[c.jsx("p",{className:"text-content-tertiary mb-4",children:"Once connected, you can convert playlists in just a few clicks"}),c.jsx(ar,{variant:"primary",onClick:at,disabled:S||C,isLoading:S||C,"aria-label":v&&w?"Logout":"Connect Missing Accounts",children:S||C?c.jsx(c.Fragment,{children:c.jsx("span",{children:"Connecting..."})}):v&&w?c.jsxs(c.Fragment,{children:[c.jsx(ae,{size:16,className:"inline-block mr-2"}),"Logout"]}):"Connect Missing Accounts"}),(!v||!w)&&!S&&!C&&c.jsxs("p",{className:Hs("mt-3 text-sm flex items-center justify-center","text-warning-text"),children:[c.jsx(y,{size:16,className:"inline-block mr-1 text-warning-icon"})," ",v||w?v?"Connect your YouTube account to continue":"Connect your Spotify account to continue":"You need to connect both accounts to convert playlists"]})]})]})]}),g&&c.jsx("section",{id:"converter",className:Hs("py-16 px-4 scroll-mt-20","bg-background-secondary"),"aria-labelledby":"converter-title",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsx("h2",{id:"converter-title",className:"sr-only",children:"Playlist Converter"}),c.jsx("div",{className:Hs("sticky top-16 z-20 py-4 mb-12 rounded-lg backdrop-blur-md shadow-xl","bg-surface-card/80 border border-border-default"),role:"navigation","aria-label":"Conversion Steps",children:c.jsx("div",{className:"flex items-center justify-center flex-wrap gap-x-4 gap-y-2 px-2",children:Je.map(((e,t)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:Hs("rounded-full w-10 h-10 flex items-center justify-center font-bold transition-all duration-300 ease-in-out border-2",t+1===fe?"bg-stepper-active-icon-bg text-stepper-active-icon border-stepper-active-ring ring-4 ring-stepper-active-ring/50 ring-offset-2 ring-offset-surface-card scale-110":Be()>t+1?"bg-stepper-completed-bg text-stepper-completed-icon border-transparent":"bg-stepper-inactive-bg border-border-default text-stepper-inactive-icon hover:border-stepper-active-ring/50","focus:outline-none focus:ring-2 focus:ring-stepper-active-ring"),onClick:()=>be(t+1),disabled:t+1>Be()&&t+1!==fe||ge,"aria-label":`Go to step ${t+1}: ${e.label}`,"aria-current":t+1===fe?"step":void 0,children:t+1<Be()&&t+1!==fe?c.jsx(p,{size:20}):e.icon}),c.jsxs("span",{className:Hs("font-medium text-sm hidden md:flex items-center",t+1===fe?"text-brand-primary":"text-content-secondary"),children:[e.label,c.jsxs("div",{className:"relative ml-1.5 cursor-help group",children:[c.jsx(f,{size:14,className:Hs("text-content-tertiary group-hover:text-brand-primary transition-colors",t+1===fe?"text-brand-primary":"")}),c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2.5 rounded-md bg-tooltip text-tooltip-text text-xs shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-30 pointer-events-none",children:e.help})]})]}),t<Je.length-1&&c.jsx(se,{size:20,className:"mx-1 text-content-tertiary hidden md:block"})]},e.label)))})}),c.jsx("div",{id:"playlist-wizard-card",children:c.jsxs(or,{className:"p-6 sm:p-8 max-w-2xl mx-auto mb-8 rounded-2xl bg-surface-card border border-border-default shadow-xl backdrop-blur-lg",children:[R.error&&c.jsxs("div",{className:Hs("mb-6 p-4 rounded-lg flex items-start gap-3","bg-error-bg text-error-text border border-error-border"),role:"alert","aria-live":"assertive",children:[c.jsx(y,{size:20,className:"flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-md",children:"Conversion Error"}),c.jsx("p",{className:"text-sm",children:R.error})]})]}),c.jsxs(Gt,{mode:"wait",children:[1===fe&&c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:c.jsxs("div",{children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:Hs("text-2xl font-bold mb-2","text-white"),children:Je[0].label}),c.jsx("p",{className:Hs("text-white/90","text-lg"),children:Je[0].help})]}),c.jsxs("div",{className:"grid sm:grid-cols-2 gap-8 mb-8",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xl font-bold mb-3 text-white",children:"Source Platform"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs(ar,{variant:"spotify"===_e?"soundswapp":"secondary",onClick:()=>Ie("spotify"),disabled:!1,className:Hs("flex flex-1 justify-center items-center gap-3 py-4","bg-surface-card dark:bg-surface-card-dark border-2","spotify"===_e?"border-[#1DB954] shadow-[0_0_15px_rgba(29,185,84,0.3)]":"border-border dark:border-border-dark","hover:bg-surface-hover dark:hover:bg-surface-hover-dark transition-all duration-200","text-lg font-medium"),"aria-label":"Select Spotify as source platform",children:[c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",style:{height:24,width:"auto",objectFit:"contain",display:"block",minWidth:"24px"},className:"h-6 w-auto"}),c.jsx("span",{className:Hs("spotify"===_e?"text-[#1DB954] dark:text-[#1DB954]":"text-content-primary dark:text-white"),children:"Spotify"})]}),c.jsx(ar,{variant:"youtube"===_e?"soundswapp":"secondary",onClick:()=>Ie("youtube"),disabled:!1,className:Hs("flex flex-1 justify-center items-center gap-3 py-4","bg-surface-card dark:bg-surface-card-dark border-2","youtube"===_e?"border-[#FF0000] shadow-[0_0_15px_rgba(255,0,0,0.3)]":"border-border dark:border-border-dark","hover:bg-surface-hover dark:hover:bg-surface-hover-dark transition-all duration-200","text-lg font-medium"),"aria-label":"Select YouTube as source platform",children:c.jsx("img",{src:n?"/images/yt_logo_rgb_dark.png":"/images/yt_logo_rgb_light.png",alt:"YouTube",style:{height:24,width:"auto",objectFit:"contain",display:"block",minWidth:"24px"},className:Hs("h-6 w-auto","youtube"===_e?"":"opacity-70")})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xl font-bold mb-3 text-white",children:"Destination Platform"}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs(ar,{onClick:()=>Le("spotify"),disabled:!v||"spotify"===_e,variant:"spotify"===Re?"soundswapp":"secondary",className:Hs("flex flex-1 justify-center items-center gap-3 py-4","bg-surface-card dark:bg-surface-card-dark border-2","spotify"===Re?"border-[#1DB954] shadow-[0_0_15px_rgba(29,185,84,0.3)]":"border-border dark:border-border-dark","hover:bg-surface-hover dark:hover:bg-surface-hover-dark transition-all duration-200","text-lg font-medium",(!v||"spotify"===_e)&&"opacity-50 cursor-not-allowed"),"aria-label":"Select Spotify as destination platform",children:[c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",style:{height:24,width:"auto",objectFit:"contain",display:"block",minWidth:"24px"},className:"h-6 w-auto"}),c.jsx("span",{className:"text-green-500 dark:text-green-400",children:"Spotify"})]}),c.jsx(ar,{onClick:()=>Le("youtube"),disabled:!w||"youtube"===_e,variant:"youtube"===Re?"soundswapp":"secondary",className:Hs("flex flex-1 justify-center items-center gap-3 py-4","bg-surface-card dark:bg-surface-card-dark border-2","youtube"===Re?"border-[#FF0000] shadow-[0_0_15px_rgba(255,0,0,0.3)]":"border-border dark:border-border-dark","hover:bg-surface-hover dark:hover:bg-surface-hover-dark transition-all duration-200","text-lg font-medium",(!w||"youtube"===_e)&&"opacity-50 cursor-not-allowed"),"aria-label":"Select YouTube as destination platform",children:c.jsx("img",{src:n?"/images/yt_logo_rgb_dark.png":"/images/yt_logo_rgb_light.png",alt:"YouTube",style:{height:24,width:"auto",objectFit:"contain",display:"block"},className:Hs("h-6 w-auto","youtube"===Re?"":"opacity-70")})})]})]})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs(ar,{variant:"soundswapp",onClick:()=>be(2),className:Hs("flex items-center gap-2 px-6 py-3","text-white font-medium text-lg","bg-gradient-to-r from-brand-primary to-brand-secondary","hover:shadow-lg hover:scale-105 transform transition-all duration-200"),children:["Next Step",c.jsx(se,{className:"w-5 h-5"})]})})]})},"step1"),2===fe&&c.jsx(Ht.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.3},children:c.jsxs("div",{children:[c.jsxs("h3",{className:Hs("text-lg font-bold mb-2","text-white"),children:[c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-red-500",children:null==(e=Je[fe-1])?void 0:e.icon}),null==(t=Je[fe-1])?void 0:t.label]}),c.jsx("p",{className:Hs("mb-4","text-white"),children:null==(a=Je[fe-1])?void 0:a.help}),c.jsxs("div",{className:"mt-2 flex flex-col gap-3 w-full",children:["spotify"===_e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"relative flex items-center gap-2 w-full",children:[c.jsx("input",{type:"text",placeholder:"Spotify Playlist URL or ID",className:Hs("flex-1 px-4 py-2 rounded-lg","bg-surface-card dark:bg-surface-card-dark","border border-border dark:border-border-dark","focus:outline-none focus:ring-2 focus:ring-brand-primary/50 dark:focus:ring-brand-primary-dark/50","text-content-primary dark:text-content-primary-dark","placeholder-content-secondary dark:placeholder-content-secondary-dark"),value:O,onChange:e=>H(e.target.value),disabled:ge}),c.jsx(ar,{onClick:()=>$e("spotify"),disabled:ge||!O,variant:"soundswapp",className:Hs("px-6 py-2.5 rounded-lg font-medium flex items-center gap-2 min-w-[120px] justify-center","bg-brand-primary dark:bg-brand-primary-dark text-white","hover:bg-brand-primary-hover dark:hover:bg-brand-primary-hover-dark","disabled:opacity-50 disabled:cursor-not-allowed","transition-all duration-200 ease-in-out","shadow-md hover:shadow-lg dark:shadow-brand-primary/20","transform hover:-translate-y-0.5","focus:outline-none focus:ring-2 focus:ring-brand-primary/50 dark:focus:ring-brand-primary-dark/50"),children:ge?c.jsxs(c.Fragment,{children:[c.jsx(re,{size:16,className:"animate-spin"}),c.jsx("span",{children:"Importing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(K,{size:16,className:"opacity-90"}),c.jsx("span",{children:"Import"})]})})]})}),c.jsxs("div",{className:"w-full my-2",children:[c.jsxs("button",{onClick:()=>we(!0),className:Hs("w-full px-4 py-3 rounded-lg flex items-center justify-between","bg-white dark:bg-surface-card-dark","border border-border dark:border-border-dark","hover:bg-surface-hover dark:hover:bg-surface-hover-dark","transition-all duration-200"),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",style:{height:24,width:"auto",objectFit:"contain",display:"block"},className:"h-6 w-auto"}),c.jsx("span",{className:"text-gray-900 dark:text-gray-900",children:"Your Spotify Playlists"})]}),c.jsx(se,{className:"h-5 w-5 text-gray-400"})]}),c.jsx("p",{className:Hs("text-white","text-sm mt-2"),children:"Paste your playlist URL or select from your library to import tracks."}),c.jsxs(Gt,{children:[ve&&We&&R.spotifyPlaylists&&R.spotifyPlaylists.length>0&&c.jsx(Ht.div,{id:"playlist-dropdown",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:Hs("mt-1 border rounded-lg shadow overflow-hidden",n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:c.jsxs("div",{className:"max-h-56 overflow-y-auto p-1",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 p-2 font-semibold",children:"Select a playlist to import:"}),c.jsx("ul",{children:R.spotifyPlaylists.slice(0,8).map((e=>c.jsx("li",{children:c.jsxs(Gr,{className:Hs("flex items-center gap-3 p-2 rounded cursor-pointer transition",n?"hover:bg-green-900/30":"hover:bg-green-100"),onClick:()=>{ge||(H(`https://open.spotify.com/playlist/${e.id}`),we(!1))},onKeyDown:t=>{if("Enter"===t.key||" "===t.key){if(t.preventDefault(),ge)return;H(`https://open.spotify.com/playlist/${e.id}`),we(!1)}},"aria-label":`Select playlist: ${e.name} by ${e.owner} with ${e.trackCount||"unknown"} tracks`,children:[e.imageUrl?c.jsx("img",{src:e.imageUrl,alt:"",className:"w-10 h-10 rounded object-cover flex-shrink-0","aria-hidden":"true"}):c.jsx("div",{className:"w-10 h-10 rounded bg-green-100 flex items-center justify-center flex-shrink-0",children:c.jsx(T,{size:16,className:"text-green-600","aria-hidden":"true"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"truncate font-medium text-sm",children:e.name}),c.jsxs("div",{className:"truncate text-xs text-gray-400",children:[e.owner," ‚Ä¢ ",e.trackCount||"Unknown"," tracks"]})]})]})},e.id)))})]})}),ve&&We&&(!R.spotifyPlaylists||0===R.spotifyPlaylists.length)&&c.jsx(Ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:Hs("mt-1 border rounded-lg shadow p-4 text-center",n?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-200 text-gray-600"),children:c.jsx("p",{children:"No Spotify playlists found in your account."})}),ve&&!We&&c.jsx(Ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:Hs("mt-1 border rounded-lg shadow p-4",n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("p",{className:"text-center text-sm text-gray-500 mb-2",children:"You need to connect to Spotify first"}),c.jsx(Vr,{platform:"spotify",isConnected:We,onConnect:Ke,className:"text-sm w-full"})]})})]})]})]}),"youtube"===_e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"relative flex items-center gap-2 w-full",children:[c.jsx("input",{type:"text",placeholder:"YouTube Playlist URL or ID",className:"flex-1 px-4 py-2 rounded-lg bg-surface-card border border-border focus:outline-none focus:ring-2 focus:ring-primary/50 text-content-primary",value:G,onChange:e=>ue(e.target.value),disabled:ge}),c.jsx("button",{onClick:()=>$e("youtube"),disabled:ge||!G,className:"px-6 py-2 rounded-lg bg-primary text-white font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[100px] justify-center",children:ge?c.jsxs(c.Fragment,{children:[c.jsx(re,{size:16,className:"animate-spin"}),c.jsx("span",{children:"Importing..."})]}):"Import"})]})}),c.jsxs("div",{className:"w-full my-2",children:[c.jsxs("button",{className:Hs("w-full px-4 py-2 rounded-md border flex items-center justify-between",n?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-700","hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","focus:outline-none focus:ring-2 focus:ring-purple-500"),onClick:()=>Ne(!je),"aria-expanded":je,"aria-controls":"youtube-playlist-dropdown","aria-label":"Show your YouTube playlists",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx(W,{className:"mr-2 text-red-500","aria-hidden":"true"}),c.jsx("span",{children:"Your YouTube Playlists"})]}),c.jsx(se,{size:16,className:Hs("transition-transform",je?"rotate-90":""),"aria-hidden":"true"})]}),c.jsxs(Gt,{children:[je&&w&&R.youtubePlaylists&&R.youtubePlaylists.length>0&&c.jsx(Ht.div,{id:"youtube-playlist-dropdown",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:Hs("mt-1 border rounded-lg shadow overflow-hidden",n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:c.jsxs("div",{className:"max-h-56 overflow-y-auto p-1",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 p-2 font-semibold",children:"Select a playlist to import:"}),c.jsx("ul",{children:R.youtubePlaylists.slice(0,8).map((e=>{var t,a,s,r,i,o,l,d;return c.jsx("li",{children:c.jsxs(Gr,{className:Hs("flex items-center gap-3 p-2 rounded cursor-pointer transition",n?"hover:bg-red-900/30":"hover:bg-red-100"),onClick:()=>{ge||(ue(`https://www.youtube.com/playlist?list=${e.id}`),Ne(!1))},onKeyDown:t=>{if("Enter"===t.key||" "===t.key){if(t.preventDefault(),ge)return;ue(`https://www.youtube.com/playlist?list=${e.id}`),Ne(!1)}},"aria-label":`Select playlist: ${(null==(t=e.snippet)?void 0:t.title)||"Untitled playlist"} with ${(null==(a=e.contentDetails)?void 0:a.itemCount)||"unknown"} tracks`,children:[(null==(i=null==(r=null==(s=e.snippet)?void 0:s.thumbnails)?void 0:r.default)?void 0:i.url)?c.jsx("img",{src:e.snippet.thumbnails.default.url,alt:"",className:"w-10 h-10 rounded object-cover flex-shrink-0","aria-hidden":"true"}):c.jsx("div",{className:"w-10 h-10 rounded bg-red-100 flex items-center justify-center flex-shrink-0",children:c.jsx(T,{size:16,className:"text-red-600","aria-hidden":"true"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"truncate font-medium text-sm",children:(null==(o=e.snippet)?void 0:o.title)||"Untitled playlist"}),c.jsxs("div",{className:"truncate text-xs text-gray-400",children:[(null==(l=e.snippet)?void 0:l.channelTitle)?`${e.snippet.channelTitle} ‚Ä¢ `:"",(null==(d=e.contentDetails)?void 0:d.itemCount)||"Unknown"," tracks"]})]})]})},e.id)}))})]})}),je&&w&&(!R.youtubePlaylists||0===R.youtubePlaylists.length)&&c.jsx(Ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:Hs("mt-1 border rounded-lg shadow p-4 text-center",n?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-200 text-gray-600"),children:c.jsx("p",{children:"No YouTube playlists found in your account."})}),je&&!w&&c.jsx(Ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:Hs("mt-1 border rounded-lg shadow p-4","bg-surface-dropdown border-border-default"),children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("p",{className:"text-center text-sm text-content-secondary mb-2",children:"You need to connect to YouTube first"}),c.jsx(Vr,{platform:"youtube",isConnected:w,onConnect:Oe,className:"text-sm w-full"})]})})]})]})]})]}),ge&&c.jsxs("div",{className:"mt-4 text-center flex items-center justify-center gap-2 text-purple-500","aria-live":"polite",children:[c.jsx(ie,{className:"animate-spin",size:16,"aria-hidden":"true"}),c.jsx("span",{children:"Loading tracks..."})]}),c.jsxs("div",{className:"flex justify-between mt-6",children:[c.jsxs("button",{className:Hs("px-4 py-2 rounded flex items-center gap-2 text-sm",n?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800"),onClick:()=>be(1),"aria-label":"Go back to Select Source",children:[c.jsx(oe,{size:16,"aria-hidden":"true"}),c.jsx("span",{children:"Back"})]}),c.jsxs(ar,{variant:"primary",onClick:()=>be(3),disabled:!R.tracks.length,isLoading:ge&&!R.tracks.length,"aria-label":"Continue to Review Tracks "+(R.tracks.length?"":"(No Tracks Yet)"),children:[c.jsx("span",{children:"Next"}),c.jsx(se,{size:16,"aria-hidden":"true",className:"ml-1"})]})]})]})},"step2"),3===fe&&c.jsx(Ht.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.3},children:c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-red-500",children:c.jsx(X,{size:24})}),"Review Tracks",c.jsx("span",{className:"sr-only",children:Je[2].help})]}),c.jsx("div",{className:Hs("mb-4 p-4 rounded-lg","bg-surface-highlight border border-border-default"),children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-content-primary",children:(null==Qe?void 0:Qe.name)||"Imported Playlist"}),c.jsxs("p",{className:"text-sm text-content-secondary",children:[(null==Qe?void 0:Qe.trackCount)||R.tracks.length," tracks ‚Ä¢",(null==Qe?void 0:Qe.owner)&&` By ${Qe.owner}`]})]}),c.jsxs("div",{className:Hs("flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium","spotify"===_e?"bg-[var(--spotify-bg-subtle)] text-[var(--spotify-text-accent)]":"bg-[var(--youtube-bg-subtle)] text-[var(--youtube-text-accent)]"),children:[c.jsx(T,{className:Hs("spotify"===_e?"text-[var(--spotify-icon-color)]":"text-[var(--youtube-icon-color)]"),"aria-hidden":"true"}),c.jsxs("span",{children:[null==(s=Ae.find((e=>e.key===_e)))?void 0:s.label," Source"]})]})]})}),c.jsxs("div",{className:"mt-2 rounded-lg border border-border-default overflow-hidden",role:"region","aria-label":"Track list preview",children:[c.jsxs("div",{className:Hs("p-3 font-medium border-b text-sm","bg-surface-alt text-content-secondary border-border-default"),children:["Track Preview (",R.tracks.length,")"]}),c.jsxs("div",{className:Hs("max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-surface-scrollbar scrollbar-track-surface-alt","bg-surface-card"),children:[ge&&0===R.tracks.length&&c.jsxs("div",{className:"mt-4 text-center flex items-center justify-center gap-2 text-brand-primary py-4","aria-live":"polite",children:[c.jsx(ie,{className:"animate-spin",size:16,"aria-hidden":"true"}),c.jsx("span",{children:"Loading tracks..."})]}),!ge&&R.tracks.length>0&&c.jsx("ul",{role:"list",children:R.tracks.map(((e,t)=>c.jsxs("li",{className:Hs("py-2.5 px-3 border-b flex items-center gap-2 transition-colors","border-border-default hover:bg-surface-hover"),children:[c.jsx("span",{className:"w-6 text-center text-xs text-content-tertiary",children:t+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-sm truncate text-content-primary",children:e.name}),c.jsx("p",{className:"text-xs text-content-secondary truncate",children:e.artists.join(", ")})]}),e.duration_ms&&c.jsxs("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:[Math.floor(e.duration_ms/6e4),":",(e.duration_ms%6e4/1e3).toFixed(0).padStart(2,"0")]})]},`track-${e.id}-${t}`)))}),!ge&&0===R.tracks.length&&c.jsxs("div",{className:"py-8 text-center text-content-tertiary",children:[c.jsx(T,{size:24,className:"mx-auto mb-2 opacity-50","aria-hidden":"true"}),c.jsx("p",{children:"No tracks loaded."})]})]})]}),c.jsxs("div",{className:"flex justify-between mt-6",children:[c.jsxs("button",{className:Hs("px-4 py-2 rounded flex items-center gap-2 text-sm",n?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800"),onClick:()=>be(2),"aria-label":"Go back to Import Playlist",children:[c.jsx(oe,{size:16,"aria-hidden":"true"}),c.jsx("span",{children:"Back"})]}),c.jsxs(ar,{variant:"primary",onClick:()=>be(4),disabled:!R.tracks.length,"aria-label":"Continue to Export Playlist "+(R.tracks.length?"":"(import tracks first)"),children:[c.jsx("span",{children:"Next"}),c.jsx(se,{size:16,"aria-hidden":"true",className:"ml-1"})]})]})]})},"step3"),4===fe&&c.jsx(Ht.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.3},children:c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[c.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-red-500",children:c.jsx(Q,{size:24})}),"Export Playlist",c.jsx("span",{className:"sr-only",children:Je[3].help})]}),c.jsxs("div",{className:Hs("p-4 rounded-lg border",n?"bg-gray-800/50 border-gray-700":"bg-white border-gray-200"),children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:Hs("w-12 h-12 flex-shrink-0 rounded flex items-center justify-center","spotify"===_e?"bg-green-100":"bg-red-100"),children:c.jsx(T,{className:"spotify"===_e?"text-green-600 text-lg":"text-red-600 text-lg","aria-hidden":"true"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[c.jsx("h4",{className:"font-semibold",children:(null==Qe?void 0:Qe.name)||"Unnamed Playlist"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:Hs("px-2 py-0.5 rounded-full text-xs",n?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:[R.tracks.length," tracks"]}),c.jsx(T,{className:"spotify"===_e?"text-green-500 text-sm":"text-red-500 text-sm","aria-hidden":"true"})]})]}),c.jsx("div",{className:"mt-3 flex items-center",children:c.jsxs("div",{className:"font-medium text-sm flex items-center gap-1",children:[c.jsx("span",{children:"Converting to:"}),c.jsx(W,{className:"spotify"===Re?"text-green-500 ml-1":"text-red-500 ml-1","aria-hidden":"true"}),c.jsx("span",{className:"font-bold",children:null==(r=Ae.find((e=>e.key===Re)))?void 0:r.label})]})})]})]}),c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsx("div",{children:c.jsx(Dr,{type:"text",id:"playlist-name",label:"New Playlist Name",value:ke,onChange:e=>Se(e.target.value),placeholder:`${(null==Qe?void 0:Qe.name)||"Playlist"} (Converted)`,variant:"outlined",inputClassName:Hs(n?"dark:bg-gray-700 dark:border-gray-600 dark:text-white":"bg-white border-gray-300 text-gray-900",ge?"opacity-50 cursor-not-allowed":""),disabled:ge})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"playlist-description",className:"block text-sm font-medium mb-1",children:"Description"}),c.jsx("textarea",{id:"playlist-description",value:Te,onChange:e=>Ce(e.target.value),placeholder:`Converted from ${_e} using SoundSwapp`,rows:2,className:Hs("w-full px-3 py-2 rounded border focus:ring-2 focus:ring-purple-500 focus:outline-none",n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),disabled:ge})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx(ar,{onClick:He,disabled:ge||!R.tracks.length||"spotify"===_e&&!v||"youtube"===Re&&!w,className:Hs("px-6 py-3 rounded-lg font-medium transition-all",!ge&&R.tracks.length>0?"bg-primary hover:bg-primary/80 text-primary-foreground":"bg-muted text-muted-foreground cursor-not-allowed","flex items-center gap-2"),"aria-label":"Start playlist conversion",children:ge?c.jsxs(c.Fragment,{children:[c.jsx(ie,{className:"h-5 w-5 animate-spin"}),c.jsx("span",{children:"Converting..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Y,{size:18}),c.jsx("span",{children:"Convert Playlist"})]})})}),ge&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-muted",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-muted-foreground",children:R.status===As.MATCHING_TRACKS?"Matching tracks...":R.status===As.CREATING_PLAYLIST?"Creating playlist...":"Converting..."}),c.jsxs("span",{children:[Math.round(R.matchingProgress),"%"]})]}),c.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-red-500 transition-all duration-500",style:{width:`${R.matchingProgress}%`},role:"progressbar","aria-valuenow":R.matchingProgress,"aria-valuemin":0,"aria-valuemax":100})}),R.error&&c.jsx("div",{className:"mt-4 bg-youtube/10 text-youtube p-3 rounded-md",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(y,{size:16,className:"flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm",children:R.error})]})})]})]}),R.status===As.SUCCESS&&c.jsxs("div",{className:Hs("mt-4 p-3 rounded-lg flex items-center gap-2",n?"bg-green-900/30 text-green-300 border border-green-800/50":"bg-green-100 text-green-800 border-l-4 border-green-600"),role:"status","aria-live":"polite",children:[c.jsx(p,{size:18,className:"flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:"Conversion successful!"}),c.jsxs("p",{className:"text-sm mt-1",children:["Your playlist has been successfully converted to ",null==(i=Ae.find((e=>e.key===Re)))?void 0:i.label,"."]})]}),c.jsxs("a",{href:("spotify"===Re?R.spotifyPlaylistUrl:R.youtubePlaylistUrl)||"#",target:"_blank",rel:"noopener noreferrer",className:Hs("ml-auto px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1","spotify"===Re?"bg-green-200 text-green-800 hover:bg-green-300":"bg-red-200 text-red-800 hover:bg-red-300","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800"),"aria-label":`View ${null==(o=Ae.find((e=>e.key===Re)))?void 0:o.label} playlist (opens in new tab)`,children:[c.jsx("span",{children:"View Playlist"}),c.jsx(V,{size:12,"aria-hidden":"true"})]})]}),c.jsxs("div",{className:"flex justify-between mt-6",children:[c.jsxs("button",{className:Hs("px-4 py-2 rounded flex items-center gap-2 text-sm",n?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800"),onClick:()=>be(3),"aria-label":"Go back to Review Tracks",disabled:ge,children:[c.jsx(oe,{size:16,"aria-hidden":"true"}),c.jsx("span",{children:"Back"})]}),R.status===As.SUCCESS&&c.jsxs(ar,{variant:"primary",onClick:tt,"aria-label":"Convert another playlist",children:[c.jsx(ne,{size:16,"aria-hidden":"true",className:"mr-1.5"}),c.jsx("span",{children:"Convert Another"})]})]})]})},"step4")]})]})}),c.jsx(Gt,{children:R.conversionHistory&&R.conversionHistory.length>0&&c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},className:"mt-12",children:c.jsxs(or,{className:"p-6 sm:p-8 mb-8 rounded-2xl border border-border-default shadow-xl",gradientOverlay:!0,variant:"primary",magneticEffect:!0,glowIntensity:"medium",children:[c.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-content-primary",children:[c.jsx("svg",{className:"h-6 w-6 text-brand-accentPink",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx($r,{baseColor:"text-content-primary",highlightColor:"text-brand-accentPink",size:100,children:"Recent Conversions"})]}),c.jsx("div",{className:Hs("rounded-lg border overflow-x-auto","border-border-default"),role:"region","aria-label":"Recent conversion history",children:c.jsxs("table",{className:"w-full min-w-[600px]",role:"table",children:[c.jsx("thead",{children:c.jsxs("tr",{className:Hs("text-xs font-semibold text-left","bg-surface-alt text-content-secondary"),children:[c.jsx("th",{className:"px-4 py-3",scope:"col",children:"Playlist"}),c.jsx("th",{className:"px-4 py-3 hidden md:table-cell",scope:"col",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-center",scope:"col",children:"Tracks"}),c.jsx("th",{className:"px-4 py-3 text-right",scope:"col",children:"Actions"})]})}),c.jsx("tbody",{role:"rowgroup",className:"divide-y divide-border-default bg-surface-card",children:R.conversionHistory.slice(0,5).map((e=>c.jsxs("tr",{className:Hs("text-sm","hover:bg-surface-hover"),role:"row",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-content-primary",children:e.spotifyPlaylistName||"Unnamed Playlist"}),c.jsx("td",{className:"px-4 py-3 text-content-secondary hidden md:table-cell",children:new Date(e.convertedAt).toLocaleDateString()}),c.jsxs("td",{className:"px-4 py-3 text-center",children:[c.jsxs("span",{className:Hs("inline-flex items-center text-xs rounded-full px-2.5 py-1 font-medium","bg-input text-content-secondary"),children:[e.tracksMatched," / ",e.totalTracks]}),e.failedTracks&&e.failedTracks.length>0&&c.jsxs("button",{onClick:()=>Pe(e.failedTracks||[]),className:Hs("ml-2 inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors","bg-yellow-500 text-yellow-900 hover:bg-yellow-600","focus:outline-none focus:ring-2 focus:ring-yellow-500"),"aria-label":"View failed tracks details",children:[c.jsx(y,{size:12}),e.failedTracks.length," failed"]})]}),c.jsx("td",{className:"px-4 py-3 text-right",children:c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsxs(le,{to:`/insights/${e.id}`,className:Hs("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors","bg-black text-white hover:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black ring-offset-surface-card"),"aria-label":"View playlist insights",children:[c.jsx(f,{size:14,className:"text-white"}),c.jsx("span",{children:"Insights"})]}),e.youtubePlaylistUrl&&c.jsxs("a",{href:e.youtubePlaylistUrl,target:"_blank",rel:"noopener noreferrer",className:Hs("inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-white text-xs font-medium transition-colors","bg-black hover:bg-gray-900","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black ring-offset-surface-card"),"aria-label":"Open YouTube playlist in new tab",children:[c.jsx("img",{src:n?"/images/yt_logo_rgb_dark.png":"/images/yt_logo_rgb_light.png",alt:"YouTube",style:{height:18,width:"auto",objectFit:"contain",display:"block"},className:"h-5 w-auto"}),c.jsx("span",{children:"Watch on YouTube"})]}),e.spotifyPlaylistUrl&&c.jsxs("a",{href:e.spotifyPlaylistUrl,target:"_blank",rel:"noopener noreferrer",className:Hs("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md text-white text-xs font-medium transition-colors","bg-[var(--spotify-bg)] hover:bg-[var(--spotify-bg-hover)]","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--spotify-bg)] ring-offset-surface-card"),"aria-label":"Open Spotify playlist in new tab",children:[c.jsx("img",{src:"/images/Spotify_Primary_Logo_RGB_Green.png",alt:"Spotify",style:{height:14,width:"auto",objectFit:"contain",display:"block"},className:"text-[var(--spotify-icon-color-button)]"}),c.jsx("span",{className:"text-[var(--spotify-text-button)]",children:"View"})]})]})})]},e.id)))})]})})]})})}),R.status===As.SUCCESS&&R.tracks.length>0&&c.jsx(Ht.div,{className:"mt-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:c.jsx(mr,{className:"p-4 sm:p-6",shadow:"xl",animate:!0,hoverEffect:!0,children:c.jsx(Cr,{stats:Kr(R.tracks),tracks:R.tracks})})})]})}),c.jsxs("section",{id:"how-it-works",className:Hs("py-16 lg:py-24 px-4 relative overflow-hidden","bg-gradient-to-br from-background-primary via-background-secondary to-background-primary"),"aria-labelledby":"how-it-works-title",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[c.jsx(Ht.div,{className:"absolute -top-1/4 -left-1/4 w-1/2 h-1/2 rounded-full opacity-10 bg-gradient-to-br from-brand-primary via-brand-accent-pink to-transparent filter blur-3xl",animate:{transform:["translateX(0px) translateY(0px)","translateX(20px) translateY(10px)","translateX(0px) translateY(0px)"]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),c.jsx(Ht.div,{className:"absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 rounded-full opacity-10 bg-gradient-to-tl from-brand-secondary via-brand-accent-purple to-transparent filter blur-3xl",animate:{transform:["translateX(0px) translateY(0px)","translateX(-20px) translateY(-10px)","translateX(0px) translateY(0px)"]},transition:{duration:15,repeat:1/0,ease:"easeInOut",delay:2}}),c.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.3) 1px, transparent 1px)",backgroundSize:"30px 30px"}})]}),c.jsxs("div",{className:"container mx-auto max-w-6xl text-center relative z-10",children:[c.jsxs(Ht.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[c.jsx("div",{className:"mb-4 inline-block",children:c.jsx("span",{className:Hs("px-5 py-2 rounded-full text-sm font-semibold tracking-wider uppercase shadow-lg","bg-gradient-to-r from-brand-primary/80 via-brand-accent-pink/80 to-brand-secondary/80 text-white","border border-white/20"),children:"EASY PROCESS"})}),c.jsx("h2",{id:"how-it-works-title",className:"text-4xl lg:text-6xl font-extrabold mb-6 text-content-primary drop-shadow-md",children:c.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(120deg, var(--brand-primary) 0%, var(--brand-accent-pink) 50%, var(--brand-secondary) 100%)"},children:"How It Works"})}),c.jsx("p",{className:"text-lg lg:text-xl text-content-secondary mb-12 lg:mb-20 max-w-3xl mx-auto",children:"Converting your playlists is simple with our streamlined three-step process. Get your music where you want it, hassle-free."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:et.map(((e,t)=>c.jsx(Ht.div,{initial:{opacity:0,y:50,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.2,margin:"-50px"},transition:{duration:.5,delay:.15*t,ease:"easeOut"},className:"flex flex-col h-full",children:c.jsx(zr,{className:Hs("p-6 md:p-8 text-left rounded-2xl shadow-lg transition-all duration-300 h-full flex flex-col group hover:shadow-xl",n?"bg-[#1A1A2E]/90 hover:bg-[#21213D]/95 border border-[var(--brand-secondary-alpha-20)]":"bg-slate-50 hover:bg-white border border-slate-200"),children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsx(Ht.div,{className:Hs("w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-md",0===t?"bg-gradient-to-br from-brand-primary to-brand-primary-dark":1===t?"bg-gradient-to-br from-brand-accent-pink to-brand-accent-pink/80":"bg-gradient-to-br from-brand-secondary to-brand-secondary-dark"),whileHover:{scale:1.05,rotate:3},transition:{type:"spring",stiffness:300},children:u.cloneElement(e.icon,{size:28,strokeWidth:n?2:2.5,className:Hs(n?"text-white":0===t?"text-brand-primary-dark":1===t?"text-brand-accent-pink-dark":"text-brand-secondary-dark","drop-shadow-sm")})}),c.jsxs("h3",{className:Hs("text-xl font-semibold mb-3 transition-colors",n?"text-slate-100 group-hover:text-brand-accent-pink":"text-slate-700 group-hover:text-brand-primary"),children:[e.title.substring(e.title.indexOf(".")+2)," "]}),c.jsx("p",{className:Hs("text-md flex-grow leading-relaxed",n?"text-slate-300":"text-slate-500"),children:e.description})]})})},t)))})]})]}),c.jsxs("section",{id:"features",className:Hs("py-16 lg:py-24 px-4 relative overflow-hidden","bg-background-primary"),"aria-labelledby":"features-title",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0",children:[c.jsx(Ht.div,{className:"absolute -top-1/3 -right-1/4 w-2/5 h-2/5 rounded-full opacity-10 bg-gradient-to-bl from-brand-secondary via-brand-accent-purple to-transparent filter blur-3xl",animate:{transform:["translateX(0px) translateY(0px)","translateX(-15px) translateY(15px)","translateX(0px) translateY(0px)"]},transition:{duration:13,repeat:1/0,ease:"easeInOut"}}),c.jsx(Ht.div,{className:"absolute -bottom-1/3 -left-1/4 w-2/5 h-2/5 rounded-full opacity-10 bg-gradient-to-tr from-brand-primary via-brand-accent-pink to-transparent filter blur-3xl",animate:{transform:["translateX(0px) translateY(0px)","translateX(15px) translateY(-15px)","translateX(0px) translateY(0px)"]},transition:{duration:16,repeat:1/0,ease:"easeInOut",delay:1.5}}),c.jsx("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"radial-gradient(rgba(255,255,255,0.2) 0.5px, transparent 0.5px)",backgroundSize:"15px 15px"}})]}),c.jsxs("div",{className:"container mx-auto max-w-6xl text-center relative z-10",children:[c.jsxs(Ht.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[c.jsx("div",{className:"mb-4 inline-block",children:c.jsx("span",{className:Hs("px-5 py-2 rounded-full text-sm font-semibold tracking-wider uppercase shadow-lg","bg-gradient-to-r from-brand-secondary/80 via-brand-accent-pink/80 to-brand-primary/80 text-white","border border-white/20"),children:"PREMIUM EXPERIENCE"})}),c.jsx("h2",{id:"features-title",className:"text-4xl lg:text-6xl font-extrabold mb-6 text-content-primary drop-shadow-md",children:c.jsx("span",{className:"bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(120deg, var(--brand-secondary) 0%, var(--brand-accent-pink) 50%, var(--brand-primary) 100%)"},children:"Powerful Features"})}),c.jsx("p",{className:"text-lg lg:text-xl text-content-secondary mb-12 lg:mb-20 max-w-3xl mx-auto",children:"Our converter is packed with cutting-edge features designed for a seamless and delightful music conversion experience."})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8",children:Ze.map(((e,t)=>c.jsx(Ht.div,{initial:{opacity:0,y:50,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,amount:.2,margin:"-50px"},transition:{duration:.5,delay:.1*t,ease:"easeOut"},className:"h-full",children:c.jsx(zr,{className:Hs("p-6 text-left h-full rounded-2xl shadow-lg transition-all duration-300 group flex flex-col overflow-hidden",n?"bg-[#1A1A2E]/90 hover:bg-[#21213D]/95 border-[var(--brand-secondary-alpha-20)] backdrop-blur-sm":"bg-slate-50 hover:bg-white border-slate-200"),children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsx(Ht.div,{className:Hs("w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",t%4==0?"bg-gradient-to-br from-brand-primary to-brand-primary-dark":t%4==1?"bg-gradient-to-br from-brand-secondary to-brand-secondary-dark":t%4==2?"bg-gradient-to-br from-brand-accent-pink to-brand-accent-pink/80":"bg-gradient-to-br from-brand-accent-yellow to-brand-accent-yellow/80"),whileHover:{scale:1.1,y:-5},transition:{type:"spring",stiffness:250,damping:10},children:u.cloneElement(e.icon,{size:32,strokeWidth:n?1.8:2.2,className:Hs(n?"text-white":t%4==0?"text-brand-primary-dark":t%4==1?"text-brand-secondary-dark":t%4==2?"text-brand-accent-pink-dark":"text-brand-accent-yellow-dark",n?"drop-shadow-sm":"drop-shadow-md")})}),c.jsx("h3",{className:Hs("text-xl font-semibold mb-3 transition-colors",n?"text-slate-100 group-hover:text-brand-accent-pink":"text-slate-700 group-hover:text-brand-primary"),children:e.title}),c.jsx("p",{className:Hs("text-md flex-grow leading-relaxed",n?"text-slate-300":"text-slate-500"),children:e.description})]})})},t)))})]})]}),c.jsx("footer",{className:Hs("py-12 px-4 text-center","bg-background-secondary border-t border-border-default"),children:c.jsxs("div",{className:"container mx-auto max-w-4xl",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-content-primary",children:[c.jsx("div",{className:"soundswapp-logo",children:c.jsx(Hr,{width:32,height:32})}),c.jsx("span",{className:"font-bold text-xl soundswapp-gradient-text",children:"SoundSwapp"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("a",{href:"https://github.com/your-repo",target:"_blank",rel:"noopener noreferrer",className:"text-content-tertiary hover:text-brand-primary transition-colors",children:[c.jsx(ce,{size:24}),c.jsx("span",{className:"sr-only",children:"GitHub"})]}),c.jsxs("a",{href:"mailto:support@soundswapp.app",className:"text-content-tertiary hover:text-brand-primary transition-colors",children:[c.jsx(de,{size:24}),c.jsx("span",{className:"sr-only",children:"Email Support"})]})]})]}),c.jsx("p",{className:"text-sm text-content-tertiary mb-4",children:"Convert your playlists between Spotify and YouTube with ease. Secure, fast, and user-friendly."}),c.jsxs("p",{className:"text-xs text-content-tertiary",children:["¬© ",(new Date).getFullYear()," SoundSwapp. All Rights Reserved.",c.jsx("a",{href:"/privacy.html",className:"ml-2 hover:text-brand-primary underline",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),c.jsx("span",{className:"mx-1",children:"‚Ä¢"}),c.jsx("a",{href:"/terms.html",className:"hover:text-brand-primary underline",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})]}),c.jsxs("div",{className:"mt-4 flex justify-center items-center gap-2",children:[c.jsx("span",{className:"text-xs font-semibold bg-gradient-to-r from-purple-500 via-pink-500 to-blue-400 bg-clip-text text-transparent animate-gradient-x",children:"Designed & Developed by"}),c.jsxs("a",{href:"https://eliudsamwel.dev",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs font-bold bg-gradient-to-r from-pink-500 via-purple-500 to-blue-400 bg-clip-text text-transparent hover:underline hover:scale-105 focus:outline-none focus:ring-2 focus:ring-pink-400 transition-all duration-200",children:["eliudsamwel.dev",c.jsx("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",className:"inline ml-1",children:c.jsx("path",{d:"M5 12h14M12 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})}),c.jsx(nr,{isActive:me,onComplete:()=>he(!1)}),c.jsx(ur,{toasts:xe,onDismiss:Me}),Ee&&c.jsx(Br,{failedTracks:Ee,onClose:()=>Pe(null),onAddToYouTube:async(e,t)=>{var a;try{const t=R.youtubePlaylistId;if(!t)throw new Error("No YouTube playlist found. Please start a conversion first.");const s=(e.includes("youtube.com")||e.includes("youtu.be"))&&(null==(a=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/))?void 0:a[1])||e;if(!s||11!==s.length)throw new Error("Invalid YouTube video ID. Please provide a valid 11-character video ID or YouTube URL.");console.log(`Adding YouTube video ${s} to playlist ${t}`),await Oa(0,t,s),De({type:"success",title:"Track Added!",message:"Successfully added YouTube video to playlist.",duration:3e3})}catch(s){console.error("Error adding YouTube video:",s),De({type:"error",title:"Failed to Add Track",message:s instanceof Error?s.message:"Failed to add YouTube video to playlist.",duration:5e3})}},onAddToSpotify:async(e,t)=>{try{const t=R.spotifyPlaylistId;if(!t)throw new Error("No Spotify playlist found. Please start a conversion first.");let a=e;if(e.includes("spotify.com/track/")){const t=e.match(/spotify\.com\/track\/([a-zA-Z0-9]+)/);t&&(a=`spotify:track:${t[1]}`)}if(!a.startsWith("spotify:track:"))throw new Error("Invalid Spotify track URI. Please provide a valid track URI or Spotify URL.");console.log(`Adding Spotify track ${a} to playlist ${t}`),await _a(t,[a]),De({type:"success",title:"Track Added!",message:"Successfully added Spotify track to playlist.",duration:3e3})}catch(a){console.error("Error adding Spotify track:",a),De({type:"error",title:"Failed to Add Track",message:a instanceof Error?a.message:"Failed to add Spotify track to playlist.",duration:5e3})}}})]})},Qr=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Jr=()=>/iPad|iPhone|iPod/.test(navigator.userAgent),Zr=()=>/Android/i.test(navigator.userAgent),ei=()=>/iPad|Android(?=.*\bMobile\b)(?=.*\bSafari\b)/i.test(navigator.userAgent),ti=()=>{const e=Qr()||window.innerWidth<768,t=window.innerHeight>window.innerWidth,a=Jr(),s=Zr(),r=ei(),[i,o]=l.useState(e),[n,c]=l.useState(t),[d,u]=l.useState(a),[m,h]=l.useState(s),[x,p]=l.useState(r),[g,y]=l.useState({width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio||1});return l.useEffect((()=>{const e=()=>{const e=Qr()||window.innerWidth<768,t=window.innerHeight>window.innerWidth,a=Jr(),s=Zr(),r=ei();o(e),u(a),h(s),p(r),c(t),y({width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio||1})};e();const t=()=>{e()},a=()=>{setTimeout((()=>{e()}),100)};return window.addEventListener("resize",t),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",a)}}),[]),{isMobile:i,isPortrait:n,isLandscape:!n,isIOS:d,isAndroid:m,isTablet:x,viewport:g,isSmallScreen:g.width<640,isMediumScreen:g.width>=640&&g.width<1024,isLargeScreen:g.width>=1024,isMobileOrTablet:i||x,isStandalone:window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone}},ai=({children:e})=>c.jsx("header",{className:"sticky top-0 z-50 bg-surface-card/98 backdrop-blur-2xl border-b border-border-default/40 shadow-sm",children:c.jsx("div",{className:"px-4 py-3",children:e})});u.forwardRef((({children:e},t)=>c.jsx("main",{ref:t,className:"px-4 py-4 space-y-4",children:e})));const si=({children:e})=>c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50",children:c.jsx("div",{className:"bg-surface-card/98 backdrop-blur-2xl border-t border-border-default/40 shadow-sm",children:c.jsx("div",{className:"flex justify-between items-center h-20 px-6 pb-[env(safe-area-inset-bottom)]",children:e})})}),ri=({icon:e,label:t,active:a=!1,onClick:s,badge:r})=>c.jsx("button",{onClick:s,className:Hs("flex flex-col items-center justify-center py-2 px-3 rounded-lg","transition-all duration-300 relative",a?"text-primary":"text-muted-foreground hover:text-foreground"),children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:Hs("relative w-12 h-12 rounded-full transition-all duration-300",a?"bg-gradient-to-br from-[#34A89B] to-[#2D6F6B] shadow-lg shadow-[#34A89B]/20":"bg-gradient-to-br from-gray-100/80 to-gray-200/80 dark:from-gray-800/80 dark:to-gray-700/80 hover:shadow-md hover:scale-105"),children:[a&&c.jsx("div",{className:"absolute inset-2 bg-[#34A89B] rounded-full"}),c.jsx("div",{className:Hs("relative z-10 flex items-center justify-center w-full h-full",a?"text-white":"text-gray-600 dark:text-gray-400"),children:u.cloneElement(e,{className:"w-6 h-6"})})]}),r&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium shadow-lg",children:r})]})}),ii=({children:e,className:t="",onClick:a})=>c.jsx("div",{onClick:a,className:Hs("bg-surface-card rounded-xl p-4 border border-border-default","shadow-sm hover:shadow-md transition-shadow duration-200",a&&"cursor-pointer hover:bg-surface-card/80",t),children:e}),oi=({children:e,onClick:t,variant:a="primary",size:s="md",disabled:r=!1,className:i=""})=>c.jsx("button",{onClick:t,disabled:r,className:Hs("font-medium rounded-lg transition-colors duration-200",{sm:"px-3 py-2 text-sm min-h-[36px]",md:"px-4 py-3 text-base min-h-[44px]",lg:"px-6 py-4 text-lg min-h-[52px]"}[s],{primary:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-border-default bg-transparent hover:bg-surface-card",ghost:"bg-transparent hover:bg-surface-card"}[a],r&&"opacity-50 cursor-not-allowed",i),children:e}),ni=(e,t={})=>{const{threshold:a=80,resistance:s=2.5,onRefresh:r}=t,[i,o]=l.useState(!1),[n,c]=l.useState(0),d=l.useRef(null),u=l.useRef(null),m=l.useRef(!1),h=l.useCallback((t=>{const a=e.current;!a||a.scrollTop>0||(d.current=t.touches[0].clientY,m.current=!0)}),[e]),x=l.useCallback((e=>{if(!m.current||!d.current)return;u.current=e.touches[0].clientY;const t=Math.max(0,(u.current-d.current)/s);c(t),t>0&&e.preventDefault()}),[s]),p=l.useCallback((async()=>{if(m.current){if(n>a&&r){o(!0);try{await r()}finally{o(!1)}}c(0),d.current=null,u.current=null,m.current=!1}}),[n,a,r]);return l.useEffect((()=>{const t=e.current;if(t)return t.addEventListener("touchstart",h,{passive:!1}),t.addEventListener("touchmove",x,{passive:!1}),t.addEventListener("touchend",p,{passive:!1}),()=>{t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",x),t.removeEventListener("touchend",p)}}),[e,h,x,p]),{isRefreshing:i,pullDistance:n,isPulling:m.current}},li=(e,t,a={})=>{const{minSwipeDistance:s=50,maxSwipeTime:r=300,preventDefault:i=!1}=a,o=l.useRef(null),n=l.useRef(null),c=l.useRef(!1),d=l.useCallback((e=>{i&&e.cancelable&&e.preventDefault(),o.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY,time:Date.now()},c.current=!1}),[i]),u=l.useCallback((e=>{if(!o.current)return;const t=e.targetTouches[0].clientX,a=e.targetTouches[0].clientY,s=Math.abs(t-o.current.x),r=Math.abs(a-o.current.y);i&&(s>10||r>10)&&e.cancelable&&(e.preventDefault(),c.current=!0),n.current={x:t,y:a,time:Date.now()}}),[i]),m=l.useCallback((()=>{if(!o.current||!n.current)return;const e=o.current.x-n.current.x,a=o.current.y-n.current.y,i=n.current.time-o.current.time,l=Math.abs(e)>Math.abs(a);(Math.abs(e)>s||Math.abs(a)>s)&&i<r&&c.current&&(l?e>0&&t.onSwipeLeft?t.onSwipeLeft():e<0&&t.onSwipeRight&&t.onSwipeRight():a>0&&t.onSwipeUp?t.onSwipeUp():a<0&&t.onSwipeDown&&t.onSwipeDown()),o.current=null,n.current=null,c.current=!1}),[t,s,r]);return l.useEffect((()=>{const t=e.current;if(t)return t.addEventListener("touchstart",d,{passive:!i}),t.addEventListener("touchmove",u,{passive:!i}),t.addEventListener("touchend",m,{passive:!0}),()=>{t.removeEventListener("touchstart",d),t.removeEventListener("touchmove",u),t.removeEventListener("touchend",m)}}),[e,d,u,m,i]),{touchStart:o.current,touchEnd:n.current}},ci=(e,t={})=>{const{delay:a=500,preventDefault:s=!0,onLongPress:r,onPress:i}=t,o=l.useRef(null),n=l.useRef(!1),c=l.useCallback((()=>{n.current=!1,o.current=setTimeout((()=>{n.current=!0,null==r||r()}),a)}),[a,r]),d=l.useCallback((()=>{o.current&&(clearTimeout(o.current),o.current=null),!n.current&&i&&i()}),[i]),u=l.useCallback((e=>{s&&e.preventDefault(),c()}),[s,c]),m=l.useCallback((e=>{s&&e.preventDefault(),d()}),[s,d]),h=l.useCallback((e=>{s&&e.preventDefault(),d()}),[s,d]);return l.useEffect((()=>{const t=e.current;if(t)return t.addEventListener("touchstart",u,{passive:!s}),t.addEventListener("touchend",m,{passive:!s}),t.addEventListener("touchcancel",h,{passive:!s}),()=>{t.removeEventListener("touchstart",u),t.removeEventListener("touchend",m),t.removeEventListener("touchcancel",h),o.current&&clearTimeout(o.current)}}),[e,u,m,h,s]),{isLongPress:n.current}},di=(e,t={})=>{const{threshold:a=50,onSwipeLeft:s,onSwipeRight:r,onSwipeUp:i,onSwipeDown:o}=t,n=l.useRef(null),c=l.useRef(null),d=l.useRef(!1),u=l.useCallback((e=>{n.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY,time:Date.now()},d.current=!1}),[]),m=l.useCallback((e=>{if(!n.current)return;c.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY,time:Date.now()};const t=Math.abs(n.current.x-c.current.x),a=Math.abs(n.current.y-c.current.y);(t>10||a>10)&&(d.current=!0)}),[]),h=l.useCallback((()=>{if(!n.current||!c.current||!d.current)return;const e=n.current.x-c.current.x,t=n.current.y-c.current.y,l=c.current.time-n.current.time,u=Math.abs(e)>Math.abs(t);(Math.abs(e)>a||Math.abs(t)>a)&&l<300&&(u?e>0&&s?s():e<0&&r&&r():t>0&&i?i():t<0&&o&&o()),n.current=null,c.current=null,d.current=!1}),[a,s,r,i,o]);return l.useEffect((()=>{const t=e.current;if(t)return t.addEventListener("touchstart",u,{passive:!0}),t.addEventListener("touchmove",m,{passive:!0}),t.addEventListener("touchend",h,{passive:!0}),()=>{t.removeEventListener("touchstart",u),t.removeEventListener("touchmove",m),t.removeEventListener("touchend",h)}}),[e,u,m,h]),{isSwiping:d.current}},ui={enableParticleAnimations:!0,enableComplexAnimations:!0,enableMouseInteractions:!0,enableParallaxEffects:!0,maxParticleCount:50,maxAnimationFPS:60,throttleMouseEvents:!1,reduceMotion:!1,lowPowerMode:!1,mobileOptimizations:!1},mi=(()=>{const e=(()=>{var e,t;const a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=!navigator.hardwareConcurrency||navigator.hardwareConcurrency<=4,r=window.matchMedia("(prefers-reduced-motion: reduce)").matches,i="slow-2g"===(null==(e=navigator.connection)?void 0:e.effectiveType)||"2g"===(null==(t=navigator.connection)?void 0:t.effectiveType);return{mobileOptimizations:a,lowPowerMode:s||i,reduceMotion:r,enableMouseInteractions:!a,enableParallaxEffects:!a&&!r,maxParticleCount:a?20:s?30:50,maxAnimationFPS:a?30:60,throttleMouseEvents:a||s}})();return{...ui,...e,enableParticleAnimations:!e.reduceMotion&&!e.lowPowerMode,enableComplexAnimations:!e.reduceMotion&&!e.mobileOptimizations,maxParticleCount:e.maxParticleCount||ui.maxParticleCount,maxAnimationFPS:e.maxAnimationFPS||ui.maxAnimationFPS,throttleMouseEvents:e.throttleMouseEvents||!1}})(),hi=()=>{const e=(()=>{const[e,t]=l.useState({width:0,height:0,aspectRatio:0,isMobile:!1,isTablet:!1,isDesktop:!1,isLandscape:!1,isPortrait:!1,safeAreaTop:0,safeAreaBottom:0,safeAreaLeft:0,safeAreaRight:0,availableHeight:0,availableWidth:0,scrollbarWidth:0,devicePixelRatio:1,orientation:"portrait",breakpoint:"md"}),a=l.useCallback((()=>{var e;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);const a=document.createElement("div");t.appendChild(a);const s=t.offsetWidth-a.offsetWidth;return null==(e=t.parentNode)||e.removeChild(t),s}),[]),s=l.useCallback((()=>{const e=getComputedStyle(document.documentElement);return{top:parseInt(e.getPropertyValue("--sat")||"0"),bottom:parseInt(e.getPropertyValue("--sab")||"0"),left:parseInt(e.getPropertyValue("--sal")||"0"),right:parseInt(e.getPropertyValue("--sar")||"0")}}),[]),r=l.useCallback((e=>e<640?"xs":e<768?"sm":e<1024?"md":e<1280?"lg":e<1536?"xl":"2xl"),[]),i=l.useCallback((()=>{const e=window.innerWidth,i=window.innerHeight,o=e/i,n=e>i?"landscape":"portrait",l=s(),c=a();t({width:e,height:i,aspectRatio:o,isMobile:e<768,isTablet:e>=768&&e<1024,isDesktop:e>=1024,isLandscape:"landscape"===n,isPortrait:"portrait"===n,safeAreaTop:l.top,safeAreaBottom:l.bottom,safeAreaLeft:l.left,safeAreaRight:l.right,availableHeight:i-l.top-l.bottom,availableWidth:e-l.left-l.right,scrollbarWidth:c,devicePixelRatio:window.devicePixelRatio||1,orientation:n,breakpoint:r(e)})}),[s,a,r]);return l.useEffect((()=>(i(),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),()=>{window.removeEventListener("resize",i),window.removeEventListener("orientationchange",i)})),[i]),{viewport:e,contentArea:{headerHeight:e.isMobile?60:80,bottomNavHeight:e.isMobile?80:100,availableContentHeight:e.availableHeight-(e.isMobile?140:180),contentPadding:e.isMobile?16:24,scrollableHeight:e.availableHeight-(e.isMobile?140:180)-32},recommendations:{shouldUseCompactLayout:e.isMobile||e.aspectRatio<.8,shouldReduceAnimations:e.devicePixelRatio>2||e.width<375,shouldOptimizeForTouch:e.isMobile||e.width<1024,recommendedFontSize:e.isMobile?14:16,recommendedSpacing:e.isMobile?8:12}}})();return l.useEffect((()=>{console.log("üîç Viewport Analysis:",{dimensions:`${e.viewport.width}x${e.viewport.height}`,aspectRatio:e.viewport.aspectRatio.toFixed(2),orientation:e.viewport.orientation,device:e.viewport.isMobile?"Mobile":e.viewport.isTablet?"Tablet":"Desktop",breakpoint:e.viewport.breakpoint,safeAreas:{top:e.viewport.safeAreaTop,bottom:e.viewport.safeAreaBottom,left:e.viewport.safeAreaLeft,right:e.viewport.safeAreaRight},contentArea:e.contentArea,recommendations:e.recommendations})}),[e]),e},xi=({isOpen:e,onClose:t,onShowToast:a})=>{const{user:s}=ya(),[r,i]=l.useState(!1),[o,n]=l.useState(!1),[d,u]=l.useState("basic");l.useState(!1);const[m,h]=l.useState({displayName:"",email:"",bio:"",location:"",website:"",phone:"",birthDate:"",favoriteGenre:"",favoriteArtist:"",theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}});l.useEffect((()=>{(async()=>{if((null==s?void 0:s.uid)&&e)try{const e=await Ps.getUserProfile(s.uid),t=await Ps.getProfileSettings(s.uid);e&&h({displayName:e.displayName||s.displayName||"",email:e.email||s.email||"",bio:e.bio||"",location:e.location||"",website:e.website||"",phone:e.phone||"",birthDate:e.birthDate||"",favoriteGenre:e.favoriteGenre||"",favoriteArtist:e.favoriteArtist||"",theme:t.theme||"dark",notifications:t.notifications,privacy:t.privacy})}catch(t){console.error("Error loading user profile:",t),null==a||a("error","Failed to load profile data")}})()}),[null==s?void 0:s.uid,e,a]);const x=(e,t)=>{h((a=>({...a,[e]:t})))},p=(e,t,a)=>{h((s=>({...s,[e]:{...s[e],[t]:a}})))},g=[{id:"basic",label:"Basic Info",icon:ue},{id:"social",label:"Social & Music",icon:T},{id:"preferences",label:"Preferences",icon:q},{id:"security",label:"Privacy",icon:J}];return c.jsx(Gt,{children:e&&c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs(Ht.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Customize your profile and preferences"})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(O,{className:"w-5 h-5 text-gray-500"})})]}),c.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 rounded-lg p-1",children:g.map((e=>{const t=e.icon;return c.jsxs("button",{onClick:()=>u(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-md text-sm font-medium transition-all "+(d===e.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[c.jsx(t,{className:"w-4 h-4"}),c.jsx("span",{children:e.label})]},e.id)}))}),c.jsxs("div",{className:"space-y-6",children:["basic"===d&&c.jsxs(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"relative inline-block",children:[c.jsx("div",{className:"w-40 h-40 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl border-2 border-white/10",children:c.jsx(ue,{className:"w-24 h-24 text-white"})}),c.jsx("button",{onClick:()=>{var e;return null==(e=document.getElementById("profile-image-input"))?void 0:e.click()},disabled:r,className:"absolute -bottom-2 -right-2 w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center shadow-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:r?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(me,{className:"w-5 h-5 text-white"})}),c.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:async e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r&&(null==s?void 0:s.uid)){i(!0);try{const e=await Ps.uploadProfileImage(s.uid,r);null==a||a("success","Profile image updated successfully!"),await Ps.updateUserProfile(s.uid,{photoURL:e})}catch(o){console.error("Error uploading image:",o),null==a||a("error","Failed to upload image. Please try again.")}finally{i(!1)}}},className:"hidden",disabled:r})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Click to change profile photo"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Display Name"}),c.jsx("input",{type:"text",value:m.displayName,onChange:e=>x("displayName",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your display name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Email"}),c.jsx("input",{type:"email",value:m.email,onChange:e=>x("email",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),c.jsx("input",{type:"tel",value:m.phone,onChange:e=>x("phone",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your phone number"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Location"}),c.jsx("input",{type:"text",value:m.location,onChange:e=>x("location",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your location"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Website"}),c.jsx("input",{type:"url",value:m.website,onChange:e=>x("website",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your website"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Birth Date"}),c.jsx("input",{type:"date",value:m.birthDate,onChange:e=>x("birthDate",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Bio"}),c.jsx("textarea",{value:m.bio,onChange:e=>x("bio",e.target.value),rows:3,className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",placeholder:"Tell us about yourself..."})]})]}),"social"===d&&c.jsxs(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Favorite Genre"}),c.jsxs("select",{value:m.favoriteGenre,onChange:e=>x("favoriteGenre",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[c.jsx("option",{value:"",children:"Select your favorite genre"}),c.jsx("option",{value:"pop",children:"Pop"}),c.jsx("option",{value:"rock",children:"Rock"}),c.jsx("option",{value:"hip-hop",children:"Hip Hop"}),c.jsx("option",{value:"electronic",children:"Electronic"}),c.jsx("option",{value:"jazz",children:"Jazz"}),c.jsx("option",{value:"classical",children:"Classical"}),c.jsx("option",{value:"country",children:"Country"}),c.jsx("option",{value:"r&b",children:"R&B"}),c.jsx("option",{value:"indie",children:"Indie"}),c.jsx("option",{value:"alternative",children:"Alternative"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Favorite Artist"}),c.jsx("input",{type:"text",value:m.favoriteArtist,onChange:e=>x("favoriteArtist",e.target.value),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your favorite artist"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(T,{className:"w-5 h-5 mr-2 text-purple-600"}),"Music Preferences"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"spotify",className:"w-4 h-4 text-purple-600",defaultChecked:!0}),c.jsx("label",{htmlFor:"spotify",className:"text-gray-700",children:"Spotify"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"youtube",className:"w-4 h-4 text-purple-600",defaultChecked:!0}),c.jsx("label",{htmlFor:"youtube",className:"text-gray-700",children:"YouTube"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"apple",className:"w-4 h-4 text-purple-600"}),c.jsx("label",{htmlFor:"apple",className:"text-gray-700",children:"Apple Music"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"soundcloud",className:"w-4 h-4 text-purple-600"}),c.jsx("label",{htmlFor:"soundcloud",className:"text-gray-700",children:"SoundCloud"})]})]})]})]}),"preferences"===d&&c.jsxs(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(he,{className:"w-5 h-5 mr-2 text-blue-600"}),"Theme Settings"]}),c.jsx("div",{className:"space-y-3",children:["light","dark","auto"].map((e=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"theme",value:e,checked:m.theme===e,onChange:e=>x("theme",e.target.value),className:"w-4 h-4 text-blue-500"}),c.jsxs("span",{className:"text-gray-700 capitalize",children:[e," Theme"]})]},e)))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(xe,{className:"w-5 h-5 mr-2 text-green-600"}),"Notification Settings"]}),c.jsx("div",{className:"space-y-3",children:Object.entries(m.notifications).map((([e,t])=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:t,onChange:t=>p("notifications",e,t.target.checked),className:"w-4 h-4 text-green-500 rounded"}),c.jsx("span",{className:"text-gray-700 capitalize",children:e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))})]},e)))})]})]}),"security"===d&&c.jsxs(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(J,{className:"w-5 h-5 mr-2 text-red-600"}),"Privacy Settings"]}),c.jsx("div",{className:"space-y-3",children:Object.entries(m.privacy).map((([e,t])=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:t,onChange:t=>p("privacy",e,t.target.checked),className:"w-4 h-4 text-red-500 rounded"}),c.jsx("span",{className:"text-gray-700 capitalize",children:e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))})]},e)))})]}),c.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Security"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Change Password"}),c.jsx("button",{className:"w-full bg-green-500 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"Enable Two-Factor Authentication"}),c.jsx("button",{className:"w-full bg-gray-500 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-gray-600 transition-colors",children:"View Login History"})]})]})]})]}),c.jsxs("div",{className:"flex space-x-3 mt-8 pt-6 border-t",children:[c.jsx("button",{onClick:t,disabled:o,className:"flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),c.jsxs("button",{onClick:async()=>{if(null==s?void 0:s.uid){n(!0);try{await Ps.updateUserProfile(s.uid,{displayName:m.displayName,bio:m.bio,location:m.location,website:m.website,phone:m.phone,birthDate:m.birthDate,favoriteGenre:m.favoriteGenre,favoriteArtist:m.favoriteArtist}),await Ps.updateProfileSettings(s.uid,{theme:m.theme,notifications:m.notifications,privacy:m.privacy}),null==a||a("success","Profile updated successfully!"),t()}catch(e){console.error("Error updating profile:",e),null==a||a("error","Failed to update profile. Please try again.")}finally{n(!1)}}},disabled:o,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[o?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(pe,{className:"w-4 h-4"}),c.jsx("span",{children:o?"Saving...":"Save Changes"})]})]})]})})})},pi=({onShowToast:e})=>{const{user:t}=ya(),[a,s]=l.useState(!1),[r,i]=l.useState(!1),[o,n]=l.useState("basic"),[d,u]=l.useState({displayName:"",email:"",bio:"",location:"",website:"",phone:"",birthDate:"",favoriteGenre:"",favoriteArtist:"",theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}});l.useEffect((()=>{(async()=>{if(null==t?void 0:t.uid)try{const e=await Ps.getUserProfile(t.uid),a=await Ps.getProfileSettings(t.uid);e&&u((s=>({...s,displayName:e.displayName||t.displayName||"",email:e.email||t.email||"",bio:e.bio||"",location:e.location||"",website:e.website||"",phone:e.phone||"",birthDate:e.birthDate||"",favoriteGenre:e.favoriteGenre||"",favoriteArtist:e.favoriteArtist||"",theme:a.theme||"dark",notifications:a.notifications,privacy:a.privacy})))}catch(uo){console.error("Error loading profile page:",uo),null==e||e("error","Failed to load profile")}})()}),[null==t?void 0:t.uid,e]);const m=(e,t)=>u((a=>({...a,[e]:t}))),h=(e,t,a)=>u((s=>({...s,[e]:{...s[e],[t]:a}}))),x=[{id:"basic",label:"Basic Info",icon:ue},{id:"social",label:"Social & Music",icon:T},{id:"preferences",label:"Preferences",icon:q},{id:"security",label:"Privacy",icon:J}];return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-8",children:[c.jsxs("header",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.history.back(),"aria-label":"Go back",className:"p-2 rounded-full hover:bg-accent",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Edit Profile"}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"Customize your profile and preferences"})]})]}),c.jsx("button",{onClick:async()=>{if(null==t?void 0:t.uid){i(!0);try{await Ps.updateUserProfile(t.uid,{displayName:d.displayName,bio:d.bio,location:d.location,website:d.website,phone:d.phone,birthDate:d.birthDate,favoriteGenre:d.favoriteGenre,favoriteArtist:d.favoriteArtist}),await Ps.updateProfileSettings(t.uid,{theme:d.theme,notifications:d.notifications,privacy:d.privacy}),null==e||e("success","Profile saved")}catch(uo){console.error("save error:",uo),null==e||e("error","Failed to save profile")}finally{i(!1)}}},disabled:r,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white py-2 px-4 rounded-lg font-medium disabled:opacity-50",children:r?"Saving‚Ä¶":"Save"})]}),c.jsx("div",{className:"flex justify-center px-2",children:c.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl max-w-full overflow-x-auto hide-scrollbar",children:x.map((({id:e,label:t,icon:a})=>c.jsxs("button",{onClick:()=>n(e),className:"flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all whitespace-nowrap min-w-0 flex-shrink-0 "+(o===e?"bg-gradient-to-r from-orange-500 to-pink-500 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-200/60 dark:border-gray-600/60 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600"),children:[c.jsx(a,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"text-xs font-medium",children:t})]},e)))})}),c.jsxs("div",{className:"space-y-6",children:["basic"===o&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"relative inline-block",children:[c.jsx("div",{className:"w-40 h-40 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl border-2 border-white/10",children:c.jsx(ue,{className:"w-24 h-24 text-white"})}),c.jsx("button",{onClick:()=>{var e;return null==(e=document.getElementById("profile-image-input"))?void 0:e.click()},disabled:a,className:"absolute -bottom-2 -right-2 w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center shadow-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:a?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(me,{className:"w-5 h-5 text-white"})}),c.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:async a=>{var r;const i=null==(r=a.target.files)?void 0:r[0];if(i&&(null==t?void 0:t.uid)){s(!0);try{const a=await Ps.uploadProfileImage(t.uid,i);await Ps.updateUserProfile(t.uid,{photoURL:a}),null==e||e("success","Profile image updated")}catch(uo){console.error("upload error:",uo),null==e||e("error","Failed to upload image")}finally{s(!1)}}},className:"hidden",disabled:a})]}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Click to change profile photo"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Display Name"}),c.jsx("input",{type:"text",value:d.displayName,onChange:e=>m("displayName",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",placeholder:"Enter your display name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),c.jsx("input",{type:"email",value:d.email,onChange:e=>m("email",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",placeholder:"Enter your email"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number"}),c.jsx("input",{type:"tel",value:d.phone,onChange:e=>m("phone",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",placeholder:"Enter your phone number"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),c.jsx("input",{type:"text",value:d.location,onChange:e=>m("location",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",placeholder:"Enter your location"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Website"}),c.jsx("input",{type:"url",value:d.website,onChange:e=>m("website",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",placeholder:"Enter your website"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Birth Date"}),c.jsx("input",{type:"date",value:d.birthDate,onChange:e=>m("birthDate",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),c.jsx("textarea",{value:d.bio,onChange:e=>m("bio",e.target.value),rows:3,className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3 resize-none",placeholder:"Tell us about yourself..."})]})]}),"social"===o&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Favorite Genre"}),c.jsxs("select",{value:d.favoriteGenre,onChange:e=>m("favoriteGenre",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",children:[c.jsx("option",{value:"",children:"Select your favorite genre"}),c.jsx("option",{value:"pop",children:"Pop"}),c.jsx("option",{value:"rock",children:"Rock"}),c.jsx("option",{value:"hip-hop",children:"Hip Hop"}),c.jsx("option",{value:"electronic",children:"Electronic"}),c.jsx("option",{value:"jazz",children:"Jazz"}),c.jsx("option",{value:"classical",children:"Classical"}),c.jsx("option",{value:"country",children:"Country"}),c.jsx("option",{value:"r&b",children:"R&B"}),c.jsx("option",{value:"indie",children:"Indie"}),c.jsx("option",{value:"alternative",children:"Alternative"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Favorite Artist"}),c.jsx("input",{type:"text",value:d.favoriteArtist,onChange:e=>m("favoriteArtist",e.target.value),className:"w-full bg-background/90 border border-border rounded-lg px-4 py-3",placeholder:"Enter your favorite artist"})]})]}),c.jsxs("div",{className:"bg-accent/40 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[c.jsx(T,{className:"w-5 h-5 mr-2"}),"Music Preferences"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0})," ",c.jsx("span",{children:"Spotify"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",defaultChecked:!0})," ",c.jsx("span",{children:"YouTube"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox"})," ",c.jsx("span",{children:"Apple Music"})]}),c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox"})," ",c.jsx("span",{children:"SoundCloud"})]})]})]})]}),"preferences"===o&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[c.jsx(he,{className:"w-5 h-5 mr-2"}),"Theme Settings"]}),c.jsx("div",{className:"space-y-3",children:["light","dark","auto"].map((e=>c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"theme",value:e,checked:d.theme===e,onChange:e=>m("theme",e.target.value)}),c.jsxs("span",{className:"capitalize",children:[e," Theme"]})]},e)))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[c.jsx(xe,{className:"w-5 h-5 mr-2"}),"Notification Settings"]}),c.jsx("div",{className:"space-y-3",children:Object.entries(d.notifications).map((([e,t])=>c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:t,onChange:t=>h("notifications",e,t.target.checked)}),c.jsx("span",{className:"capitalize",children:e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))})]},e)))})]})]}),"security"===o&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[c.jsx(J,{className:"w-5 h-5 mr-2"}),"Privacy Settings"]}),c.jsx("div",{className:"space-y-3",children:Object.entries(d.privacy).map((([e,t])=>c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:t,onChange:t=>h("privacy",e,t.target.checked)}),c.jsx("span",{className:"capitalize",children:e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))})]},e)))})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Account Security"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[c.jsx("button",{className:"bg-blue-500 text-white py-2 px-3 rounded-lg text-sm",children:"Change Password"}),c.jsx("button",{className:"bg-green-500 text-white py-2 px-3 rounded-lg text-sm",children:"Enable 2FA"}),c.jsx("button",{className:"bg-gray-500 text-white py-2 px-3 rounded-lg text-sm",children:"Login History"})]})]})]})]})]})},gi=({isOpen:e,onClose:t,onShowToast:a})=>{const{user:s}=ya(),[r,i]=l.useState(!1),[o,n]=l.useState(!1),[d,u]=l.useState(!1),[m,h]=l.useState(!1),[x,g]=l.useState({theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}});l.useEffect((()=>{(async()=>{if((null==s?void 0:s.uid)&&e){i(!0);try{const e=await Ps.getProfileSettings(s.uid);g(e)}catch(t){console.error("Error loading settings:",t),null==a||a("error","Failed to load settings")}finally{i(!1)}}})()}),[null==s?void 0:s.uid,e,a]);const f=(e,t,a)=>{g((s=>({...s,[e]:{...s[e],[t]:a}})))};return r?c.jsx(Gt,{children:e&&c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsx(Ht.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})})})}):c.jsx(Gt,{children:e&&c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs(Ht.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(O,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(he,{className:"w-5 h-5 mr-2 text-blue-500"}),"Theme Settings"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"theme",value:"light",checked:"light"===x.theme,onChange:e=>f("theme","theme",e.target.value),className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-gray-700",children:"Light Theme"})]}),c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===x.theme,onChange:e=>f("theme","theme",e.target.value),className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-gray-700",children:"Dark Theme"})]}),c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"theme",value:"auto",checked:"auto"===x.theme,onChange:e=>f("theme","theme",e.target.value),className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-gray-700",children:"Auto (System)"})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(xe,{className:"w-5 h-5 mr-2 text-green-500"}),"Notifications"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.notifications.email,onChange:e=>f("notifications","email",e.target.checked),className:"w-4 h-4 text-green-500 rounded"}),c.jsx(de,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:"Email Notifications"})]}),c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.notifications.push,onChange:e=>f("notifications","push",e.target.checked),className:"w-4 h-4 text-green-500 rounded"}),c.jsx(ge,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:"Push Notifications"})]}),c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.notifications.conversionComplete,onChange:e=>f("notifications","conversionComplete",e.target.checked),className:"w-4 h-4 text-green-500 rounded"}),c.jsx(p,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:"Conversion Complete Alerts"})]}),c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.notifications.weeklyReport,onChange:e=>f("notifications","weeklyReport",e.target.checked),className:"w-4 h-4 text-green-500 rounded"}),c.jsx(w,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:"Weekly Usage Reports"})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(J,{className:"w-5 h-5 mr-2 text-red-500"}),"Privacy & Security"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.privacy.shareStats,onChange:e=>f("privacy","shareStats",e.target.checked),className:"w-4 h-4 text-red-500 rounded"}),c.jsx(w,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:"Share Usage Statistics"})]}),c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.privacy.publicProfile,onChange:e=>f("privacy","publicProfile",e.target.checked),className:"w-4 h-4 text-red-500 rounded"}),c.jsx(ye,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"text-gray-700",children:"Public Profile"})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(Q,{className:"w-5 h-5 mr-2 text-orange-500"}),"Data Export"]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download all your data including profile information, conversion history, and settings."}),c.jsxs("button",{onClick:async()=>{if(null==s?void 0:s.uid){u(!0);try{const e=await Ps.exportUserData(s.uid),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`soundswapp-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),null==a||a("success","Data exported successfully!")}catch(e){console.error("Error exporting data:",e),null==a||a("error","Failed to export data")}finally{u(!1)}}},disabled:d,className:"bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[d?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(Q,{className:"w-4 h-4"}),c.jsx("span",{children:d?"Exporting...":"Export Data"})]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-red-600 mb-4 flex items-center",children:[c.jsx(y,{className:"w-5 h-5 mr-2"}),"Danger Zone"]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),m?c.jsxs("div",{className:"space-y-3",children:[c.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Are you sure? This will permanently delete your account and all data."}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>h(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-600 transition-colors",children:"Cancel"}),c.jsxs("button",{onClick:async()=>{if(null==s?void 0:s.uid)try{await Ps.deleteUserAccount(s.uid),null==a||a("success","Account deleted successfully"),t(),window.location.href="/"}catch(e){console.error("Error deleting account:",e),null==a||a("error","Failed to delete account")}},className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors flex items-center space-x-2",children:[c.jsx(fe,{className:"w-4 h-4"}),c.jsx("span",{children:"Yes, Delete Account"})]})]})]}):c.jsxs("button",{onClick:()=>h(!0),className:"bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors flex items-center space-x-2",children:[c.jsx(fe,{className:"w-4 h-4"}),c.jsx("span",{children:"Delete Account"})]})]})]}),c.jsxs("div",{className:"flex space-x-3 mt-8 pt-6 border-t",children:[c.jsx("button",{onClick:t,disabled:o,className:"flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),c.jsxs("button",{onClick:async()=>{if(null==s?void 0:s.uid){n(!0);try{await Ps.updateProfileSettings(s.uid,x),null==a||a("success","Settings saved successfully!"),t()}catch(e){console.error("Error saving settings:",e),null==a||a("error","Failed to save settings")}finally{n(!1)}}},disabled:o,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[o?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(pe,{className:"w-4 h-4"}),c.jsx("span",{children:o?"Saving...":"Save Settings"})]})]})]})})})},yi=()=>{const e=b();return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-8",children:[c.jsxs("header",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.history.back(),"aria-label":"Go back",className:"p-2 rounded-full hover:bg-accent",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsx("h1",{className:"text-2xl font-bold",children:"Preferences"})]}),c.jsx("section",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[c.jsxs("button",{onClick:()=>e("/preferences/theme"),className:"flex items-center justify-between rounded-xl px-4 py-3 bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 rounded-lg bg-violet-600/15 text-violet-400 flex items-center justify-center",children:c.jsx(he,{className:"w-5 h-5"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-medium",children:"Theme Settings"}),c.jsx("div",{className:"text-xs opacity-70",children:"Customize appearance"})]})]}),c.jsx(se,{className:"w-5 h-5 opacity-70"})]}),c.jsxs("button",{onClick:()=>e("/preferences/notifications"),className:"flex items-center justify-between rounded-xl px-4 py-3 bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 rounded-lg bg-green-600/15 text-green-400 flex items-center justify-center",children:c.jsx(xe,{className:"w-5 h-5"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-medium",children:"Notifications"}),c.jsx("div",{className:"text-xs opacity-70",children:"Manage alerts and updates"})]})]}),c.jsx(se,{className:"w-5 h-5 opacity-70"})]}),c.jsxs("button",{onClick:()=>e("/preferences/privacy"),className:"flex items-center justify-between rounded-xl px-4 py-3 bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 rounded-lg bg-red-600/15 text-red-400 flex items-center justify-center",children:c.jsx(J,{className:"w-5 h-5"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-medium",children:"Privacy & Security"}),c.jsx("div",{className:"text-xs opacity-70",children:"Manage your privacy"})]})]}),c.jsx(se,{className:"w-5 h-5 opacity-70"})]}),c.jsxs("button",{onClick:()=>e("/preferences/export"),className:"flex items-center justify-between rounded-xl px-4 py-3 bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 rounded-lg bg-orange-600/15 text-orange-400 flex items-center justify-center",children:c.jsx(Q,{className:"w-5 h-5"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-medium",children:"Export Data"}),c.jsx("div",{className:"text-xs opacity-70",children:"Download your data"})]})]}),c.jsx(se,{className:"w-5 h-5 opacity-70"})]})]})})]})},fi=({onShowToast:e})=>{const{user:t}=ya(),[a,s]=l.useState({theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}}),[r,i]=l.useState(!1);l.useEffect((()=>{(async()=>{if(null==t?void 0:t.uid)try{s(await Ps.getProfileSettings(t.uid))}catch(uo){console.error(uo),null==e||e("error","Failed to load settings")}})()}),[null==t?void 0:t.uid,e]);return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-6",children:[c.jsx(ji,{title:"Theme Settings"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"radio",name:"theme",value:"light",checked:"light"===a.theme,onChange:e=>s((t=>({...t,theme:e.target.value})))}),c.jsx("span",{children:"Light"})]}),c.jsxs("label",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===a.theme,onChange:e=>s((t=>({...t,theme:e.target.value})))}),c.jsx("span",{children:"Dark"})]}),c.jsxs("label",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"radio",name:"theme",value:"auto",checked:"auto"===a.theme,onChange:e=>s((t=>({...t,theme:e.target.value})))}),c.jsx("span",{children:"Auto (System)"})]})]}),c.jsx(Ni,{isSaving:r,onSave:async()=>{if(null==t?void 0:t.uid){i(!0);try{await Ps.updateProfileSettings(t.uid,a),null==e||e("success","Theme saved")}catch(uo){console.error(uo),null==e||e("error","Save failed")}finally{i(!1)}}}})]})},bi=({onShowToast:e})=>{const{user:t}=ya(),[a,s]=l.useState({theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}}),[r,i]=l.useState(!1);l.useEffect((()=>{(async()=>{if(null==t?void 0:t.uid)try{s(await Ps.getProfileSettings(t.uid))}catch(uo){console.error(uo),null==e||e("error","Failed to load settings")}})()}),[null==t?void 0:t.uid,e]);return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-6",children:[c.jsx(ji,{title:"Notifications"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(ki,{checked:a.notifications.email,onChange:e=>s((t=>({...t,notifications:{...t.notifications,email:e}}))),icon:c.jsx(de,{className:"w-4 h-4"}),label:"Email Notifications"}),c.jsx(ki,{checked:a.notifications.push,onChange:e=>s((t=>({...t,notifications:{...t.notifications,push:e}}))),icon:c.jsx(ge,{className:"w-4 h-4"}),label:"Push Notifications"}),c.jsx(ki,{checked:a.notifications.conversionComplete,onChange:e=>s((t=>({...t,notifications:{...t.notifications,conversionComplete:e}}))),icon:c.jsx(p,{className:"w-4 h-4"}),label:"Conversion Complete Alerts"}),c.jsx(ki,{checked:a.notifications.weeklyReport,onChange:e=>s((t=>({...t,notifications:{...t.notifications,weeklyReport:e}}))),icon:c.jsx(w,{className:"w-4 h-4"}),label:"Weekly Usage Reports"})]}),c.jsx(Ni,{isSaving:r,onSave:async()=>{if(null==t?void 0:t.uid){i(!0);try{await Ps.updateProfileSettings(t.uid,a),null==e||e("success","Notifications saved")}catch(uo){console.error(uo),null==e||e("error","Save failed")}finally{i(!1)}}}})]})},vi=({onShowToast:e})=>{const{user:t}=ya(),[a,s]=l.useState({theme:"dark",notifications:{email:!0,push:!0,conversionComplete:!0,weeklyReport:!1},privacy:{shareStats:!1,publicProfile:!1,showEmail:!1,showLocation:!1,showStats:!0}}),[r,i]=l.useState(!1);l.useEffect((()=>{(async()=>{if(null==t?void 0:t.uid)try{s(await Ps.getProfileSettings(t.uid))}catch(uo){console.error(uo),null==e||e("error","Failed to load settings")}})()}),[null==t?void 0:t.uid,e]);return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-6",children:[c.jsx(ji,{title:"Privacy & Security"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(ki,{checked:a.privacy.shareStats,onChange:e=>s((t=>({...t,privacy:{...t.privacy,shareStats:e}}))),icon:c.jsx(w,{className:"w-4 h-4"}),label:"Share Usage Statistics"}),c.jsx(ki,{checked:a.privacy.publicProfile,onChange:e=>s((t=>({...t,privacy:{...t.privacy,publicProfile:e}}))),icon:c.jsx(ye,{className:"w-4 h-4"}),label:"Public Profile"}),c.jsx(ki,{checked:a.privacy.showEmail,onChange:e=>s((t=>({...t,privacy:{...t.privacy,showEmail:e}}))),icon:c.jsx(de,{className:"w-4 h-4"}),label:"Show Email"}),c.jsx(ki,{checked:a.privacy.showLocation,onChange:e=>s((t=>({...t,privacy:{...t.privacy,showLocation:e}}))),icon:c.jsx(ue,{className:"w-4 h-4"}),label:"Show Location"}),c.jsx(ki,{checked:a.privacy.showStats,onChange:e=>s((t=>({...t,privacy:{...t.privacy,showStats:e}}))),icon:c.jsx(w,{className:"w-4 h-4"}),label:"Show Stats on Profile"})]}),c.jsx(Ni,{isSaving:r,onSave:async()=>{if(null==t?void 0:t.uid){i(!0);try{await Ps.updateProfileSettings(t.uid,a),null==e||e("success","Privacy settings saved")}catch(uo){console.error(uo),null==e||e("error","Save failed")}finally{i(!1)}}}})]})},wi=({onShowToast:e})=>{const{user:t}=ya(),[a,s]=l.useState(!1);return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-6",children:[c.jsx(ji,{title:"Export Data"}),c.jsx("p",{className:"text-sm opacity-80",children:"Download all your data including profile information, conversion history, and settings."}),c.jsxs("button",{onClick:async()=>{if(null==t?void 0:t.uid){s(!0);try{const a=await Ps.exportUserData(t.uid),s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`soundswapp-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),null==e||e("success","Data exported successfully!")}catch(a){console.error("Error exporting data:",a),null==e||e("error","Failed to export data")}finally{s(!1)}}},disabled:a,className:"bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors disabled:opacity-50 flex items-center gap-2 w-max",children:[a?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(Q,{className:"w-4 h-4"}),c.jsx("span",{children:a?"Exporting‚Ä¶":"Export Data"})]})]})},ji=({title:e})=>c.jsxs("header",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.history.back(),"aria-label":"Go back",className:"p-2 rounded-full hover:bg-accent",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsx("h1",{className:"text-2xl font-bold",children:e})]}),Ni=({isSaving:e,onSave:t})=>c.jsx("div",{className:"pt-4",children:c.jsx("button",{onClick:t,disabled:e,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white py-2 px-4 rounded-lg font-medium disabled:opacity-50",children:e?"Saving‚Ä¶":"Save"})}),ki=({checked:e,onChange:t,icon:a,label:s})=>c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e,onChange:e=>t(e.target.checked),className:"w-4 h-4"}),c.jsx("span",{className:"opacity-70",children:a}),c.jsx("span",{children:s})]}),Si=[{question:"How do I convert a playlist from Spotify to YouTube?",answer:"1. Connect your Spotify account\n2. Connect your YouTube account\n3. Select a Spotify playlist as source\n4. Choose YouTube as destination\n5. Click 'Start Conversion' and wait for the process to complete.",category:"conversion"},{question:"How do I convert a playlist from YouTube to Spotify?",answer:"1. Connect your YouTube account\n2. Connect your Spotify account\n3. Select a YouTube playlist as source\n4. Choose Spotify as destination\n5. Click 'Start Conversion' and wait for the process to complete.",category:"conversion"},{question:"Why are some tracks not found during conversion?",answer:"Tracks may not be found due to:\n‚Ä¢ Different song titles or artist names\n‚Ä¢ Regional availability differences\n‚Ä¢ Explicit content restrictions\n‚Ä¢ Platform-specific licensing\n\nThe app will show you which tracks failed and why.",category:"conversion"},{question:"How accurate is the track matching?",answer:"Our matching algorithm uses multiple factors:\n‚Ä¢ Song title similarity\n‚Ä¢ Artist name matching\n‚Ä¢ Duration comparison\n‚Ä¢ Popularity indicators\n\nWe aim for 85%+ accuracy, but results may vary.",category:"technical"},{question:"What are the conversion limits?",answer:"Free users: 50 conversions per month\nPremium users: Unlimited conversions\n\nEach playlist conversion counts as 1 conversion, regardless of track count.",category:"account"},{question:"How do I connect my Spotify account?",answer:"1. Click 'Connect Spotify' on the connections page\n2. Log in to your Spotify account\n3. Grant permission to access your playlists\n4. Your account will be connected and ready to use.",category:"general"},{question:"How do I connect my YouTube account?",answer:"1. Click 'Connect YouTube' on the connections page\n2. Log in to your Google account\n3. Grant permission to access your YouTube playlists\n4. Your account will be connected and ready to use.",category:"general"},{question:"Can I convert private playlists?",answer:"Yes! You can convert both public and private playlists. The converted playlist will be created as private by default for your privacy.",category:"conversion"},{question:"What happens if my connection expires?",answer:"If your connection expires, you'll see a 'Reconnect' button. Simply click it and log in again to restore access to your playlists.",category:"account"},{question:"How do I view my conversion history?",answer:"Go to the 'History' tab in your profile to see all your past conversions, including success rates and failed tracks.",category:"general"}],Ti=({isOpen:e,onClose:t,onShowToast:a})=>{var s;const[r,i]=l.useState("all"),[o,n]=l.useState(new Set),d="all"===r?Si:Si.filter((e=>e.category===r)),u=[{key:"all",label:"All Questions",icon:we},{key:"general",label:"Getting Started",icon:je},{key:"conversion",label:"Conversion Process",icon:ve},{key:"technical",label:"Technical Issues",icon:Ne},{key:"account",label:"Account & Limits",icon:f}];return c.jsx(Gt,{children:e&&c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs(Ht.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Help & Support"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Find answers to common questions and get support"})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(O,{className:"w-5 h-5 text-gray-500"})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Categories"}),c.jsx("div",{className:"space-y-2",children:u.map((e=>{const t=e.icon;return c.jsxs("button",{onClick:()=>i(e.key),className:"w-full flex items-center space-x-3 p-3 rounded-lg text-left transition-colors "+(r===e.key?"bg-blue-50 text-blue-700 border border-blue-200":"hover:bg-gray-50 text-gray-700"),children:[c.jsx(t,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:e.label})]},e.key)}))}),c.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Need More Help?"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Can't find what you're looking for? Contact our support team."}),c.jsxs("button",{onClick:()=>{const e=encodeURIComponent("SoundSwapp Support Request"),t=encodeURIComponent("Hello SoundSwapp Support Team,\n\nI need help with the following issue:\n\n[Please describe your issue here]\n\nMy account details:\n- Email: [Your email]\n- Issue encountered: [Date and time]\n\nThank you for your assistance.\n\nBest regards,\n[Your name]");window.open(`mailto:support@soundswapp.com?subject=${e}&body=${t}`,"_blank")},className:"w-full bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors flex items-center justify-center space-x-2",children:[c.jsx(de,{className:"w-4 h-4"}),c.jsx("span",{children:"Contact Support"})]})]})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"all"===r?"Frequently Asked Questions":`${null==(s=u.find((e=>e.key===r)))?void 0:s.label}`}),c.jsx("div",{className:"space-y-4",children:d.map(((e,t)=>c.jsxs(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"border border-gray-200 rounded-lg overflow-hidden",children:[c.jsxs("button",{onClick:()=>(e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),n(t)})(t),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors flex items-center justify-between",children:[c.jsx("span",{className:"font-medium text-gray-900",children:e.question}),o.has(t)?c.jsx(be,{className:"w-5 h-5 text-gray-500"}):c.jsx(se,{className:"w-5 h-5 text-gray-500"})]}),c.jsx(Gt,{children:o.has(t)&&c.jsx(Ht.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4",children:c.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:e.answer})})})]},t)))}),c.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200",children:[c.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[c.jsx(ve,{className:"w-5 h-5 mr-2 text-green-500"}),"Quick Start Guide"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h5",{className:"font-medium text-gray-900 flex items-center",children:[c.jsx($,{className:"w-4 h-4 mr-2 text-green-500"}),"Spotify to YouTube"]}),c.jsxs("ol",{className:"text-sm text-gray-600 space-y-1",children:[c.jsx("li",{children:"1. Connect both accounts"}),c.jsx("li",{children:"2. Select Spotify playlist"}),c.jsx("li",{children:"3. Choose YouTube destination"}),c.jsx("li",{children:"4. Start conversion"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h5",{className:"font-medium text-gray-900 flex items-center",children:[c.jsx(W,{className:"w-4 h-4 mr-2 text-red-500"}),"YouTube to Spotify"]}),c.jsxs("ol",{className:"text-sm text-gray-600 space-y-1",children:[c.jsx("li",{children:"1. Connect both accounts"}),c.jsx("li",{children:"2. Select YouTube playlist"}),c.jsx("li",{children:"3. Choose Spotify destination"}),c.jsx("li",{children:"4. Start conversion"})]})]})]})]})]})]})]})})})},Ci=({onShowToast:e})=>{var t;const[a,s]=l.useState("all"),[r,i]=l.useState(new Set),o="all"===a?Si:Si.filter((e=>e.category===a)),n=[{key:"all",label:"All Questions",icon:we},{key:"general",label:"Getting Started",icon:je},{key:"conversion",label:"Conversion Process",icon:ve},{key:"technical",label:"Technical Issues",icon:Ne},{key:"account",label:"Account & Limits",icon:f}];return c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-8",children:[c.jsx("header",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.history.back(),"aria-label":"Go back",className:"p-2 rounded-full hover:bg-accent",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsx("h1",{className:"text-2xl font-bold",children:"Help & Support"})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Categories"}),c.jsx("div",{className:"space-y-2",children:n.map((e=>{const t=e.icon;return c.jsxs("button",{onClick:()=>s(e.key),className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors "+(a===e.key?"bg-blue-50 text-blue-700 border border-blue-200":"hover:bg-accent text-foreground"),children:[c.jsx(t,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:e.label})]},e.key)}))})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"all"===a?"Frequently Asked Questions":null==(t=n.find((e=>e.key===a)))?void 0:t.label}),c.jsx("div",{className:"space-y-4",children:o.map(((e,t)=>c.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[c.jsxs("button",{onClick:()=>(e=>{const t=new Set(r);t.has(e)?t.delete(e):t.add(e),i(t)})(t),className:"w-full p-4 text-left hover:bg-accent/40 transition-colors flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:e.question}),r.has(t)?c.jsx(be,{className:"w-5 h-5"}):c.jsx(se,{className:"w-5 h-5"})]}),r.has(t)&&c.jsx("div",{className:"px-4 pb-4 text-muted-foreground whitespace-pre-line",children:e.answer})]},t)))})]})]}),c.jsxs("section",{className:"p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-semibold mb-4 flex items-center",children:[c.jsx(ve,{className:"w-5 h-5 mr-2"}),"Quick Start Guide"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsxs("h5",{className:"font-medium flex items-center",children:[c.jsx($,{className:"w-4 h-4 mr-2"}),"Spotify to YouTube"]}),c.jsxs("ol",{className:"space-y-1 mt-2",children:[c.jsx("li",{children:"1. Connect both accounts"}),c.jsx("li",{children:"2. Select Spotify playlist"}),c.jsx("li",{children:"3. Choose YouTube destination"}),c.jsx("li",{children:"4. Start conversion"})]})]}),c.jsxs("div",{children:[c.jsxs("h5",{className:"font-medium flex items-center",children:[c.jsx(W,{className:"w-4 h-4 mr-2"}),"YouTube to Spotify"]}),c.jsxs("ol",{className:"space-y-1 mt-2",children:[c.jsx("li",{children:"1. Connect both accounts"}),c.jsx("li",{children:"2. Select YouTube playlist"}),c.jsx("li",{children:"3. Choose Spotify destination"}),c.jsx("li",{children:"4. Start conversion"})]})]})]})]})]})},Ei=class e{constructor(){n(this,"stripe",null),this.initializeStripe()}static getInstance(){return e.instance||(e.instance=new e),e.instance}async initializeStripe(){try{const{loadStripe:e}=await d((()=>import("./vendor-0d2b1560.js").then((e=>e.cy))),["assets/vendor-0d2b1560.js","assets/react-core-d1332efd.js"]),t={}.VITE_STRIPE_PUBLISHABLE_KEY;if(!t)return void console.warn("Stripe publishable key not found. Payment features will be disabled.");this.stripe=await e(t)}catch(e){console.error("Failed to initialize Stripe:",e)}}async getPaymentPlans(){return[{id:"premium-monthly",name:"Premium Monthly",price:9.99,currency:"USD",interval:"month",features:["Unlimited conversions","Advanced track matching","Priority support","No ads","Export unlimited data","Custom playlist names"],stripePriceId:{}.VITE_STRIPE_PREMIUM_MONTHLY_PRICE_ID},{id:"premium-yearly",name:"Premium Yearly",price:99.99,currency:"USD",interval:"year",features:["Unlimited conversions","Advanced track matching","Priority support","No ads","Export unlimited data","Custom playlist names","2 months free (save 20%)"],stripePriceId:{}.VITE_STRIPE_PREMIUM_YEARLY_PRICE_ID}]}async createCheckoutSession(e,t){try{const a=(await this.getPaymentPlans()).find((t=>t.id===e));if(!a)throw new Error("Invalid plan selected");const{paymentAPI:s}=await d((()=>import("./paymentApi-c6ae94d4.js")),[]);return(await s.createCheckoutSession({planId:e,userId:t,stripePriceId:a.stripePriceId,successUrl:`${window.location.origin}/payment/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/payment/cancel`})).sessionId}catch(a){throw console.error("Error creating checkout session:",a),new Error("Failed to create checkout session")}}async redirectToCheckout(e){if(!this.stripe)throw new Error("Stripe not initialized");const{error:t}=await this.stripe.redirectToCheckout({sessionId:e});if(t)throw new Error(t.message)}async handlePaymentSuccess(e,t){try{const{paymentAPI:a}=await d((()=>import("./paymentApi-c6ae94d4.js")),[]),s=await a.verifyPayment({sessionId:e,userId:t});await this.updateUserToPremium(t,s.subscription)}catch(a){throw console.error("Error handling payment success:",a),a}}async updateUserToPremium(e,t){try{const a=Je(oa,"users",e);await it(a,{isPremium:!0,premiumSince:new Date,subscription:{id:t.id,status:t.status,currentPeriodStart:new Date(1e3*t.current_period_start),currentPeriodEnd:new Date(1e3*t.current_period_end),cancelAtPeriodEnd:t.cancel_at_period_end,stripeSubscriptionId:t.id,createdAt:new Date,updatedAt:new Date},lastUpdated:new Date}),console.log("User upgraded to premium successfully")}catch(a){throw console.error("Error updating user to premium:",a),a}}async getUserSubscription(e){try{const t=await st(Je(oa,"users",e));if(!t.exists())return null;return t.data().subscription||null}catch(t){return console.error("Error getting user subscription:",t),null}}async cancelSubscription(e){try{const t=await this.getUserSubscription(e);if(!t)throw new Error("No active subscription found");const{paymentAPI:a}=await d((()=>import("./paymentApi-c6ae94d4.js")),[]);await a.cancelSubscription(t.stripeSubscriptionId,e);const s=Je(oa,"users",e);await it(s,{"subscription.status":"canceled","subscription.cancelAtPeriodEnd":!0,"subscription.updatedAt":new Date}),console.log("Subscription canceled successfully")}catch(t){throw console.error("Error canceling subscription:",t),t}}async reactivateSubscription(e){try{const t=await this.getUserSubscription(e);if(!t)throw new Error("No subscription found");const{paymentAPI:a}=await d((()=>import("./paymentApi-c6ae94d4.js")),[]);await a.reactivateSubscription(t.stripeSubscriptionId,e);const s=Je(oa,"users",e);await it(s,{"subscription.status":"active","subscription.cancelAtPeriodEnd":!1,"subscription.updatedAt":new Date}),console.log("Subscription reactivated successfully")}catch(t){throw console.error("Error reactivating subscription:",t),t}}async hasActivePremium(e){try{const t=await this.getUserSubscription(e);return!!t&&("active"===t.status&&!t.cancelAtPeriodEnd)}catch(t){return console.error("Error checking premium status:",t),!1}}async getSubscriptionDetails(e){try{const t=await this.getUserSubscription(e);return t?{isPremium:"active"===t.status&&!t.cancelAtPeriodEnd,planName:"premium-monthly"===t.planId?"Premium Monthly":"Premium Yearly",nextBillingDate:t.currentPeriodEnd,cancelAtPeriodEnd:t.cancelAtPeriodEnd,status:t.status}:null}catch(t){return console.error("Error getting subscription details:",t),null}}};n(Ei,"instance");const Pi=Ei.getInstance(),Ai=({isOpen:e,onClose:t,onShowToast:a})=>{const{user:s}=ya(),[r,i]=l.useState([]),[o,n]=l.useState("premium-monthly"),[d,u]=l.useState(!1),[m,h]=l.useState(!1),[x,p]=l.useState(null);l.useEffect((()=>{(async()=>{if(e){u(!0);try{const e=await Pi.getPaymentPlans();i(e)}catch(t){console.error("Error loading plans:",t),null==a||a("error","Failed to load payment plans")}finally{u(!1)}}})(),(async()=>{if((null==s?void 0:s.uid)&&e)try{const e=await Pi.getSubscriptionDetails(s.uid);p(e)}catch(t){console.error("Error loading subscription details:",t)}})()}),[e,null==s?void 0:s.uid,a]);const g=r.find((e=>e.id===o));return c.jsx(Gt,{children:e&&c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs(Ht.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[c.jsx(ke,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Upgrade to Premium"]}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Unlock unlimited conversions and advanced features"})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(O,{className:"w-5 h-5 text-gray-500"})})]}),x&&c.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Current Subscription"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Plan:"}),c.jsx("span",{className:"ml-2 font-medium",children:x.planName})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Status:"}),c.jsx("span",{className:"ml-2 font-medium "+(x.isPremium?"text-green-600":"text-red-600"),children:x.status})]}),x.nextBillingDate&&c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Next billing:"}),c.jsx("span",{className:"ml-2 font-medium",children:new Date(x.nextBillingDate).toLocaleDateString()})]})]}),x.cancelAtPeriodEnd&&c.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ne,{className:"w-4 h-4 text-yellow-600 mr-2"}),c.jsxs("span",{className:"text-sm text-yellow-800",children:["Your subscription will end on ",new Date(x.nextBillingDate).toLocaleDateString()]})]}),c.jsx("button",{onClick:async()=>{if(null==s?void 0:s.uid){h(!0);try{await Pi.reactivateSubscription(s.uid),null==a||a("success","Subscription reactivated successfully"),t()}catch(e){console.error("Error reactivating subscription:",e),null==a||a("error","Failed to reactivate subscription")}finally{h(!1)}}},disabled:m,className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Reactivate Subscription"})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choose Your Plan"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((e=>c.jsxs(Ht.div,{onClick:()=>n(e.id),className:"p-6 rounded-xl border-2 cursor-pointer transition-all "+(o===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",e.price]}),c.jsxs("div",{className:"text-sm text-gray-600",children:["per ",e.interval]})]})]}),c.jsx("div",{className:"space-y-2 mb-4",children:e.features.map(((e,t)=>c.jsxs("div",{className:"flex items-center text-sm",children:[c.jsx(H,{className:"w-4 h-4 text-green-500 mr-2"}),c.jsx("span",{className:"text-gray-700",children:e})]},t)))}),"premium-yearly"===e.id&&c.jsx("div",{className:"mb-4 p-2 bg-green-100 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center text-sm text-green-800",children:[c.jsx(M,{className:"w-4 h-4 mr-1"}),"Save 20% with yearly billing"]})})]},e.id)))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Premium Features"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(Y,{className:"w-5 h-5 text-purple-600 mr-2"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Unlimited Conversions"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Convert as many playlists as you want"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(T,{className:"w-5 h-5 text-blue-600 mr-2"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Advanced Matching"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Better track matching algorithms"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(J,{className:"w-5 h-5 text-green-600 mr-2"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Priority Support"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Get help faster with priority support"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg border border-orange-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(Q,{className:"w-5 h-5 text-orange-600 mr-2"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Unlimited Exports"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Export unlimited data and reports"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg border border-yellow-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(N,{className:"w-5 h-5 text-yellow-600 mr-2"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"Custom Names"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Customize playlist names during conversion"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-pink-50 to-rose-50 rounded-lg border border-pink-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(ke,{className:"w-5 h-5 text-pink-600 mr-2"}),c.jsx("span",{className:"font-semibold text-gray-900",children:"No Ads"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Enjoy an ad-free experience"})]})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:t,disabled:m,className:"flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),(null==x?void 0:x.isPremium)?c.jsxs("button",{onClick:async()=>{if(null==s?void 0:s.uid){h(!0);try{await Pi.cancelSubscription(s.uid),null==a||a("success","Subscription canceled successfully"),t()}catch(e){console.error("Error canceling subscription:",e),null==a||a("error","Failed to cancel subscription")}finally{h(!1)}}},disabled:m,className:"flex-1 bg-red-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[m?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(U,{className:"w-4 h-4"}),c.jsx("span",{children:m?"Processing...":"Cancel Subscription"})]}):c.jsxs("button",{onClick:async()=>{if(null==s?void 0:s.uid){h(!0);try{const e=await Pi.createCheckoutSession(o,s.uid);await Pi.redirectToCheckout(e)}catch(e){console.error("Error starting checkout:",e),null==a||a("error","Failed to start checkout process")}finally{h(!1)}}},disabled:m||d,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[m?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsx(Se,{className:"w-4 h-4"}),c.jsx("span",{children:m?"Processing...":`Upgrade to ${(null==g?void 0:g.name)||"Premium"}`}),!m&&c.jsx(Te,{className:"w-4 h-4"})]})]}),c.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(J,{className:"w-5 h-5 text-gray-500 mr-3 mt-0.5"}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsx("p",{className:"font-medium mb-1",children:"Secure Payment Processing"}),c.jsx("p",{children:"Your payment information is securely processed by Stripe. We never store your credit card details."})]})]})})]})})})},_i=({onShowToast:e})=>{const{user:t}=ya(),[a,s]=l.useState([]),[r,i]=l.useState("premium-monthly"),[o,n]=l.useState(!1),[d,u]=l.useState(!1),[m,h]=l.useState(null);l.useEffect((()=>{(async()=>{try{const e=await Pi.getPaymentPlans();if(s(e),null==t?void 0:t.uid){const e=await Pi.getSubscriptionDetails(t.uid);h(e)}}catch(uo){console.error("PremiumPage load error:",uo),null==e||e("error","Failed to load premium data")}})()}),[null==t?void 0:t.uid,e]);return a.find((e=>e.id===r)),c.jsxs("div",{className:"min-h-screen px-4 sm:px-6 py-6 space-y-8",children:[c.jsxs("header",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>window.history.back(),"aria-label":"Go back",className:"p-2 rounded-full hover:bg-accent",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"15 18 9 12 15 6"})})}),c.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[c.jsx(ke,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Premium"]})]}),(null==m?void 0:m.isPremium)?c.jsx("button",{onClick:async()=>{if(null==t?void 0:t.uid){u(!0);try{await Pi.cancelSubscription(t.uid),null==e||e("success","Subscription canceled"),window.history.back()}catch(uo){console.error("cancel error:",uo),null==e||e("error","Failed to cancel subscription")}finally{u(!1)}}},disabled:d,className:"bg-red-500 text-white py-2 px-4 rounded-lg font-medium disabled:opacity-50",children:d?"Processing‚Ä¶":"Cancel"}):c.jsx("button",{onClick:async()=>{if(null==t?void 0:t.uid){u(!0);try{const e=await Pi.createCheckoutSession(r,t.uid);await Pi.redirectToCheckout(e)}catch(uo){console.error("upgrade error:",uo),null==e||e("error","Failed to start checkout")}finally{u(!1)}}},disabled:d||o,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white py-2 px-4 rounded-lg font-medium disabled:opacity-50",children:d?"Processing‚Ä¶":"Upgrade"})]}),m&&c.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Current Subscription"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),c.jsx("span",{className:"ml-2 font-medium",children:m.planName})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Status:"}),c.jsx("span",{className:"ml-2 font-medium "+(m.isPremium?"text-green-600":"text-red-600"),children:m.status})]}),m.nextBillingDate&&c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Next billing:"}),c.jsx("span",{className:"ml-2 font-medium",children:new Date(m.nextBillingDate).toLocaleDateString()})]})]}),m.cancelAtPeriodEnd&&c.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm",children:["Your subscription will end on ",new Date(m.nextBillingDate).toLocaleDateString(),c.jsx("button",{onClick:async()=>{if(null==t?void 0:t.uid){u(!0);try{await Pi.reactivateSubscription(t.uid),null==e||e("success","Subscription reactivated")}catch(uo){console.error("reactivate error:",uo),null==e||e("error","Failed to reactivate")}finally{u(!1)}}},className:"ml-2 text-blue-600 hover:text-blue-800 font-medium",children:"Reactivate"})]})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Plan"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map((e=>c.jsxs("button",{onClick:()=>i(e.id),className:"text-left p-6 rounded-xl border-2 transition-all "+(r===e.id?"border-blue-500 bg-blue-50":"border-border hover:border-gray-300"),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h4",{className:"text-lg font-semibold",children:e.name}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-2xl font-bold",children:["$",e.price]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["per ",e.interval]})]})]}),c.jsx("div",{className:"space-y-2 text-sm",children:e.features.map(((e,t)=>c.jsxs("div",{className:"flex items-center",children:[c.jsx(H,{className:"w-4 h-4 text-green-500 mr-2"}),c.jsx("span",{children:e})]},t)))})]},e.id)))})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"Premium Features"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(Y,{className:"w-5 h-5 mr-2"}),c.jsx("span",{className:"font-semibold",children:"Unlimited Conversions"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Convert as many playlists as you want"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(T,{className:"w-5 h-5 mr-2"}),c.jsx("span",{className:"font-semibold",children:"Advanced Matching"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Better track matching algorithms"})]}),c.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx(J,{className:"w-5 h-5 mr-2"}),c.jsx("span",{className:"font-semibold",children:"Priority Support"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Get help faster with priority support"})]})]})]})]})},Ii=({onShowToast:e,setActiveTab:t})=>{var a,s;const{user:r,signOut:i}=ya(),[o,n]=l.useState(!1),[d,u]=l.useState(!1),[m,h]=l.useState(!1),[x,g]=l.useState(!1),[y,f]=l.useState(null),[v,w]=l.useState(null),[j,N]=l.useState(!1),[k,S]=l.useState("/images/default-avatar.svg"),E=b(),{isMobile:P}=ti();l.useEffect((()=>{(async()=>{if(null==r?void 0:r.uid){console.log("[ProfileTab] Starting to load user data for:",r.uid);try{const[e,t]=await Promise.all([Ps.getUserStats(r.uid),Ps.getUserProfile(r.uid)]);f(e),w(t)}catch(t){console.error("Error loading user data:",t),null==e||e("error","Failed to load user data"),f({conversions:0,tracks:0,monthlyUsage:0,monthlyLimit:50,platformUsage:{spotify:0,youtube:0,soundcloud:0},successRate:0,totalPlaylists:0}),w({id:r.uid,displayName:r.displayName||"User",email:r.email||"",photoURL:r.photoURL||void 0,isPremium:!1,createdAt:new Date(r.metadata.creationTime||Date.now()),lastActive:new Date})}}else console.log("[ProfileTab] No user UID available, skipping data load")})()}),[null==r?void 0:r.uid,e]),l.useEffect((()=>{const e=(null==v?void 0:v.photoURL)||(null==r?void 0:r.photoURL)||"/images/default-avatar.svg";S(e)}),[null==v?void 0:v.photoURL,null==r?void 0:r.photoURL]);return c.jsxs("div",{className:"h-full overflow-y-auto pb-[calc(5rem+env(safe-area-inset-bottom))]",children:[c.jsx("div",{className:"px-4 sm:px-6 pt-6 pb-4 space-y-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-[#FF7A59] via-[#FF007A] to-[#00C4CC] p-8 text-white shadow-xl",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10"}),c.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center shadow-2xl overflow-hidden border-2 border-white/10",children:c.jsx("img",{src:k,alt:"Profile",className:"w-24 h-24 rounded-full object-cover",loading:"lazy",onError:e=>{e.currentTarget.src.includes("/images/default-avatar.svg")||S("/images/default-avatar.svg")}})}),c.jsx("button",{onClick:()=>{var e;return null==(e=document.getElementById("profile-image-input"))?void 0:e.click()},className:"absolute -bottom-2 -right-2 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center shadow-lg hover:bg-blue-600 transition-colors",children:c.jsx(me,{className:"w-4 h-4 text-white"})}),c.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:async t=>{var a;const s=null==(a=t.target.files)?void 0:a[0];if(s){N(!0);try{const t=await Ps.uploadProfileImage((null==r?void 0:r.uid)||"",s);t?(w((e=>e?{...e,photoURL:t}:null)),null==e||e("success","Profile image updated successfully!")):null==e||e("error","Failed to update profile image.")}catch(i){console.error("Error uploading image:",i),null==e||e("error","Failed to update profile image.")}finally{N(!1)}}},className:"hidden",disabled:j})]}),c.jsxs("div",{className:"text-white",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:(null==v?void 0:v.displayName)||(null==r?void 0:r.displayName)||"User"}),c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx(ke,{className:"w-4 h-4 text-yellow-400"}),c.jsx("span",{className:"text-white/90 text-sm font-medium",children:(null==v?void 0:v.isPremium)?"Premium Member":"Free User"})]}),(null==v?void 0:v.isPremium)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ke,{className:"w-3 h-3 text-yellow-400"}),c.jsx("span",{className:"text-white/80 text-xs",children:"Premium Features Active"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:gap-6",children:[c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 sm:p-5 border border-white/30",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3 min-w-0",children:[c.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-white/20 rounded-lg flex items-center justify-center shrink-0",children:c.jsx(T,{className:"w-4 h-4 text-white"})}),c.jsx("span",{className:"text-white text-xs sm:text-sm font-medium tracking-tight leading-none whitespace-nowrap",children:"Conversions"})]}),c.jsx("div",{className:"text-2xl font-bold text-white",children:(null==y?void 0:y.conversions)||0}),c.jsx("div",{className:"text-xs text-white/60",children:"Total Playlists"})]}),c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 sm:p-5 border border-white/30",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3 min-w-0",children:[c.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-white/20 rounded-lg flex items-center justify-center shrink-0",children:c.jsx(p,{className:"w-4 h-4 text-white"})}),c.jsx("span",{className:"text-white text-xs sm:text-sm font-medium tracking-tight leading-none whitespace-nowrap",children:"Tracks"})]}),c.jsx("div",{className:"text-2xl font-bold text-white",children:(null==y?void 0:y.tracks)||0}),c.jsx("div",{className:"text-xs text-white/60",children:"Successfully Converted"})]})]})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-card rounded-xl p-6 border border-border shadow-lg",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Usage Analytics"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-muted-foreground text-sm",children:"This Month"}),c.jsxs("span",{className:"text-foreground font-semibold text-sm",children:[(null==y?void 0:y.monthlyUsage)||0,"/",(null==y?void 0:y.monthlyLimit)||50]})]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:c.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:(y?y.monthlyUsage/y.monthlyLimit*100:0)+"%"}})}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[y?y.monthlyLimit-y.monthlyUsage:50," conversions remaining"]})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-card rounded-xl p-6 border border-border shadow-lg",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Account Information"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(de,{className:"w-4 h-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"Email"})]}),c.jsx("span",{className:"text-sm text-foreground font-medium",children:(null==v?void 0:v.email)||(null==r?void 0:r.email)||"Not available"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(U,{className:"w-4 h-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"Member Since"})]}),c.jsx("span",{className:"text-sm text-foreground font-medium",children:(null==v?void 0:v.createdAt)?new Date(v.createdAt).toLocaleDateString():"Unknown"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(C,{className:"w-4 h-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Active"})]}),c.jsx("span",{className:"text-sm text-foreground font-medium",children:(null==v?void 0:v.lastActive)?new Date(v.lastActive).toLocaleDateString():"Today"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(J,{className:"w-4 h-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm text-muted-foreground",children:"Account Status"})]}),c.jsx("span",{className:"text-sm text-foreground font-medium",children:(null==v?void 0:v.isPremium)?"Premium":"Free"})]})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-green-50 dark:bg-green-950/20 rounded-xl p-6 border border-green-200 dark:border-green-800 shadow-lg",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Platform Usage"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx($,{className:"w-5 h-5 text-green-500"}),c.jsx("span",{className:"text-foreground font-medium text-sm",children:"Spotify"})]}),c.jsxs("span",{className:"text-muted-foreground text-sm",children:[(null==(a=null==y?void 0:y.platformUsage)?void 0:a.spotify)||20," conversions"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(W,{className:"w-5 h-5 text-red-500"}),c.jsx("span",{className:"text-foreground font-medium text-sm",children:"YouTube"})]}),c.jsxs("span",{className:"text-muted-foreground text-sm",children:[(null==(s=null==y?void 0:y.platformUsage)?void 0:s.youtube)||20," conversions"]})]})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-8",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[c.jsx("h3",{className:"text-xl font-bold text-foreground mb-8",children:"Quick Actions"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs(Ht.button,{onClick:()=>{null==t||t("converter"),null==e||e("info","Starting new conversion...")},className:"bg-gradient-to-br from-red-500 via-pink-500 to-purple-600 text-white py-8 px-8 rounded-2xl font-semibold flex flex-col items-center justify-center space-y-4 shadow-2xl hover:shadow-3xl transition-all duration-300 backdrop-blur-sm border border-white/10",whileHover:{scale:1.05,boxShadow:"0 25px 50px -12px rgba(239, 68, 68, 0.4)"},whileTap:{scale:.98},children:[c.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:c.jsx(Ce,{className:"w-8 h-8 text-white"})}),c.jsx("span",{className:"text-white text-lg font-semibold",children:"New Conversion"})]}),c.jsxs(Ht.button,{onClick:()=>{null==t||t("history"),null==e||e("info","Opening conversion history...")},className:"bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 text-white py-8 px-8 rounded-2xl font-semibold flex flex-col items-center justify-center space-y-4 shadow-2xl hover:shadow-3xl transition-all duration-300 backdrop-blur-sm border border-white/10",whileHover:{scale:1.05,boxShadow:"0 25px 50px -12px rgba(59, 130, 246, 0.4)"},whileTap:{scale:.98},children:[c.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:c.jsx(Ee,{className:"w-8 h-8 text-white"})}),c.jsx("span",{className:"text-white text-lg font-semibold",children:"View History"})]})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Account Settings"}),c.jsxs(Ht.button,{onClick:()=>{P?E("/profile/edit"):n(!0)},className:"w-full bg-card rounded-xl p-5 flex items-center justify-between border border-border hover:bg-accent/50 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:c.jsx(Pe,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-foreground text-sm",children:"Edit Profile"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Update your information"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-muted-foreground"})]}),c.jsxs(Ht.button,{onClick:()=>{null==t||t("connections"),null==e||e("info","Opening connection management...")},className:"w-full bg-card rounded-xl p-5 flex items-center justify-between border border-border hover:bg-accent/50 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:c.jsx(Ae,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-foreground text-sm",children:"Manage Connections"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Spotify & YouTube accounts"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-muted-foreground"})]}),c.jsxs(Ht.button,{onClick:()=>{P?E("/premium"):g(!0)},className:"w-full bg-card rounded-xl p-5 flex items-center justify-between border border-border hover:bg-accent/50 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:c.jsx(ke,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-foreground text-sm",children:"Premium Features"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Unlock advanced features"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-muted-foreground"})]}),c.jsxs(Ht.button,{onClick:()=>{P?E("/help"):h(!0)},className:"w-full bg-card rounded-xl p-5 flex items-center justify-between border border-border hover:bg-accent/50 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:c.jsx(we,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-foreground text-sm",children:"Help & Support"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Get help and contact us"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-muted-foreground"})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Preferences"}),c.jsxs(Ht.button,{onClick:()=>{P?E("/preferences"):u(!0)},className:"w-full bg-card rounded-xl p-5 flex items-center justify-between border border-border hover:bg-accent/50 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center",children:c.jsx(he,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-foreground text-sm",children:"Open Preferences"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Theme, notifications, privacy, export"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-muted-foreground"})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Account Actions"}),c.jsxs(Ht.button,{onClick:()=>null==e?void 0:e("warning","Account deletion is permanent. Contact support for assistance."),className:"w-full bg-red-50 dark:bg-red-950/20 rounded-xl p-5 flex items-center justify-between border border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-950/40 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center",children:c.jsx(fe,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-red-700 dark:text-red-400 text-sm",children:"Delete Account"}),c.jsx("p",{className:"text-xs text-red-600 dark:text-red-500",children:"Permanently remove your account"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-red-500"})]}),c.jsxs(Ht.button,{onClick:()=>{i(),null==e||e("success","Signed out successfully")},className:"w-full bg-card rounded-xl p-5 flex items-center justify-between border border-border hover:bg-accent/50 transition-colors shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-500 rounded-lg flex items-center justify-center",children:c.jsx(ae,{className:"w-5 h-5 text-white"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-foreground text-sm",children:"Sign Out"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Log out of your account"})]})]}),c.jsx(Te,{className:"w-5 h-5 text-muted-foreground"})]})]})}),c.jsx("div",{className:"px-4 sm:px-6 mb-6",children:c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-yellow-50 dark:bg-yellow-950/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-800 shadow-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx(ke,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),c.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Premium Features"})]}),c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(H,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{className:"text-muted-foreground text-sm",children:"Unlimited conversions"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(H,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{className:"text-muted-foreground text-sm",children:"Advanced track matching"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(H,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{className:"text-muted-foreground text-sm",children:"Priority support"})]})]}),c.jsx(Ht.button,{onClick:()=>{g(!0)},className:"w-full bg-gradient-to-r from-orange-500 to-pink-500 text-white py-4 rounded-xl font-semibold shadow-lg text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Upgrade to Premium"})]})}),o&&c.jsx(xi,{isOpen:o,onClose:()=>n(!1),onShowToast:e}),d&&c.jsx(gi,{isOpen:d,onClose:()=>u(!1),onShowToast:e}),m&&c.jsx(Ti,{isOpen:m,onClose:()=>h(!1),onShowToast:e}),x&&c.jsx(Ai,{isOpen:x,onClose:()=>g(!1),onShowToast:e})]})},Ri={type:"spring",stiffness:300,damping:30};l.lazy((()=>d((()=>Promise.resolve().then((()=>lr))),void 0).then((e=>({default:e.SuccessCelebration}))))),u.memo(Hr),u.memo((({isDark:e,className:t})=>c.jsx(Xs,{color:e?"var(--particle-color, #FF7A59)":"var(--particle-color, #FF007A)",density:"low",className:t}))),u.memo((({isVisible:e,type:t,message:a,icon:s})=>c.jsx(Gt,{children:e&&c.jsx(Ht.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},transition:{duration:.3,ease:"easeOut"},className:"fixed top-0 left-0 right-0 z-50 text-white text-center py-3 px-4 shadow-lg "+("offline"===t?"bg-red-500":"bg-blue-500"),children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(s,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:a})]})})}))),u.memo((({isDark:e,toggleTheme:t,hapticLight:a})=>c.jsx(Ht.button,{onClick:()=>{t(),a()},className:Hs("relative transition-all duration-300",e?"text-yellow-500 hover:text-yellow-400":"text-gray-800 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-100"),whileHover:{scale:1.1},whileTap:{scale:.9},transition:Ri,children:c.jsx(Ht.div,{animate:{rotate:e?180:0},transition:{duration:.5,ease:"easeInOut"},children:e?c.jsx(_e,{className:"w-6 h-6 drop-shadow-sm"}):c.jsx(Ie,{className:"w-6 h-6 drop-shadow-sm"})})})));const Li=u.memo((e=>{const t=mi;((e={})=>{const{throttleMs:t=16,debounceMs:a=300,maxFPS:s=60,enableRAF:r=!0}=e,i=l.useRef(),o=l.useRef(0),n=l.useRef(1e3/s),c=l.useCallback(((e,a=t)=>{let s,r;const i=(...t)=>{s||(e(...t),s=!0,r=setTimeout((()=>{s=!1}),a))};return i.cancel=()=>{r&&clearTimeout(r),s=!1},i}),[t]),d=l.useCallback(((e,t=a)=>{let s,r=null;const i=(...a)=>{r=a,s&&clearTimeout(s),s=setTimeout((()=>{r&&(e(...r),r=null)}),t)};return i.cancel=()=>{s&&clearTimeout(s),r=null},i.flush=()=>{s&&clearTimeout(s),r&&(e(...r),r=null)},i}),[a]),u=l.useCallback((e=>{if(!r)return window.setTimeout(e,n.current);const t=performance.now(),a=t-o.current;if(a>=n.current)return o.current=t,window.requestAnimationFrame(e);{const t=n.current-a;return window.setTimeout((()=>{o.current=performance.now(),e(o.current)}),t)}}),[r]),m=l.useCallback((e=>{r?window.cancelAnimationFrame(e):window.clearTimeout(e)}),[r]),h=l.useCallback((()=>{i.current&&(m(i.current),i.current=void 0)}),[m]);l.useEffect((()=>h),[h]);const x=l.useCallback(((e,t)=>{const a=performance.now();t();const s=performance.now();console.log(`${e} took ${s-a}ms`)}),[]),p=l.useCallback((e=>{i.current&&m(i.current),i.current=u((()=>{e.forEach((e=>e())),i.current=void 0}))}),[u,m])})({throttleMs:t.throttleMouseEvents?32:16,maxFPS:t.maxAnimationFPS,enableRAF:t.enableComplexAnimations});const[a,s]=l.useState(!1),[r,i]=l.useState(!1),o=l.useRef(),n=l.useRef(),[d,u]=l.useState("converter"),[m,h]=l.useState("select-source"),[x,g]=l.useState(null),[f,v]=l.useState(null),[w,j]=l.useState(null),[N,k]=l.useState("");l.useState(""),l.useState("info"),l.useState(!1);const[S,E]=l.useState(null);l.useState(!1);const P=l.useRef(null),_=b(),{user:I,signOut:R,hasSpotifyAuth:L,hasYouTubeAuth:F,isAuthenticated:M,disconnectFromSpotify:D,disconnectFromYouTube:U,isConnectingSpotify:Y,isConnectingYouTube:z,spotifyError:O,youtubeError:B,spotifyUserProfile:G,youtubeUserProfile:X}=ya(),{state:J,fetchSpotifyPlaylists:ee,fetchYouTubePlaylists:te,selectPlaylist:ae,startConversion:ie,fetchConversionHistory:oe,dispatch:ne}=Fs(),{theme:le,toggleTheme:ce,isDark:de}=qt();l.useMemo((()=>J.spotifyPlaylists||[]),[J.spotifyPlaylists]),l.useMemo((()=>J.youtubePlaylists||[]),[J.youtubePlaylists]),l.useMemo((()=>J.conversionHistory||[]),[J.conversionHistory]),l.useCallback((e=>{n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{k(e)}),300)}),[]);const ue=l.useCallback((e=>{o.current&&clearTimeout(o.current),e?s(!0):o.current=setTimeout((()=>{s(!1)}),100)}),[]),me=l.useCallback((async()=>{ue(!0);try{await Promise.all([ee(),te()]),i(!0)}catch(e){console.error("Initialization error:",e)}finally{ue(!1)}}),[ee,te,ue]);l.useEffect((()=>{me()}),[me]);const{hapticSuccess:he,hapticWarning:xe,hapticError:pe,hapticLight:ge,hapticMedium:ye}=(()=>{const e=l.useCallback(((e="light")=>{if("vibrate"in navigator){const t={light:[10],medium:[20],heavy:[30],success:[10,50,10],warning:[20,50,20],error:[30,50,30]},a=t[e]||t.light;navigator.vibrate(a)}}),[]),t=l.useCallback((()=>e("success")),[e]),a=l.useCallback((()=>e("warning")),[e]),s=l.useCallback((()=>e("error")),[e]),r=l.useCallback((()=>e("light")),[e]),i=l.useCallback((()=>e("medium")),[e]),o=l.useCallback((()=>e("heavy")),[e]);return{triggerHaptic:e,hapticSuccess:t,hapticWarning:a,hapticError:s,hapticLight:r,hapticMedium:i,hapticHeavy:o}})();(()=>{const[e,t]=l.useState({isOnline:navigator.onLine,isOffline:!navigator.onLine});l.useEffect((()=>{const e=()=>{const e=navigator.onLine,a=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t({isOnline:e,isOffline:!e,connectionType:null==a?void 0:a.effectiveType,effectiveType:null==a?void 0:a.effectiveType,downlink:null==a?void 0:a.downlink,rtt:null==a?void 0:a.rtt})};e(),window.addEventListener("online",e),window.addEventListener("offline",e);const a=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return a&&a.addEventListener("change",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e),a&&a.removeEventListener("change",e)}}),[])})();const fe=l.useRef(null);ni(fe,{onRefresh:async()=>{await Promise.all([ee(),te(),oe()])}});const be=l.useRef(null);li(be,{onSwipeLeft:()=>ge(),onSwipeRight:()=>ge()}),ci(be,{onLongPress:()=>ye(),onPress:()=>ge()});const ve=l.useRef(null);di(ve,{onSwipeLeft:()=>{ge()},onSwipeRight:()=>{ge()}}),(e=>{const{commands:t,isEnabled:a=!1,language:s="en-US"}=e,[r,i]=l.useState(!1),[o,n]=l.useState(""),[c,d]=l.useState(!1),u=l.useRef(null);l.useEffect((()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(d(!!e),e&&a){u.current=new e;const a=u.current;a&&(a.continuous=!0,a.interimResults=!0,a.lang=s,a.onstart=()=>{i(!0),n("")},a.onresult=e=>{let a="",s="";for(let t=e.resultIndex;t<e.results.length;t++){const r=e.results[t][0].transcript;e.results[t].isFinal?a+=r:s+=r}n(a||s);const r=a.toLowerCase();Object.entries(t).forEach((([e,t])=>{r.includes(e.toLowerCase())&&(t(),n(""))}))},a.onerror=e=>{console.error("Speech recognition error:",e),i(!1)},a.onend=()=>{i(!1)})}return()=>{u.current&&u.current.stop()}}),[t,a,s]);const m=l.useCallback((()=>{u.current&&c&&u.current.start()}),[c]),h=l.useCallback((()=>{u.current&&u.current.stop()}),[]),x=l.useCallback((()=>{r?h():m()}),[r,m,h])})({commands:{"start conversion":()=>he(),"stop conversion":()=>xe(),refresh:()=>ge()},isEnabled:!1}),((e={})=>{const{threshold:t=10}=e,[a,s]=l.useState(null),r=l.useRef(0);l.useCallback((e=>{const a=e.currentTarget.scrollTop,i=a-r.current;Math.abs(i)>t&&(s(i>0?"down":"up"),r.current=a)}),[t])})(),l.useEffect((()=>{I||_("/login")}),[I,_]),l.useEffect((()=>()=>{o.current&&clearTimeout(o.current),n.current&&clearTimeout(n.current)}),[]),l.useState(null);const[we,je]=l.useState(!1),[ke,Se]=l.useState([]),[Te,Pe]=l.useState(1);l.useState(!1),l.useState("");const[Fe,Me]=l.useState([]),[De,Ue]=l.useState(!1),[Ye,$e]=l.useState(""),[ze,Oe]=l.useState(""),[Be,He]=l.useState(!1);l.useState(!1);const[Ge,Ve]=l.useState(0),[We,qe]=l.useState(!1);l.useState(!1);const Ke=l.useRef(null),{scrollProgress:Xe,isScrolling:Qe,handleScroll:Je,scrollToTop:Ze}=((e={})=>{const{containerRef:t,onProgressChange:a}=e,[s,r]=l.useState(0),[i,o]=l.useState(!1),n=l.useRef(),c=l.useCallback((e=>{const{scrollTop:t,scrollHeight:a,clientHeight:s}=e,r=a>s?t/(a-s):0;return Math.min(Math.max(r,0),1)}),[]),d=l.useCallback((e=>{const t=e.target,s=c(t);r(s),o(!0),null==a||a(s),n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{o(!1)}),150)}),[c,a]),u=l.useCallback((()=>{const e=null==t?void 0:t.current;e&&e.scrollTo({top:0,behavior:"smooth"})}),[t]),m=l.useCallback((()=>{const e=null==t?void 0:t.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}),[t]),h=l.useCallback(((e,a=0)=>{const s=null==t?void 0:t.current;if(s){const t=s.getBoundingClientRect(),r=e.getBoundingClientRect(),i=s.scrollTop+r.top-t.top-a;s.scrollTo({top:i,behavior:"smooth"})}}),[t]);return l.useEffect((()=>()=>{n.current&&clearTimeout(n.current)}),[]),{scrollProgress:s,isScrolling:i,handleScroll:d,scrollToTop:u,scrollToBottom:m,scrollToElement:h}})({containerRef:fe,onProgressChange:e=>{}});hi();const[et,tt]=l.useState(!0),[at,st]=l.useState(!1);l.useCallback((async()=>{if(!at&&et){st(!0);try{await new Promise((e=>setTimeout(e,1e3))),tt(!0)}catch(e){console.error("Error loading more content:",e)}finally{st(!1)}}}),[at,et]),l.useRef(null),l.useEffect((()=>{Ze()}),[d,Ze]),l.useEffect((()=>{const e=setTimeout((()=>{qe(!1)}),1e3);return()=>clearTimeout(e)}),[]),li(Ke,{onSwipeLeft:()=>{const e=["converter","connections","history","profile"],t=(e.indexOf(d)+1)%e.length;u(e[t]),ge()},onSwipeRight:()=>{const e=["converter","connections","history","profile"],t=(e.indexOf(d)-1+e.length)%e.length;u(e[t]),ge()}},{minSwipeDistance:80,maxSwipeTime:500,preventDefault:!1}),ni(fe,{onRefresh:async()=>{he(),await oe(),L&&await ee(),F&&await te()}});const rt=l.useRef(null);ci(rt,{onLongPress:()=>{var e;ye(),null==(e=P.current)||e.call(P,"info","Quick actions available on long press!")}}),di(ve,{threshold:100,onSwipeLeft:()=>{var e;ge(),null==(e=P.current)||e.call(P,"info","Swipe left to delete conversion")},onSwipeRight:()=>{var e;ge(),null==(e=P.current)||e.call(P,"info","Swipe right to share conversion")}});const it=l.useMemo((()=>[{key:"spotify",label:"Spotify",color:"bg-green-500",icon:$},{key:"youtube",label:"YouTube",color:"bg-red-500",icon:W}]),[]),[ot,nt]=l.useState("spotify"),[lt,ct]=l.useState("youtube"),[dt,ut]=l.useState(""),[mt,ht]=l.useState("");l.useEffect((()=>{if(lt===ot){const e=it.find((e=>e.key!==ot));e&&ct(e.key)}localStorage.setItem("source_platform",ot),localStorage.setItem("destination_platform",lt)}),[ot,lt,it]),l.useEffect((()=>{const e=localStorage.getItem("source_platform"),t=localStorage.getItem("destination_platform"),a=localStorage.getItem("last_playlist_url");e&&it.some((t=>t.key===e))&&nt(e),t&&it.some((e=>e.key===t))&&t!==ot&&ct(t),a&&ut(a)}),[it,ot]),l.useEffect((()=>{var e,t;document.title=`Playlist Converter - Convert ${null==(e=it.find((e=>e.key===ot)))?void 0:e.label} to ${null==(t=it.find((e=>e.key===lt)))?void 0:t.label}`}),[ot,lt,it]);const xt=l.useRef(!1);l.useEffect((()=>{if(M&&!xt.current){xt.current=!0;(async()=>{try{await oe()}catch(e){console.error("Error loading conversion history:",e)}})()}}),[M,oe]),l.useEffect((()=>{if(J.selectedPlaylistId&&J.spotifyPlaylists){const e=J.spotifyPlaylists.find((e=>e.id===J.selectedPlaylistId));e&&($e(`${e.name} (Converted)`),Oe(`Converted from ${ot} using SoundSwapp`))}}),[J.selectedPlaylistId,J.spotifyPlaylists,ot]),l.useEffect((()=>{if(J.status===As.SUCCESS){je(!0),He(!1);const e="spotify"===lt,t=e?J.spotifyPlaylistUrl:J.youtubePlaylistUrl;gt({type:"success",title:"Conversion Complete",message:`Your playlist has been successfully converted to ${e?"Spotify":"YouTube"}!`,actionLabel:"View Playlist",onAction:()=>{t&&window.open(t,"_blank")}}),h("success")}}),[J.status,J.youtubePlaylistUrl,J.spotifyPlaylistUrl,lt]),l.useEffect((()=>{const e=[As.LOADING_TRACKS,As.MATCHING_TRACKS,As.CREATING_PLAYLIST];He(e.includes(J.status))}),[J.status]),l.useEffect((()=>{J.error&&gt({type:"error",title:"Conversion Error",message:J.error||"An error occurred during conversion.",actionLabel:"Try Again"})}),[J.error]),l.useEffect((()=>{2===Te&&J.tracks.length>0&&!Be&&setTimeout((()=>{var e;Pe(3),null==(e=document.getElementById("playlist-wizard-card"))||e.scrollIntoView({behavior:"smooth",block:"center"})}),500),J.selectedPlaylistId&&2===Te&&("spotify"===ot?localStorage.setItem("last_playlist_url",dt):"youtube"===ot&&localStorage.setItem("last_playlist_url",mt))}),[J.tracks.length,Be,Te,J.selectedPlaylistId,dt,mt,ot]),l.useEffect((()=>{M&&L&&ee()}),[M,L,ee]),l.useEffect((()=>{M&&F&&"function"==typeof te&&te()}),[M,F,te]),l.useEffect((()=>{"spotify"===x&&J.spotifyPlaylists?(console.log("Setting Spotify playlists:",J.spotifyPlaylists),Me(J.spotifyPlaylists)):"youtube"===x&&J.youtubePlaylists?(console.log("Setting YouTube playlists:",J.youtubePlaylists),Me(J.youtubePlaylists)):Me([])}),[x,J.spotifyPlaylists,J.youtubePlaylists]);const pt=l.useCallback((e=>{Se((t=>t.filter((t=>t.id!==e))))}),[]),gt=l.useCallback((({type:e,message:t,title:a,actionLabel:s,onAction:r,duration:i=5e3})=>{const o=Date.now(),n={id:o,type:e,title:a||"",message:t||"",actionLabel:s,onAction:r};Se((e=>[...e,n])),setTimeout((()=>{pt(o)}),i)}),[pt]),yt=l.useCallback(((e,t)=>{const a={success:{title:"Success",message:t||"Operation completed successfully!",actionLabel:"Ok"},error:{title:"Error",message:t||"Something went wrong. Please try again.",actionLabel:"Retry"},warning:{title:"Warning",message:t||"Some tracks might not have been matched correctly.",actionLabel:"Review"},info:{title:"Information",message:t||"Your conversion is being processed in the background.",actionLabel:"Details"}};gt({type:e,title:a[e].title,message:a[e].message,actionLabel:a[e].actionLabel})}),[gt]);l.useEffect((()=>{P.current=yt}),[yt]),l.useEffect((()=>{"spotify"===x&&L&&M?(Ue(!0),ee().then((()=>{console.log("Spotify playlists fetched successfully")})).catch((e=>{console.error("Error fetching Spotify playlists:",e),yt("error","Failed to load Spotify playlists. Please try again.")})).finally((()=>Ue(!1)))):"youtube"===x&&F&&M&&(Ue(!0),te().then((()=>{console.log("YouTube playlists fetched successfully")})).catch((e=>{console.error("Error fetching YouTube playlists:",e),yt("error","Failed to load YouTube playlists. Please try again.")})).finally((()=>Ue(!1))))}),[x,L,F,M,ee,te,yt]),l.useEffect((()=>{"select-playlist"===m&&x&&0===Fe.length&&("spotify"===x&&L&&M?(Ue(!0),ee().finally((()=>Ue(!1)))):"youtube"===x&&F&&M&&(Ue(!0),te().finally((()=>Ue(!1)))))}),[m,x,Fe.length,L,F,M,ee,te]);const ft=l.useCallback((async e=>{var t;ne({type:"SET_STATUS",payload:As.LOADING_TRACKS}),He(!0),ne({type:"SELECT_PLAYLIST",payload:e});const a=await ns();if(!a)return null==(t=P.current)||t.call(P,"error","YouTube authentication token not found. Please reconnect."),void He(!1);const s=new AbortController;setTimeout((()=>s.abort()),3e4),async function(e,t){let a=[],s="";try{do{const r=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails&maxResults=50&playlistId=${e}`+(s?`&pageToken=${s}`:""),i=await fetch(r,{headers:{Authorization:`Bearer ${t}`}});if(!i.ok)throw new Error(`YouTube API error: ${i.status}`);const o=await i.json();o.items&&o.items.length>0&&(a=a.concat(o.items)),s=o.nextPageToken||""}while(s);return a}catch(r){return console.error("Error fetching playlist items (pagination):",r),a}}(e,a).then((async e=>{if(!e||0===e.length)return console.warn("No tracks found in playlist or playlist is private/empty."),He(!1),void gt({type:"error",title:"No tracks found",message:"This playlist appears to be empty or private."});const t=e.map((e=>{var t,a,s;return(null==(a=null==(t=e.snippet)?void 0:t.resourceId)?void 0:a.videoId)||(null==(s=e.contentDetails)?void 0:s.videoId)})).filter((e=>e)),s=[];for(let a=0;a<t.length;a+=50)s.push(t.slice(a,a+50));let r={};for(const n of s)try{const e=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${n.join(",")}`,{headers:{Authorization:`Bearer ${a}`}});if(e.ok){(await e.json()).items.forEach((e=>{e.id&&e.snippet&&e.snippet.publishedAt&&(r[e.id]=parseInt(e.snippet.publishedAt.split("-")[0],10))}))}}catch(o){console.error("Error fetching video details batch:",o)}const i=e.map((e=>{var t,a,s,i,o,n,l;let c=(null==(t=e.snippet)?void 0:t.title)||"",d=[(null==(a=e.snippet)?void 0:a.videoOwnerChannelTitle)||"Unknown"],u=c;const m=[" - "," ‚Äì ",": ",' "'," '"," // "];for(const r of m)if(c.includes(r)){const e=c.split(r);if(e.length>=2){d=[e[0].trim()],u=e.slice(1).join(r).trim().replace(/^['"]/,"").replace(/['"]$/,"");break}}const h=(null==(i=null==(s=e.snippet)?void 0:s.resourceId)?void 0:i.videoId)||(null==(o=e.contentDetails)?void 0:o.videoId);return{id:e.id||`yt-${Math.random().toString(36).substring(2,9)}`,name:u,artists:d,album:(null==(n=e.snippet)?void 0:n.channelTitle)||"",duration_ms:0,popularity:0,explicit:!1,searchQuery:`${d[0]} ${u}`,videoId:h,releaseYear:null==(l=r[h])?void 0:l.toString()}}));ne({type:"SET_TRACKS",payload:i}),He(!1),setTimeout((()=>{var e;Pe(3),null==(e=document.getElementById("playlist-wizard-card"))||e.scrollIntoView({behavior:"smooth",block:"center"})}),500)})).catch((e=>{He(!1),console.error("Error fetching YouTube playlist tracks:",e);let t="An error occurred trying to load the YouTube playlist.";"AbortError"===e.name?t="Request timed out. Please try again or check your internet connection.":e.message&&e.message.includes("401")?t="YouTube authorization expired. Please reconnect your YouTube account.":e.message&&e.message.includes("403")?t="You don't have permission to access this playlist.":e.message&&e.message.includes("404")&&(t="Playlist not found. It may have been deleted or set to private."),gt({type:"error",title:"Failed to load playlist",message:t})}))}),[ne,gt,P]);l.useCallback((async e=>{var t,a,s,r,i,o;const n="spotify"===e?dt:mt;if(n.trim())try{const t=((e,t)=>{if(!e)return null;try{if("spotify"===t){let t=e.match(/spotify\.com\/playlist\/([a-zA-Z0-9_-]+)/);if(!t&&e.includes("spotify:playlist:")&&(t=e.match(/spotify:playlist:([a-zA-Z0-9_-]+)/)),t&&t[1])return t[1].split(/[/?#]/)[0];if(/^[a-zA-Z0-9]{22}$/.test(e))return e}else if("youtube"===t){const t=e.match(/[?&]list=([a-zA-Z0-9_-]+)/);if(t&&t[1])return t[1];if(/^[a-zA-Z0-9_-]{24,34}$/.test(e))return e}}catch(a){console.error("Error extracting playlist ID:",a)}return null})(n,e);if(console.log("Extracted playlist ID:",t,"from URL:",n),!t)return void(null==(a=P.current)||a.call(P,"error",`Invalid ${e} playlist URL format`));if("spotify"===e&&22!==t.length&&(null==(s=P.current)||s.call(P,"warning","The playlist ID format looks unusual, but trying anyway...")),null==(r=P.current)||r.call(P,"info","Fetching playlist details..."),He(!0),"spotify"===e)try{await ae(t),console.log("Playlist import successful for ID:",t),He(!1)}catch(l){console.error("Error importing playlist:",l),null==(i=P.current)||i.call(P,"error",`Failed to import playlist: ${l instanceof Error?l.message:String(l)}`),He(!1)}else"youtube"===e&&ft(t)}catch(c){console.error(`Error parsing ${e} URL:`,c),null==(o=P.current)||o.call(P,"error",`Failed to process ${e} URL`),He(!1)}else null==(t=P.current)||t.call(P,"error",`Please enter a ${e} playlist URL`)}),[dt,mt,ae,ft]);const bt=l.useCallback((()=>{var e,t;try{if(!M)return console.warn("User not authenticated when trying to connect to Spotify"),null==(e=P.current)||e.call(P,"error","Please sign in to your account first before connecting to Spotify"),sessionStorage.setItem("connect_after_login","spotify"),void _("/login");setTimeout((()=>{ps()}),100)}catch(a){console.error("Error initiating Spotify auth:",a),null==(t=P.current)||t.call(P,"error","Failed to connect to Spotify")}}),[M,I,_]),vt=l.useCallback((()=>{var e;try{window.location.href=as()}catch(t){console.error("Error initiating YouTube auth:",t),null==(e=P.current)||e.call(P,"error","Failed to connect to YouTube")}}),[]);l.useCallback((()=>{switch(J.status){case As.LOADING_PLAYLISTS:case As.SELECTING_PLAYLIST:case As.IDLE:return 1;case As.LOADING_TRACKS:return 2;case As.MATCHING_TRACKS:return 3;case As.CREATING_PLAYLIST:case As.SUCCESS:return 4;default:return 1}}),[J.status]);const wt=l.useCallback((async()=>{var e,t,a,s,r,i;if(J.selectedPlaylistId)if("spotify"!==ot||L)if("youtube"!==lt||F)try{He(!0),null==(s=P.current)||s.call(P,"info","Starting conversion process..."),await ie()}catch(o){console.error("Error starting conversion:",o),He(!1),o instanceof Error?null==(r=P.current)||r.call(P,"error",`Conversion failed: ${o.message}`):null==(i=P.current)||i.call(P,"error","Conversion failed. Please try again.")}else null==(a=P.current)||a.call(P,"error","Please connect to YouTube first");else null==(t=P.current)||t.call(P,"error","Please connect to Spotify first");else null==(e=P.current)||e.call(P,"error","Please select a playlist first")}),[J.selectedPlaylistId,ot,lt,L,F,ie]);l.useEffect((()=>{if(M&&!Be){const e=sessionStorage.getItem("connect_after_login");e&&(console.log("Auto-connecting to",e,"after login"),sessionStorage.removeItem("connect_after_login"),setTimeout((()=>{"spotify"===e?bt():"youtube"===e&&vt()}),1e3))}}),[M,Be,bt,vt]);const jt=l.useCallback((()=>({sourceAuth:"spotify"===ot?L:F,destinationAuth:"spotify"===lt?L:F})),[ot,lt,L,F]),Nt=l.useCallback((()=>({connectToSource:"spotify"===ot?bt:vt,connectToDestination:"spotify"===lt?bt:vt})),[ot,lt,bt,vt]);jt(),Nt(),l.useMemo((()=>{var e;return"spotify"===ot?null==(e=J.spotifyPlaylists)?void 0:e.find((e=>e.id===J.selectedPlaylistId)):(J.youtubePlaylists||[]).find((e=>e.id===J.selectedPlaylistId))}),[J.spotifyPlaylists,J.youtubePlaylists,J.selectedPlaylistId,ot]),l.useMemo((()=>[{number:1,label:"Select Source",help:"Choose the platform you want to import your playlist from (Spotify or YouTube).",icon:c.jsx(q,{size:24}),className:"text-white"},{number:2,label:"Import Playlist",help:"Paste your playlist URL or select from your library to import tracks.",icon:c.jsx(K,{size:24}),className:"text-white"},{number:3,label:"Review Tracks",help:"Review the imported tracks and make sure everything looks correct.",icon:c.jsx(T,{size:24}),className:"text-white"},{number:4,label:"Export Playlist",help:"Export your playlist to the destination platform with one click.",icon:c.jsx(Q,{size:24}),className:"text-white"}]),[]);const kt=l.useCallback((()=>{ut(""),ht(""),$e(""),Oe(""),Pe(1),He(!1),ne({type:"RESET"})}),[ne]);l.useCallback((()=>{L&&F?R():(L||F)&&L?vt():bt()}),[L,F,R,bt,vt]),l.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("user_profile_image");e?E(e):(null==I?void 0:I.photoURL)&&E(I.photoURL)}catch(e){console.error("Error fetching profile image:",e)}})()}),[I]);const St=()=>{var e,t,a,s;return c.jsxs("div",{className:"space-y-6 font-sf-pro",children:[c.jsx("div",{className:"w-full flex justify-center py-2",children:c.jsx("div",{className:"bg-surface-card/98 backdrop-blur-2xl border border-border-default/40 shadow-sm rounded-xl p-3 w-full max-w-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex flex-col items-center flex-1",children:c.jsxs("div",{className:Hs("relative w-12 h-12 rounded-full transition-all duration-300 mb-2","select-source"===m?"bg-gradient-to-br from-[#34A89B] to-[#2D6F6B] shadow-lg shadow-[#34A89B]/20":"bg-gradient-to-br from-gray-100/80 to-gray-200/80 dark:from-gray-800/80 dark:to-gray-700/80"),children:["select-source"===m&&c.jsx("div",{className:"absolute inset-2 bg-[#34A89B] rounded-full"}),c.jsx("div",{className:Hs("relative z-10 flex items-center justify-center w-full h-full","select-source"===m?"text-white":"text-gray-600 dark:text-gray-400"),children:c.jsx(q,{className:"w-6 h-6"})})]})}),c.jsx("div",{className:"w-4 h-0.5 bg-border-default/40 mx-1"}),c.jsx("div",{className:"flex flex-col items-center flex-1",children:c.jsxs("div",{className:Hs("relative w-12 h-12 rounded-full transition-all duration-300 mb-2","select-destination"===m?"bg-gradient-to-br from-[#34A89B] to-[#2D6F6B] shadow-lg shadow-[#34A89B]/20":"bg-gradient-to-br from-gray-100/80 to-gray-200/80 dark:from-gray-800/80 dark:to-gray-700/80"),children:["select-destination"===m&&c.jsx("div",{className:"absolute inset-2 bg-[#34A89B] rounded-full"}),c.jsx("div",{className:Hs("relative z-10 flex items-center justify-center w-full h-full","select-destination"===m?"text-white":"text-gray-600 dark:text-gray-400"),children:c.jsx(K,{className:"w-6 h-6"})})]})}),c.jsx("div",{className:"w-4 h-0.5 bg-border-default/40 mx-1"}),c.jsx("div",{className:"flex flex-col items-center flex-1",children:c.jsxs("div",{className:Hs("relative w-12 h-12 rounded-full transition-all duration-300 mb-2","select-playlist"===m?"bg-gradient-to-br from-[#34A89B] to-[#2D6F6B] shadow-lg shadow-[#34A89B]/20":"bg-gradient-to-br from-gray-100/80 to-gray-200/80 dark:from-gray-800/80 dark:to-gray-700/80"),children:["select-playlist"===m&&c.jsx("div",{className:"absolute inset-2 bg-[#34A89B] rounded-full"}),c.jsx("div",{className:Hs("relative z-10 flex items-center justify-center w-full h-full","select-playlist"===m?"text-white":"text-gray-600 dark:text-gray-400"),children:c.jsx(Re,{className:"w-6 h-6"})})]})}),c.jsx("div",{className:"w-4 h-0.5 bg-border-default/40 mx-1"}),c.jsx("div",{className:"flex flex-col items-center flex-1",children:c.jsxs("div",{className:Hs("relative w-12 h-12 rounded-full transition-all duration-300 mb-2","converting"===m?"bg-gradient-to-br from-[#34A89B] to-[#2D6F6B] shadow-lg shadow-[#34A89B]/20":"bg-gradient-to-br from-gray-100/80 to-gray-200/80 dark:from-gray-800/80 dark:to-gray-700/80"),children:["converting"===m&&c.jsx("div",{className:"absolute inset-2 bg-[#34A89B] rounded-full"}),c.jsx("div",{className:Hs("relative z-10 flex items-center justify-center w-full h-full","converting"===m?"text-white":"text-gray-600 dark:text-gray-400"),children:c.jsx(Q,{className:"w-6 h-6"})})]})})]})})}),c.jsxs(Ht.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,ease:[.25,.46,.45,.94]},children:[c.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent mb-3 font-sf-pro-display",children:"Convert Playlists"}),c.jsx("p",{className:"text-muted-foreground text-lg leading-relaxed max-w-sm mx-auto font-sf-pro-text",children:"Transfer your music between platforms seamlessly"})]}),c.jsxs(Gt,{mode:"wait",children:["select-source"===m&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Source"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose the platform you want to import your playlist from"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Source Platform"}),c.jsx(Ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 "+("spotify"===x?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),onClick:()=>{g("spotify"),h("select-destination"),ge()},children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(Ht.div,{className:"w-16 h-16 bg-gradient-to-br from-[#1DB954] to-[#1ED760] rounded-xl flex items-center justify-center shadow-lg relative overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(()=>{var e,t;const a=(null==(t=null==(e=null==G?void 0:G.images)?void 0:e[0])?void 0:t.url)||(null==G?void 0:G.imageUrl);return L&&a?c.jsx(Ht.img,{src:a,alt:"Spotify Profile",className:"w-full h-full object-cover rounded-xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},onError:e=>{var t;e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")}}):null})(),c.jsx(Ht.div,{className:Hs("absolute inset-0 flex items-center justify-center",L&&((null==(t=null==(e=null==G?void 0:G.images)?void 0:e[0])?void 0:t.url)||(null==G?void 0:G.imageUrl))?"hidden":""),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx($,{className:"w-8 h-8 text-white drop-shadow-lg"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Spotify"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L?"Connected":"Not connected"})]}),"spotify"===x&&c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx(H,{className:"w-4 h-4 text-white"})})]})}),c.jsx(Ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 "+("youtube"===x?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),onClick:()=>{g("youtube"),h("select-destination"),ge()},children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(Ht.div,{className:"w-16 h-16 bg-gradient-to-br from-[#FF0000] to-[#FF4444] rounded-xl flex items-center justify-center shadow-lg relative overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[F&&(null==X?void 0:X.picture)?c.jsx(Ht.img,{src:X.picture,alt:"YouTube Profile",className:"w-full h-full object-cover rounded-xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},onError:e=>{var t;console.log("YouTube profile image failed to load"),e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")},onLoad:()=>{console.log("YouTube profile image loaded successfully")}}):null,c.jsx(Ht.div,{className:Hs("absolute inset-0 flex items-center justify-center",F&&(null==X?void 0:X.picture)?"hidden":""),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("img",{src:"/images/YouTube connection card logo.png",alt:"YouTube",style:{height:32,width:"auto",objectFit:"contain",display:"block",minWidth:"32px"},className:"w-8 h-8 drop-shadow-lg"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"YouTube"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:F?"Connected":"Not connected"})]}),"youtube"===x&&c.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:c.jsx(H,{className:"w-4 h-4 text-white"})})]})})]})]},"select-source"),"select-destination"===m&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Destination"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose where you want to export your playlist"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Destination Platform"}),c.jsx(Ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 "+("spotify"===f?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),onClick:()=>{v("spotify"),h("select-playlist"),ge()},children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(Ht.div,{className:"w-16 h-16 bg-gradient-to-br from-[#1DB954] to-[#1ED760] rounded-xl flex items-center justify-center shadow-lg relative overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(()=>{var e,t;const a=(null==(t=null==(e=null==G?void 0:G.images)?void 0:e[0])?void 0:t.url)||(null==G?void 0:G.imageUrl);return L&&a?c.jsx(Ht.img,{src:a,alt:"Spotify Profile",className:"w-full h-full object-cover rounded-xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},onError:e=>{var t;e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")}}):null})(),c.jsx(Ht.div,{className:Hs("absolute inset-0 flex items-center justify-center",L&&((null==(s=null==(a=null==G?void 0:G.images)?void 0:a[0])?void 0:s.url)||(null==G?void 0:G.imageUrl))?"hidden":""),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx($,{className:"w-8 h-8 text-white drop-shadow-lg"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Spotify"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L?"Connected":"Not connected"})]}),"spotify"===f&&c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx(H,{className:"w-4 h-4 text-white"})})]})}),c.jsx(Ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 "+("youtube"===f?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),onClick:()=>{v("youtube"),h("select-playlist"),ge()},children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FF0000] to-[#FF4444] rounded-xl flex items-center justify-center",children:c.jsx("img",{src:"/images/YouTube connection card logo.png",alt:"YouTube",style:{height:32,width:"auto",objectFit:"contain",display:"block",minWidth:"32px"},className:"w-8 h-8 drop-shadow-lg"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"YouTube"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:F?"Connected":"Not connected"})]}),"youtube"===f&&c.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:c.jsx(H,{className:"w-4 h-4 text-white"})})]})})]}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{h("select-source"),v(null),ge()},className:"w-full py-3 px-4 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors",children:"Back to Source Selection"})]},"select-destination"),"select-playlist"===m&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select Playlist"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose the playlist you want to convert"})]}),c.jsx("div",{className:"space-y-4",children:De?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 animate-spin"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading playlists..."})]}):Fe.length>0?c.jsx("div",{className:"space-y-3",children:(console.log("Rendering playlists:",Fe),console.log("Selected source platform:",x),Fe.forEach(((e,t)=>{var a;console.log(`Playlist ${t}:`,{id:e.id,name:e.name||(null==(a=e.snippet)?void 0:a.title)||"Untitled Playlist",snippet:e.snippet,imageUrl:e.imageUrl,tracks:e.tracks,contentDetails:e.contentDetails,trackCount:e.trackCount})})),Fe.map(((e,t)=>{var a;return c.jsx(Ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-4 rounded-xl border cursor-pointer transition-all duration-300 "+(J.selectedPlaylistId===e.id?"border-pink-500 bg-gradient-to-br from-pink-500/20 via-purple-500/20 to-blue-600/20 backdrop-blur-sm shadow-lg":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),onClick:()=>{var t,a;j(e),"spotify"===x?ae(e.id):"youtube"===x&&ft(e.id),ge(),null==(a=P.current)||a.call(P,"info",`Starting conversion of "${e.name||(null==(t=e.snippet)?void 0:t.title)||"Playlist"}"...`),setTimeout((()=>{h("converting"),wt()}),800)},children:c.jsxs("div",{className:"flex items-center space-x-4",children:[(()=>{var t,a,s,r;let i=e.imageUrl;return!i&&(null==(s=null==(a=null==(t=e.snippet)?void 0:t.thumbnails)?void 0:a.default)?void 0:s.url)&&(i=e.snippet.thumbnails.default.url),i&&i.includes("no_thumbnail.jpg")&&(i=null),i?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:i,alt:`${e.name||(null==(r=e.snippet)?void 0:r.title)||"Playlist"} cover`,className:"w-12 h-12 rounded-xl object-cover",onError:e=>{var t;console.warn("Failed to load playlist thumbnail:",i),e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")},onLoad:()=>{console.log("Successfully loaded playlist thumbnail:",i)}}),c.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center hidden "+("spotify"===x?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-red-500 to-red-600"),children:c.jsx(T,{className:"w-6 h-6 text-white"})})]}):c.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("spotify"===x?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-red-500 to-red-600"),children:c.jsx(T,{className:"w-6 h-6 text-white"})})})(),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold "+(J.selectedPlaylistId===e.id?"text-white":"text-gray-900 dark:text-white"),children:e.name||(null==(a=e.snippet)?void 0:a.title)||"Untitled Playlist"}),c.jsx("p",{className:"text-sm "+(J.selectedPlaylistId===e.id?"text-white/80":"text-gray-600 dark:text-gray-400"),children:(()=>{var t,a,s;let r=0;void 0!==(null==(t=e.tracks)?void 0:t.total)?r=e.tracks.total:void 0!==(null==(a=e.contentDetails)?void 0:a.itemCount)?r=e.contentDetails.itemCount:void 0!==e.trackCount&&(r=e.trackCount);let i="";return e.owner?i=` ‚Ä¢ ${e.owner}`:(null==(s=e.snippet)?void 0:s.channelTitle)&&(i=` ‚Ä¢ ${e.snippet.channelTitle}`),`${r} tracks${i}`})()})]}),J.selectedPlaylistId===e.id?c.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center",children:c.jsx(H,{className:"w-4 h-4 text-white"})}):c.jsx(se,{className:"w-5 h-5 text-gray-400"})]})},e.id)})))}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"spotify"!==x||L?"youtube"!==x||F?"youtube"===x&&F&&(null==B?void 0:B.includes("quota exceeded"))?"YouTube API quota exceeded. Please try again later.":"No playlists found. Please check your account connection.":"Please connect your YouTube account first":"Please connect your Spotify account first"}),"spotify"===x&&!L||"youtube"===x&&!F?c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u("connections"),className:"mt-4 px-6 py-2 bg-gradient-to-r from-[#FF7A59] to-[#FF007A] text-white rounded-xl font-medium",children:"Connect Account"}):"youtube"===x&&F&&(null==B?void 0:B.includes("quota exceeded"))?c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Ue(!0),te().finally((()=>Ue(!1)))},className:"mt-4 px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium",children:"Try Again Later"}):c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{"spotify"===x&&L?(Ue(!0),ee().finally((()=>Ue(!1)))):"youtube"===x&&F&&(Ue(!0),te().finally((()=>Ue(!1))))},className:"mt-4 px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium",children:"Retry Loading Playlists"})]})}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{h("select-destination"),ge()},className:"w-full py-3 px-4 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors",children:"Back to Destination Selection"})]},"select-playlist"),"converting"===m&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Converting..."}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please wait while we convert your playlist"})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#FF7A59] to-[#FF007A] rounded-xl flex items-center justify-center",children:c.jsx(re,{className:"w-6 h-6 text-white animate-spin"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Converting Playlist"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null==w?void 0:w.name)||"Playlist"})]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:c.jsx(Ht.div,{className:"bg-gradient-to-r from-[#FF7A59] to-[#FF007A] h-2 rounded-full",initial:{width:0},animate:{width:`${Ge}%`},transition:{duration:.5}})}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:[Ge,"% complete"]})]})})]},"converting"),"success"===m&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx(Ht.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,type:"spring",stiffness:200},className:"w-20 h-20 mx-auto bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mb-4 shadow-lg",children:c.jsx(H,{className:"w-10 h-10 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Conversion Complete!"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your playlist has been successfully converted"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Ht.div,{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:c.jsx(H,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Conversion Successful"}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(null==w?void 0:w.name)||"Playlist"," has been converted"]})]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4",children:c.jsx(Ht.div,{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",initial:{width:0},animate:{width:"100%"},transition:{duration:.8,delay:.3}})}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center font-medium",children:"100% complete"})]}),c.jsxs(Ht.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{const e="spotify"===lt?J.spotifyPlaylistUrl:J.youtubePlaylistUrl;e&&window.open(e,"_blank"),ye()},className:"w-full py-4 px-6 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(V,{className:"w-5 h-5"}),c.jsx("span",{children:"View Playlist"})]})}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{h("select-source"),kt(),ye()},className:"w-full py-4 px-6 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold border border-gray-200 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Ce,{className:"w-5 h-5"}),c.jsx("span",{children:"Convert Another Playlist"})]})})]})]})]},"success")]})]})};return l.useEffect((()=>{J.status===As.MATCHING_TRACKS||J.status===As.CREATING_PLAYLIST?Ve(J.matchingProgress):J.status===As.LOADING_TRACKS?Ve(10):J.status===As.SUCCESS?Ve(100):Ve(0)}),[J.status,J.matchingProgress]),l.useEffect((()=>{"converting"===m&&J.selectedPlaylistId&&wt()}),[m,J.selectedPlaylistId,wt]),l.useEffect((()=>{x&&f&&(localStorage.setItem("source_platform",x),localStorage.setItem("destination_platform",f))}),[x,f]),c.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[c.jsx(ai,{children:c.jsxs("div",{className:"flex items-center justify-between px-2",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"soundswapp-logo",children:c.jsx(Hr,{width:40,height:40})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent font-sf-pro-display",children:"SoundSwapp"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-sf-pro-text",children:"connections"===d?"Platform Connections":"converter"===d?"Convert Playlists":"history"===d?"Conversion History":"User Profile"})]})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Ht.button,{onClick:()=>{ce(),ge()},className:Hs("relative transition-all duration-300 rounded-full p-2",de?"text-yellow-500 hover:text-yellow-400 hover:bg-yellow-500/10 hover:shadow-yellow-500/20 hover:shadow-lg":"text-gray-800 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-100 hover:bg-gray-200/50 dark:hover:bg-gray-700/30"),whileHover:{scale:1.1},whileTap:{scale:.9},transition:{type:"spring",stiffness:300,damping:30},"aria-label":"Toggle theme",children:c.jsx(Ht.div,{animate:{rotate:de?180:0},transition:{duration:.5,ease:"easeInOut"},children:de?c.jsx(_e,{className:"w-6 h-6 drop-shadow-sm"}):c.jsx(Ie,{className:"w-6 h-6 drop-shadow-sm"})})}),c.jsx("button",{onClick:()=>u("profile"),onContextMenu:e=>{e.preventDefault(),_("/preferences")},className:"relative w-14 h-14 rounded-full overflow-hidden outline-none ring-0 border-0 shadow-sm bg-transparent","aria-label":"Open profile",children:c.jsx("img",{src:S||(null==I?void 0:I.photoURL)||"/images/default-avatar.svg",alt:"Profile",className:"w-full h-full object-cover rounded-full select-none",draggable:!1,onError:e=>{const t=e.currentTarget;t.src.endsWith("default-avatar.svg")||(t.src="/images/default-avatar.svg",E("/images/default-avatar.svg"))}})})]})]})}),c.jsx("div",{className:"flex-1 overflow-hidden relative",children:c.jsx(Gt,{mode:"wait",children:c.jsx(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:c.jsx(Ht.div,{className:"h-full overflow-y-auto pb-[calc(5rem+env(safe-area-inset-bottom))] mobile-surface-premium",initial:{opacity:0},animate:{opacity:1},transition:{duration:.1,ease:"easeOut"},children:c.jsx("div",{className:"mx-4 mt-4 rounded-2xl p-4 shadow-lg mobile-card-premium animate-rise-fade",children:(()=>{switch(d){case"converter":default:return St();case"connections":return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Ht.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[c.jsx(Ht.div,{className:"relative mb-4",initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},children:c.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-[#FF7A59] to-[#FF007A] rounded-full flex items-center justify-center shadow-2xl",children:c.jsx(Ae,{className:"w-10 h-10 text-white"})})}),c.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-[#FF7A59] to-[#FF007A] bg-clip-text text-transparent mb-3 font-sf-pro-display",children:"Platform Connections"}),c.jsx("p",{className:"text-muted-foreground text-lg leading-relaxed max-w-sm mx-auto font-sf-pro-text",children:"Connect your music platforms to start converting playlists"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:c.jsx(ii,{className:"bg-gradient-to-br from-[#1DB954]/10 to-[#1DB954]/5 border-[#1DB954]/20 shadow-lg backdrop-blur-sm overflow-hidden",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#1DB954]/20 to-transparent opacity-50"}),c.jsxs("div",{className:"relative z-10 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(Ht.div,{className:"w-16 h-16 bg-gradient-to-br from-[#1DB954] to-[#1ED760] rounded-2xl flex items-center justify-center shadow-lg relative overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(()=>{var e,t;const a=(null==(t=null==(e=null==G?void 0:G.images)?void 0:e[0])?void 0:t.url)||(null==G?void 0:G.imageUrl);return L&&a?c.jsx(Ht.img,{src:a,alt:"Spotify Profile",className:"w-full h-full object-cover rounded-2xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},onError:e=>{var t;e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")}}):null})(),c.jsx(Ht.div,{className:Hs("absolute inset-0 flex items-center justify-center",L&&((null==(t=null==(e=null==G?void 0:G.images)?void 0:e[0])?void 0:t.url)||(null==G?void 0:G.imageUrl))?"hidden":""),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx($,{className:"w-8 h-8 text-white drop-shadow-lg"})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white font-sf-pro-display",children:"Spotify"}),c.jsx("p",{className:"text-sm text-muted-foreground font-sf-pro-text",children:L?"Account linked":"Not connected"})]})]}),c.jsx(Ht.div,{className:Hs("px-3 py-1.5 rounded-full text-xs font-semibold transition-all duration-300",L?"bg-[#1DB954]/20 text-[#1DB954] border border-[#1DB954]/30":"bg-gray-500/20 text-gray-600 border border-gray-500/30"),animate:L?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0,repeatDelay:3},children:L?"Connected":"Disconnected"})]}),L&&G&&c.jsxs(Ht.div,{className:"mb-6 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.5,delay:.4},children:[c.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center font-sf-pro-display",children:[c.jsx(A,{className:"w-4 h-4 mr-2 text-[#1DB954]"}),"Account Details"]}),c.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Name:"}),c.jsx("span",{className:"font-medium text-[#1DB954]",children:G.displayName||"Premium User"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Email:"}),c.jsx("span",{className:"font-medium",children:G.email||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),c.jsx("span",{className:"font-medium text-[#1DB954]",children:"Premium"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Status:"}),c.jsx("span",{className:"font-medium text-green-600",children:"Active"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(oi,{onClick:()=>{L?D():bt()},className:"w-full h-14 text-base font-semibold bg-gradient-to-r from-[#1DB954] to-[#1ED760] hover:from-[#1ED760] hover:to-[#1DB954] text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] rounded-2xl border-0",disabled:Y,children:Y?c.jsxs(Ht.div,{className:"flex items-center justify-center",children:[c.jsx(re,{className:"w-5 h-5 mr-3 animate-spin"}),"Connecting..."]}):L?c.jsxs(Ht.div,{className:"flex items-center justify-center",children:[c.jsx(Le,{className:"w-5 h-5 mr-3"}),"Disconnect Spotify"]}):c.jsxs(Ht.div,{className:"flex items-center justify-center",children:[c.jsx(Z,{className:"w-5 h-5 mr-3"}),"Connect Spotify"]})}),O&&c.jsx(Ht.div,{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ne,{className:"w-4 h-4 text-red-600"}),c.jsx("p",{className:"text-sm text-red-600 font-medium",children:O})]})})]})]})]})})}),c.jsx(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:c.jsx(ii,{className:"bg-gradient-to-br from-[#FF0000]/10 to-[#FF0000]/5 border-[#FF0000]/20 shadow-lg backdrop-blur-sm overflow-hidden",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FF0000]/20 to-transparent opacity-50"}),c.jsxs("div",{className:"relative z-10 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(Ht.div,{className:"w-16 h-16 bg-gradient-to-br from-[#FF0000] to-[#FF4444] rounded-2xl flex items-center justify-center shadow-lg relative overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.95},children:[F&&(null==X?void 0:X.picture)?c.jsx(Ht.img,{src:X.picture,alt:"YouTube Profile",className:"w-full h-full object-cover rounded-2xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},onError:e=>{var t;console.log("YouTube profile image failed to load"),e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")},onLoad:()=>{console.log("YouTube profile image loaded successfully")}}):null,c.jsx(Ht.div,{className:Hs("absolute inset-0 flex items-center justify-center",F&&(null==X?void 0:X.picture)?"hidden":""),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("img",{src:"/images/YouTube connection card logo.png",alt:"YouTube",style:{height:32,width:"auto",objectFit:"contain",display:"block",minWidth:"32px"},className:"w-8 h-8 drop-shadow-lg"})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white font-sf-pro-display",children:"YouTube"}),c.jsx("p",{className:"text-sm text-muted-foreground font-sf-pro-text",children:F?"Account linked":"Not connected"})]})]}),c.jsx(Ht.div,{className:Hs("px-3 py-1.5 rounded-full text-xs font-semibold transition-all duration-300",F?"bg-[#FF0000]/20 text-[#FF0000] border border-[#FF0000]/30":"bg-gray-500/20 text-gray-600 border border-gray-500/30"),animate:F?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0,repeatDelay:3},children:F?"Connected":"Disconnected"})]}),F&&X&&c.jsxs(Ht.div,{className:"mb-6 p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.5,delay:.5},children:[c.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center font-sf-pro-display",children:[c.jsx(A,{className:"w-4 h-4 mr-2 text-[#FF0000]"}),"Channel Details"]}),c.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Name:"}),c.jsx("span",{className:"font-medium text-[#FF0000]",children:X.displayName||"YouTube User"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Email:"}),c.jsx("span",{className:"font-medium",children:X.email||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Type:"}),c.jsx("span",{className:"font-medium text-[#FF0000]",children:"Standard"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Status:"}),c.jsx("span",{className:"font-medium text-green-600",children:"Active"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(oi,{onClick:()=>{F?U():vt()},className:"w-full h-14 text-base font-semibold bg-gradient-to-r from-[#FF0000] to-[#FF4444] hover:from-[#FF4444] hover:to-[#FF0000] text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] rounded-2xl border-0",disabled:z,children:z?c.jsxs(Ht.div,{className:"flex items-center justify-center",children:[c.jsx(re,{className:"w-5 h-5 mr-3 animate-spin"}),"Connecting..."]}):F?c.jsxs(Ht.div,{className:"flex items-center justify-center",children:[c.jsx(Le,{className:"w-5 h-5 mr-3"}),"Disconnect YouTube"]}):c.jsxs(Ht.div,{className:"flex items-center justify-center",children:[c.jsx(Z,{className:"w-5 h-5 mr-3"}),"Connect YouTube"]})}),B&&c.jsx(Ht.div,{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Ne,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-red-600 font-medium",children:"YouTube Connection Error"}),c.jsx("p",{className:"text-red-500 text-xs mt-1",children:B}),B.includes("quota exceeded")&&c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",children:"Try Again Later"})]})]})})]})]})]})})})]}),c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"text-center",children:c.jsx("p",{className:"text-sm text-muted-foreground font-sf-pro-text",children:"Once connected, you can convert playlists in just a few clicks."})})]});case"history":return c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Ht.div,{className:"text-center mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[c.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-[#FF7A59] to-[#FF007A] bg-clip-text text-transparent mb-3 font-sf-pro-display",children:"Conversion History"}),c.jsx("p",{className:"text-muted-foreground text-lg leading-relaxed max-w-sm mx-auto font-sf-pro-text",children:"Track your playlist conversions and insights"})]}),J.conversionHistory&&J.conversionHistory.length>0?c.jsx(Ht.div,{ref:ve,className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:J.conversionHistory.slice(0,10).map(((e,t)=>{const a=Math.round(e.tracksMatched/e.totalTracks*100),s=e.tracksFailed>0,r=0===e.tracksMatched;return c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1*t},children:c.jsx(ii,{className:Hs("shadow-lg hover:shadow-xl transition-all duration-300",r?"bg-gradient-to-br from-red-500/10 to-red-600/5 border-red-500/20":s?"bg-gradient-to-br from-yellow-500/10 to-yellow-600/5 border-yellow-500/20":"bg-gradient-to-br from-green-500/10 to-green-600/5 border-green-500/20"),onClick:()=>{_(`/insights/${e.id}`)},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:Hs("w-12 h-12 rounded-xl flex items-center justify-center shadow-lg",r?"bg-gradient-to-br from-red-500 to-red-600":s?"bg-gradient-to-br from-yellow-500 to-yellow-600":"bg-gradient-to-br from-green-500 to-green-600"),children:r?c.jsx(y,{className:"w-6 h-6 text-white"}):s?c.jsx(Ne,{className:"w-6 h-6 text-white"}):c.jsx(p,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.spotifyPlaylistName||"Playlist Conversion"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Spotify ‚Üí YouTube"}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(p,{className:"w-4 h-4 text-green-500"}),c.jsxs("span",{className:"text-xs text-green-600 font-medium",children:[e.tracksMatched," matched"]})]}),s&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(y,{className:"w-4 h-4 text-red-500"}),c.jsxs("span",{className:"text-xs text-red-600 font-medium",children:[e.tracksFailed," failed"]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(C,{className:"w-4 h-4 text-blue-500"}),c.jsx("span",{className:"text-xs text-blue-600 font-medium",children:new Date(e.convertedAt).toLocaleDateString()})]})]}),s&&c.jsx("div",{className:"mt-3",children:c.jsxs(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t=>{t.stopPropagation(),console.log("View Failed Tracks clicked:",e),console.log("Failed tracks:",e.failedTracks),_("/failed-tracks",{state:{failedTracks:e.failedTracks||[],conversionId:e.id}})},className:"inline-flex items-center gap-2 px-3 py-1.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-xs font-medium hover:bg-red-200 dark:hover:bg-red-800/30 transition-colors",children:[c.jsx(y,{size:12}),"View Failed Tracks (",e.tracksFailed,")"]})})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:Hs("text-sm font-semibold",r?"text-red-600 dark:text-red-400":s?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"),children:r?"Failed":s?"Partial":"Complete"}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[a,"% Success"]})]}),c.jsx(se,{className:"w-5 h-5 text-muted-foreground"})]})]})})},e.id)}))}):c.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},children:c.jsx(ii,{className:"bg-gradient-to-br from-gray-500/10 to-gray-600/5 border-gray-500/20 shadow-lg",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Ee,{className:"w-8 h-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Conversions Yet"}),c.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Start converting your playlists to see your history here"}),c.jsx(oi,{onClick:()=>u("converter"),variant:"primary",className:"bg-gradient-to-r from-[#FF7A59] to-[#FF007A]",children:"Start Converting"})]})})})]});case"profile":return c.jsx(Ii,{onShowToast:yt,setActiveTab:u})}var e,t})()})})},d)})}),c.jsx("div",{className:"flex-shrink-0 z-10",children:c.jsxs(si,{children:[c.jsx(ri,{icon:c.jsx(Ae,{className:"w-6 h-6"}),label:"Connect",active:"connections"===d,onClick:()=>{u("connections"),ge()},badge:L&&F?void 0:"!"}),c.jsx(ri,{icon:c.jsx(T,{className:"w-6 h-6"}),label:"Convert",active:"converter"===d,onClick:()=>{u("converter"),ge()},badge:J.conversionHistory&&J.conversionHistory.length>0?J.conversionHistory.length.toString():void 0}),c.jsx(ri,{icon:c.jsx(C,{className:"w-6 h-6"}),label:"History",active:"history"===d,onClick:()=>{u("history"),ge()},badge:J.conversionHistory&&J.conversionHistory.length>0?J.conversionHistory.length.toString():void 0}),c.jsx(ri,{icon:c.jsx(q,{className:"w-6 h-6"}),label:"Profile",active:"profile"===d,onClick:()=>{u("profile"),ge()}})]})})]})})),Fi={sm:"text-lg md:text-xl",md:"text-xl md:text-2xl",lg:"text-2xl md:text-4xl",xl:"text-3xl md:text-5xl lg:text-6xl"},Mi={normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"},Di=({className:e,children:t,variant:a="default",size:s="md",weight:r="bold",animationDuration:i=3,showNoise:o=!0,letterSpacing:n="-0.02em"})=>{const{isDark:d}=qt(),u=l.useRef(null),m={spotify:"bg-gradient-to-r from-green-400 from-20% via-green-300 via-40% to-green-500 to-80%",youtube:"bg-gradient-to-r from-red-500 from-20% via-red-400 via-40% to-red-600 to-80%",transition:"bg-gradient-to-r from-green-400 from-10% via-purple-500 via-50% to-red-500 to-90%",default:d?"bg-gradient-to-r from-blue-400 from-20% via-violet-400 via-50% to-pink-400 to-80%":"bg-gradient-to-r from-blue-600 from-20% via-violet-600 via-50% to-pink-600 to-80%"};return l.useEffect((()=>{if(!u.current||!o)return;u.current&&(u.current.style.position="relative",u.current.classList.add("noise-texture"))}),[o]),c.jsx(Ht.div,{ref:u,className:Hs("inline-block bg-clip-text text-transparent relative",Fi[s],Mi[r],m[a],e),style:{letterSpacing:n,backgroundSize:"200% auto"},initial:{backgroundPosition:"0% 50%"},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:i,ease:"easeInOut",repeat:1/0},children:t})},Ui=()=>{const e=b(),{user:t,loading:a}=ya(),[s,r]=l.useState("loading"),[i,o]=l.useState(null),[n,d]=l.useState(!1),[u,h]=l.useState(!1),[x,p]=l.useState("good"),[g,y]=l.useState(0),{isDark:f}=qt();l.useEffect((()=>{d(Gs()),h(/Android/i.test(navigator.userAgent)),p(Vs());a||(async()=>{var s,i,n,l,c;try{if(a)return void console.log("Waiting for auth loading to complete...");const d=Vs();if(p(d),"offline"===d)return r("network-error"),void o("You appear to be offline. Please check your internet connection.");if(!t)return console.error("User not logged in during Spotify authentication"),r("auth-required"),void o("You need to be logged in to connect your Spotify account");const u=new URLSearchParams(window.location.search);console.log("Callback URL parameters:",{code:u.get("code")?"present":"missing",state:u.get("state")?"present":"missing",error:u.get("error")||"none"});const m=await gs();if(!m.success)return void((null==(s=m.error)?void 0:s.includes("authorization code"))?(r("error"),o("Failed to validate Spotify authorization. Please try connecting again.")):(null==(i=m.error)?void 0:i.includes("state parameter"))?(r("error"),o("Authentication session expired. Please try connecting again.")):Gs()&&((null==(n=m.error)?void 0:n.includes("timeout"))||(null==(l=m.error)?void 0:l.includes("network"))||(null==(c=m.error)?void 0:c.includes("connection")))?(r("network-error"),o(m.error||"Network issue during Spotify authentication")):(r("error"),o(m.error||"Failed to authenticate with Spotify")));r("success"),window.dispatchEvent(new CustomEvent("spotify-auth-changed",{detail:{authenticated:!0}})),console.log("Dispatched spotify-auth-changed event");const h=Gs()?3e3:2e3;setTimeout((()=>{const t=localStorage.getItem("spotify_auth_return_path")||"/";localStorage.removeItem("spotify_auth_return_path"),e(t)}),h)}catch(d){console.error("Error in Spotify callback:",d),d instanceof Error&&(d.message.includes("network")||d.message.includes("connection")||d.message.includes("offline"))?(r("network-error"),o("Network error during authentication. Please check your connection and try again.")):(r("error"),o(d instanceof Error?d.message:"Failed to authenticate with Spotify"))}})()}),[e,t,g,a]);const v=()=>{r("loading"),o(null),y((e=>e+1))};return c.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4 pt-safe pb-safe",children:c.jsxs(mr,{className:"max-w-md w-full p-6 sm:p-8 text-center",animate:!0,rounded:"2xl",shadow:"lg",children:[c.jsx(Di,{variant:"spotify",size:"lg",className:"mb-6",children:"Spotify Authentication"}),"loading"===s&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Ft,spin:!0,className:"text-3xl text-green-500"})}),c.jsx("p",{className:Hs("text-base",f?"text-gray-200":"text-gray-700"),children:n?"Connecting to Spotify... Please wait":"Connecting to Spotify..."}),n&&"slow"===x&&c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"Slow connection detected. This may take a bit longer."})]}),"success"===s&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Mt,className:"text-3xl text-green-500"})}),c.jsx("p",{className:Hs("text-xl font-medium mb-2",f?"text-white":"text-gray-800"),children:"Successfully Connected!"}),c.jsxs("p",{className:Hs("text-sm",f?"text-gray-300":"text-gray-600"),children:["Your Spotify account is now connected. Redirecting you back",n?" to the app":"","..."]})]}),"error"===s&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Dt,className:"text-3xl text-red-500"})}),c.jsx("p",{className:Hs("text-xl font-medium mb-2",f?"text-white":"text-gray-800"),children:"Connection Error"}),i&&c.jsx("p",{className:Hs("text-sm mb-4 max-w-xs mx-auto","text-red-500 dark:text-red-400"),children:i}),u&&c.jsx("p",{className:Hs("text-xs mb-4",f?"text-gray-400":"text-gray-500"),children:"If you're using Android, try closing your browser completely and trying again."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[c.jsxs("button",{onClick:()=>e("/"),className:Hs("px-4 py-3 rounded-xl flex items-center justify-center transition-all","hover:scale-[1.02]",f?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900","text-sm sm:text-base flex-1"),children:[c.jsx(m,{icon:Ut,className:"mr-2"}),"Go Back"]}),c.jsx("button",{onClick:v,className:Hs("px-4 py-3 rounded-xl flex items-center justify-center transition-all","bg-green-600 hover:bg-green-700 text-white hover:scale-[1.02]","text-sm sm:text-base flex-1"),children:"Try Again"})]})]}),"network-error"===s&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Yt,className:"text-3xl text-amber-500"})}),c.jsx("p",{className:Hs("text-xl font-medium mb-2",f?"text-white":"text-gray-800"),children:"Network Issue Detected"}),i&&c.jsx("p",{className:Hs("text-sm mb-4 max-w-xs mx-auto","text-amber-600 dark:text-amber-400"),children:i}),c.jsx("p",{className:Hs("text-sm mb-6",f?"text-gray-300":"text-gray-600"),children:n?"Mobile networks can sometimes interrupt authentication. Try switching to WiFi if available.":"Please check your internet connection and try again."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[c.jsxs("button",{onClick:()=>e("/"),className:Hs("px-4 py-3 rounded-xl flex items-center justify-center transition-all","hover:scale-[1.02]",f?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900","text-sm sm:text-base flex-1"),children:[c.jsx(m,{icon:Ut,className:"mr-2"}),"Go Back"]}),c.jsx("button",{onClick:v,className:Hs("px-4 py-3 rounded-xl flex items-center justify-center transition-all","bg-amber-600 hover:bg-amber-700 text-white hover:scale-[1.02]","text-sm sm:text-base flex-1"),children:"Retry Connection"})]})]}),"auth-required"===s&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Yt,className:"text-3xl text-blue-500"})}),c.jsx("p",{className:Hs("text-xl font-medium mb-2",f?"text-white":"text-gray-800"),children:"Authentication Required"}),i&&c.jsx("p",{className:Hs("text-sm mb-4 max-w-xs mx-auto","text-blue-500 dark:text-blue-400"),children:i}),c.jsx("p",{className:Hs("text-sm mb-6",f?"text-gray-300":"text-gray-600"),children:"You need to sign in to your account before connecting Spotify."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[c.jsxs("button",{onClick:()=>e("/"),className:Hs("px-4 py-3 rounded-xl flex items-center justify-center transition-all","hover:scale-[1.02]",f?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900","text-sm sm:text-base flex-1"),children:[c.jsx(m,{icon:Ut,className:"mr-2"}),"Go Back"]}),c.jsxs("button",{onClick:()=>{localStorage.setItem("auth_return_path",window.location.pathname),e("/login")},className:Hs("px-4 py-3 rounded-xl flex items-center justify-center transition-all","bg-blue-600 hover:bg-blue-700 text-white hover:scale-[1.02]","text-sm sm:text-base flex-1"),children:[c.jsx(m,{icon:$t,className:"mr-2"}),"Sign In"]})]})]})]})})},Yi=()=>{const e=b(),{user:t,loading:a,setHasYouTubeAuth:s}=ya(),[r,i]=l.useState("loading"),[o,n]=l.useState(null),[d,u]=l.useState("");qt();const[h,x]=l.useState(0);l.useEffect((()=>{let r,o,l=!0;const c=async()=>{try{const d=window.location.href;if(sessionStorage.setItem("youtube_callback_url",d),u("Starting callback processing..."),console.log("User signed in:",!!t),!t&&!a){i("auth-waiting");let e=0;return r=setInterval((()=>{e+=500,l&&x(e);Ge().currentUser&&(clearInterval(r),l&&(i("loading"),c()))}),500),void(o=setTimeout((()=>{clearInterval(r),l&&(i("auth-required"),n("Authentication session expired. Please sign in again."))}),1e4))}if(clearInterval(r),clearTimeout(o),!t)return i("auth-required"),void n("You need to be logged in to connect your YouTube account");await rs();if(!(await os()))throw new Error("Failed to verify YouTube authentication");s(!0),i("success"),g(),sessionStorage.removeItem("youtube_callback_url"),setTimeout((()=>{const t=localStorage.getItem("youtube_auth_return_path")||"/";localStorage.removeItem("youtube_auth_return_path"),e(t)}),2e3)}catch(d){console.error("YouTube callback error:",d),i("error"),n(d instanceof Error?d.message:"Failed to authenticate with YouTube"),u((e=>`${e}\nError: ${d instanceof Error?d.message:String(d)}`))}};return a||c(),()=>{l=!1,clearInterval(r),clearTimeout(o)}}),[e,s,a,t]);const p=()=>{e("/")},g=()=>{try{window.opener&&window.opener!==window&&(window.opener.postMessage({type:"youtube-auth-complete",success:!0},window.location.origin),console.log("Sent youtube-auth-complete message to opener")),window.dispatchEvent(new CustomEvent("youtube-auth-changed",{detail:{authenticated:!0}})),console.log("Dispatched youtube-auth-changed event")}catch(e){console.error("Error notifying about YouTube authentication:",e)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-black p-4",children:c.jsxs(mr,{className:"max-w-md w-full p-8 text-center",animate:!0,rounded:"2xl",shadow:"lg",children:[c.jsx(Di,{variant:"youtube",size:"lg",className:"mb-6",children:"YouTube Authentication"}),"loading"===r&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx(m,{icon:Ft,spin:!0,className:"text-4xl text-red-500 mb-4"}),c.jsx("p",{className:"text-gray-200",children:"Authenticating with YouTube..."})]}),"auth-waiting"===r&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:zt,spin:!0,className:"text-3xl text-blue-500"})}),c.jsx("p",{className:"text-xl font-medium mb-2 text-white",children:"Restoring Session"}),c.jsxs("p",{className:"text-sm text-gray-300 mb-4",children:["Please wait while we restore your session...",h>0&&` (${(1e4-h)/1e3}s)`]})]}),"success"===r&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Mt,className:"text-3xl text-green-500"})}),c.jsx("p",{className:"text-xl font-medium mb-2 text-white",children:"Successfully Connected!"}),c.jsx("p",{className:"text-sm mb-4 text-gray-300",children:"Your YouTube account is now connected. Redirecting you back..."})]}),"error"===r&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Yt,className:"text-3xl text-red-500"})}),c.jsx("p",{className:"text-xl font-medium mb-2 text-white",children:"Authentication Failed"}),c.jsx("p",{className:"text-sm mb-6 text-red-400",children:o}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("button",{onClick:()=>{window.location.reload()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[c.jsx(m,{icon:zt}),"Try Again"]}),c.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[c.jsx(m,{icon:Ut}),"Go Back"]})]})]}),"auth-required"===r&&c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mb-4",children:c.jsx(m,{icon:Dt,className:"text-3xl text-yellow-500"})}),c.jsx("p",{className:"text-xl font-medium mb-2 text-white",children:"Authentication Required"}),c.jsx("p",{className:"text-sm mb-6 text-gray-300",children:o||"You need to be logged in to connect your YouTube account"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("button",{onClick:()=>{sessionStorage.setItem("youtube_callback_url",window.location.href),localStorage.setItem("auth_return_path","/youtube-callback"),e("/login")},className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[c.jsx(m,{icon:$t}),"Sign In"]}),c.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors",children:[c.jsx(m,{icon:Ut}),"Go Back"]})]})]})]})})},$i=[{icon:c.jsx(T,{className:"w-6 h-6 text-[#FF7A59]"}),title:"All Your Music, One Place",desc:"Sync Spotify, YouTube, and more in a single click."},{icon:c.jsx(J,{className:"w-6 h-6 text-[#00C4CC]"}),title:"Private by Design",desc:"Your playlists are yours. We never share your data."},{icon:c.jsx(Y,{className:"w-6 h-6 text-[#FF007A]"}),title:"Lightning Fast",desc:"Convert and transfer playlists in seconds."}],zi=()=>{var e,t;qt();const a=b(),s=Fe(),{signInWithEmail:r,signInWithGoogle:i,signUpWithEmail:o,loading:n,error:d,user:u}=Bs(),[m,h]=l.useState(""),[x,p]=l.useState(""),[g,y]=l.useState(""),[f,v]=l.useState(!1),[w,j]=l.useState(null),[N,k]=l.useState(!1),[S,C]=l.useState(!1);l.useEffect((()=>{const e=window.location.search.includes("recovery=true");C(e),e&&(console.log("[DEBUG] Login page in recovery mode"),localStorage.removeItem("auth_recovery_data"),sessionStorage.removeItem("youtube_callback_url"))}),[]);const E=(null==(t=null==(e=s.state)?void 0:e.from)?void 0:t.pathname)||"/app";l.useEffect((()=>{if(u){const e=localStorage.getItem("youtube_callback_url");if(e)return localStorage.removeItem("youtube_callback_url"),void(window.location.href=e);a(E,{replace:!0})}}),[u,a,E]);const P=f?(e=>{let t=0;return e.length>=8&&t++,/[0-9]/.test(e)&&t++,/[!@#$%^&*]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,e.length>=12&&t++,Math.min(t,4)})(x):0,A=w||d;return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 relative overflow-hidden flex items-center justify-center",children:[c.jsx(Xs,{colorScheme:"colorful",density:"medium",interactive:!1,className:"fixed top-0 left-0 w-full h-full z-0 opacity-80 dark:opacity-60"}),c.jsx(Ht.div,{className:"absolute -top-32 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full bg-gradient-to-br from-[#FF7A59] via-[#FF007A] to-[#00C4CC] blur-3xl opacity-30",animate:{scale:[1,1.1,1],rotate:[0,360,0]},transition:{duration:18,repeat:1/0,ease:"linear"}}),[...Array(3)].map(((e,t)=>c.jsx(Ht.div,{className:"absolute text-white/20 drop-shadow-[0_0_10px_rgba(255,255,255,0.25)]",style:{left:20+30*t+"%",top:30+15*t+"%"},animate:{y:[0,-24,0],rotate:[0,360],opacity:[.2,.5,.2]},transition:{duration:8+2*t,repeat:1/0,delay:t},children:c.jsx(T,{size:28})},t))),c.jsxs("div",{className:"relative z-10 w-full max-w-5xl mx-auto flex flex-col lg:flex-row items-center justify-center gap-12 px-4 py-12",children:[c.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col items-center lg:items-start text-center lg:text-left mb-10 lg:mb-0",children:[c.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-4 tracking-tight",style:{background:"linear-gradient(to right, #FF7A59, #FF007A, #00C4CC)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",display:"inline-block",fontWeight:800,textShadow:"0 0 30px rgba(255,122,89,0.3)",fontSize:"4.5rem",letterSpacing:"-0.04em"},children:"SoundSwapp"}),c.jsx("p",{className:"text-lg text-neutral-600 dark:text-gray-300 mb-8 max-w-md",children:"Seamlessly sync your music across all platforms. One click, pure magic."}),c.jsx("div",{className:"space-y-6 mb-8 w-full max-w-xs mx-auto lg:mx-0",children:$i.map(((e,t)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"bg-white/10 rounded-xl p-3 flex items-center justify-center",children:e.icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-neutral-900 dark:text-white",children:e.title}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-gray-400",children:e.desc})]})]},t)))}),c.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm mt-4",children:[c.jsx("span",{children:"Trusted by music lovers worldwide"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:c.jsx($,{className:"text-white w-5 h-5"})}),c.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:c.jsx(z,{className:"text-white w-5 h-5"})})]})]}),c.jsx("div",{className:"mt-2 text-xs text-gray-500 italic",children:"‚ÄúPlaylist magic, powered by you.‚Äù"})]}),c.jsx("div",{className:"w-full max-w-md mx-auto",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:c.jsx(Hr,{width:48,height:48})}),c.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold tracking-tight bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent mb-2",children:S?"Authentication Recovery":f?"Create your account":"Welcome back"}),c.jsx("p",{className:"text-neutral-600 dark:text-gray-300",children:S?"Please sign in again to continue with your music service connection":f?"Sign up to start swapping playlists":"Sign in to continue"})]}),A&&c.jsx(Ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-xl backdrop-blur-sm",children:c.jsxs("p",{className:"text-red-300 text-sm flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),A]})}),S&&c.jsx(Ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-blue-500/20 border border-blue-500/30 rounded-xl backdrop-blur-sm",children:c.jsxs("p",{className:"text-blue-300 text-sm flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),"Recovery Mode: Your previous session expired. Please sign in again."]})}),c.jsxs(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{j(null);try{await i()}catch(e){j(e instanceof Error?e.message:"Google sign-in failed")}},disabled:n,className:"w-full py-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-3 shadow-lg text-white bg-[linear-gradient(90deg,#4285F4_0%,#34A853_33%,#FBBC05_66%,#EA4335_100%)] hover:brightness-110 active:brightness-95 focus:outline-none focus:ring-2 focus:ring-white/70 disabled:opacity-50 disabled:cursor-not-allowed mb-6","aria-label":"Sign in with Google",children:[n?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-3"}):c.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),c.jsxs("div",{className:"relative mb-6",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-neutral-200 dark:border-white/20"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 py-1 bg-transparent text-neutral-500 dark:text-gray-400",children:"or"})})]}),c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),j(null),m&&x)if(!f||g)try{f?await o(m,x,g):await r(m,x)}catch(t){j(t instanceof Error?t.message:"Authentication failed")}else j("Please enter your name");else j("Please fill in all fields")},className:"space-y-4",encType:"application/x-www-form-urlencoded",children:[f&&c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(ue,{className:"h-5 w-5 text-gradient bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent"})}),c.jsx("input",{type:"text",value:g,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl transition-all duration-200\n                                   bg-white text-neutral-900 placeholder-neutral-500 border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[#FF7A59]\n                                   dark:bg-white/10 dark:text-white dark:placeholder-gray-400 dark:border-white/20",placeholder:"Full Name",required:f,"aria-label":"Full Name",autoComplete:"name"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(de,{className:"h-5 w-5 text-gradient bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent"})}),c.jsx("input",{type:"email",value:m,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl transition-all duration-200\n                               bg-white text-neutral-900 placeholder-neutral-500 border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[#FF7A59]\n                               dark:bg-white/10 dark:text-white dark:placeholder-gray-400 dark:border-white/20",placeholder:"Email Address",required:!0,"aria-label":"Email Address",autoComplete:"email"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(Z,{className:"h-5 w-5 text-gradient bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent"})}),c.jsx("input",{type:N?"text":"password",value:x,onChange:e=>p(e.target.value),className:"w-full pl-12 pr-12 py-4 rounded-xl transition-all duration-200\n                               bg-white text-neutral-900 placeholder-neutral-500 border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[#FF7A59]\n                               dark:bg-white/10 dark:text-white dark:placeholder-gray-400 dark:border-white/20",placeholder:"Password",required:!0,minLength:6,"aria-label":"Password",autoComplete:f?"new-password":"current-password"}),c.jsx("button",{type:"button",onClick:()=>k(!N),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-white transition-colors","aria-label":N?"Hide password":"Show password",children:N?c.jsx(Me,{className:"h-5 w-5"}):c.jsx(L,{className:"h-5 w-5"})})]}),f&&c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("div",{className:`h-2 w-32 rounded-full ${_=P,["bg-red-500","bg-orange-400","bg-yellow-400","bg-green-400","bg-cyan-500"][_]||"bg-gray-300"}`}),c.jsx("span",{className:"text-xs text-gray-400",children:"Use 8+ characters, a number, and a symbol for a strong password."})]}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:n,className:"w-full py-4 bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] text-white font-semibold rounded-xl hover:from-[#FF7A59] hover:to-[#00C4CC] focus:outline-none focus:ring-2 focus:ring-[#FF7A59] focus:ring-offset-2 focus:ring-offset-transparent disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg",children:n?c.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin mx-auto"}):f?"Create Account":"Sign In"})]}),c.jsxs("div",{className:"text-center mt-6",children:[c.jsxs("button",{onClick:()=>v(!f),className:"text-gray-300 hover:text-white transition-colors",children:[f?"Already have an account? ":"Don't have an account? ",c.jsx("span",{className:"text-[#FF7A59] hover:text-[#00C4CC] font-medium",children:f?"Sign in":"Sign up"})]}),c.jsxs("div",{className:"mt-6 text-xs text-gray-400",children:["By using this app, you agree to our",c.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:"Terms of Use"}),"and",c.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:"Privacy Policy"}),"."]})]})]})})]})]});var _},Oi=()=>{var e,t;const a=qt(),{isDark:s}=a,r=null==a?void 0:a.toggleTheme,i=b(),o=Fe(),{signInWithEmail:n,signInWithGoogle:d,signUpWithEmail:u,loading:m,error:h,user:x}=Bs(),[g,y]=l.useState(""),[f,v]=l.useState(""),[w,j]=l.useState(""),[N,k]=l.useState(!1),[S,C]=l.useState(null),[E,P]=l.useState(!1),[A,_]=l.useState(!1),[I,R]=l.useState(!1),[F,M]=l.useState(!1),[D,U]=l.useState({}),[Y,$]=l.useState(!1),z=(e,t)=>{const a={...D};switch(e){case"email":t?/\S+@\S+\.\S+/.test(t)?delete a.email:a.email="Please enter a valid email address":a.email="Email is required";break;case"password":t?t.length<6?a.password="Password must be at least 6 characters":delete a.password:a.password="Password is required";break;case"displayName":N&&!t?a.displayName="Full name is required":N&&t.length<2?a.displayName="Name must be at least 2 characters":delete a.displayName}U(a)},O=(e=>{let t=0;return e.length>=8&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t})(f),B=0===f.length?"":O<2?"Weak password":O<4?"Good password":"Strong password";l.useEffect((()=>{const e=window.location.search.includes("recovery=true");_(e),e&&(console.log("[DEBUG] Mobile Login page in recovery mode"),localStorage.removeItem("auth_recovery_data"),sessionStorage.removeItem("youtube_callback_url"))}),[]);const H=(null==(t=null==(e=o.state)?void 0:e.from)?void 0:t.pathname)||"/";l.useEffect((()=>{if(x){const e=localStorage.getItem("youtube_callback_url");if(e)return localStorage.removeItem("youtube_callback_url"),void(window.location.href=e);i(H,{replace:!0})}}),[x,i,H]);const G=S||h;return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 relative overflow-hidden premium-overlay",children:[c.jsx(Xs,{colorScheme:"colorful",density:"medium",interactive:!1,className:"fixed top-0 left-0 w-full h-full z-0 opacity-80 dark:opacity-60"}),c.jsx(Ht.div,{className:"absolute -top-32 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full bg-gradient-to-br from-[#FF7A59] via-[#FF007A] to-[#00C4CC] blur-3xl opacity-30",animate:{scale:[1,1.1,1],rotate:[0,360,0]},transition:{duration:18,repeat:1/0,ease:"linear"}}),[...Array(3)].map(((e,t)=>c.jsx(Ht.div,{className:"absolute text-white/20 drop-shadow-[0_0_10px_rgba(255,255,255,0.25)]",style:{left:20+30*t+"%",top:30+15*t+"%"},animate:{y:[0,-24,0],rotate:[0,360],opacity:[.2,.5,.2]},transition:{duration:8+2*t,repeat:1/0,delay:t},children:c.jsx(T,{size:28})},t))),c.jsx(Ht.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},onClick:()=>{if("function"==typeof r)return void r();const e=document.documentElement,t=e.classList.contains("dark");e.classList.remove("light","dark"),e.classList.add(t?"light":"dark"),localStorage.setItem("theme",t?"light":"dark")},"aria-label":"Toggle theme",className:"absolute top-6 right-6 z-50 grid place-items-center h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full grid place-items-center bg-white/20 dark:bg-[#181926]/90 backdrop-blur-md border border-white/20 transition-colors duration-300",children:s?c.jsx(_e,{className:"w-5 h-5 text-yellow-400 drop-shadow-[0_0_6px_rgba(250,204,21,0.7)]"}):c.jsx(Ie,{className:"w-5 h-5 text-[#FF7A59] drop-shadow-[0_0_6px_rgba(255,122,89,0.7)]"})})}),c.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md space-y-6",children:[c.jsxs(Ht.div,{className:"text-center mb-8",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[c.jsx(Ht.p,{className:"text-sm text-gray-400 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:(()=>{const e=(new Date).getHours();return e<12?"Good morning! ‚òÄÔ∏è":e<18?"Good afternoon! üå§Ô∏è":"Good evening! üåô"})()}),c.jsx(Ht.div,{className:"relative mb-6",initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.2},children:c.jsx(Ht.div,{className:"mx-auto flex items-center justify-center",animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:c.jsx(Hr,{width:40,height:40})})}),c.jsx(Ht.h1,{className:"text-3xl md:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent mb-3 drop-shadow-[0_2px_8px_rgba(0,0,0,0.15)]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:A?"Authentication Recovery":N?"Create Account":"Welcome Back"}),c.jsx(Ht.p,{className:"text-neutral-600 dark:text-gray-300 text-base leading-relaxed",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:A?"Please sign in again to continue with your music service connection":N?"Join SoundSwapp to start converting playlists":"Sign in to continue your music journey"})]}),c.jsx(Ht.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:c.jsxs("div",{className:"space-y-6",children:[A&&c.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-4 bg-blue-500/20 border border-blue-500/30 rounded-xl backdrop-blur-sm",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Ne,{className:"w-5 h-5 text-blue-400"}),c.jsx("p",{className:"text-blue-300 text-sm",children:"Recovery mode: Please authenticate to continue"})]})}),c.jsx(Gt,{children:G&&c.jsx(Ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-red-500/20 border border-red-500/30 rounded-xl backdrop-blur-sm",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Ne,{className:"w-5 h-5 text-red-400"}),c.jsx("p",{className:"text-red-300 text-sm",children:G})]})})}),c.jsxs(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{C(null),M(!0);try{await d(),$(!0),setTimeout((()=>$(!1)),2e3)}catch(e){const t=e instanceof Error?e.message:"Google sign-in failed";t.includes("popup-closed")?C("Sign-in was cancelled. Please try again."):t.includes("network-request-failed")?C("Network error. Please check your connection and try again."):C("Google sign-in failed. Please try again.")}finally{M(!1)}},disabled:m||F,className:"w-full py-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-3 shadow-lg text-white bg-[linear-gradient(90deg,#4285F4_0%,#34A853_33%,#FBBC05_66%,#EA4335_100%)] hover:brightness-110 active:brightness-95 focus:outline-none focus:ring-2 focus:ring-white/70","aria-label":"Sign in with Google",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[m||F?c.jsx("div",{className:"w-5 h-5 border-2 border-white/70 border-t-transparent rounded-full animate-spin"}):c.jsxs("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{className:"font-semibold",children:"Continue with Google"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-neutral-200 dark:border-white/20"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 py-1 bg-transparent text-neutral-500 dark:text-gray-400",children:"or"})})]}),c.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),C(null),M(!0),(()=>{const e={};return g?/\S+@\S+\.\S+/.test(g)||(e.email="Please enter a valid email address"):e.email="Email is required",f?f.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",N&&!w?e.displayName="Full name is required":N&&w.length<2&&(e.displayName="Name must be at least 2 characters"),U(e),0===Object.keys(e).length})())try{N?(await u(g,f,w),$(!0),setTimeout((()=>$(!1)),2e3)):(await n(g,f),I&&localStorage.setItem("rememberMe","true"),$(!0),setTimeout((()=>$(!1)),2e3))}catch(t){const e=t instanceof Error?t.message:"Authentication failed";e.includes("email-already-in-use")?C("An account with this email already exists. Try signing in instead."):e.includes("weak-password")?C("Password is too weak. Please choose a stronger password."):e.includes("invalid-email")?C("Please enter a valid email address."):e.includes("user-not-found")?C("No account found with this email. Try signing up instead."):e.includes("wrong-password")?C("Incorrect password. Please try again."):C(e)}finally{M(!1)}else M(!1)},className:"space-y-4",encType:"application/x-www-form-urlencoded",children:[N&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(ue,{className:"h-5 w-5 bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent"})}),c.jsx("input",{type:"text",value:w,onChange:e=>{j(e.target.value),z("displayName",e.target.value)},className:"w-full pl-12 pr-4 py-4 rounded-xl transition-all duration-200\n                                   bg-white text-neutral-900 placeholder-neutral-500 border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[#FF7A59]\n                                   dark:bg-white/10 dark:text-white dark:placeholder-gray-400 dark:border-white/20",placeholder:"Full Name",required:N,"aria-label":"Full Name",autoComplete:"name"})]}),D.displayName&&c.jsxs(Ht.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 dark:text-red-400 text-sm mt-1 flex items-center",children:[c.jsx(Ne,{className:"w-4 h-4 mr-1"}),D.displayName]})]}),c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(de,{className:"h-5 w-5 bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent"})}),c.jsx("input",{type:"email",value:g,onChange:e=>{y(e.target.value),z("email",e.target.value)},className:"w-full pl-12 pr-4 py-4 rounded-xl transition-all duration-200\n                                 bg-white text-neutral-900 placeholder-neutral-500 border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[#FF7A59]\n                                 dark:bg-white/10 dark:text-white dark:placeholder-gray-400 dark:border-white/20",placeholder:"Email Address",required:!0,"aria-label":"Email Address",autoComplete:"email"})]}),D.email&&c.jsxs(Ht.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 dark:text-red-400 text-sm mt-1 flex items-center",children:[c.jsx(Ne,{className:"w-4 h-4 mr-1"}),D.email]})]}),c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.7},children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(Z,{className:"h-5 w-5 bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] bg-clip-text text-transparent"})}),c.jsx("input",{type:E?"text":"password",value:f,onChange:e=>{v(e.target.value),z("password",e.target.value)},className:"w-full pl-12 pr-12 py-4 rounded-xl transition-all duration-200\n                                 bg-white text-neutral-900 placeholder-neutral-500 border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[#FF7A59]\n                                 dark:bg-white/10 dark:text-white dark:placeholder-gray-400 dark:border-white/20",placeholder:"Password",required:!0,"aria-label":"Password",autoComplete:N?"new-password":"current-password"}),c.jsx("button",{type:"button",onClick:()=>P(!E),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-neutral-500 hover:text-neutral-800 dark:text-gray-400 dark:hover:text-white transition-colors",children:E?c.jsx(Me,{className:"h-5 w-5"}):c.jsx(L,{className:"h-5 w-5"})})]}),D.password&&c.jsxs(Ht.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 dark:text-red-400 text-sm mt-1 flex items-center",children:[c.jsx(Ne,{className:"w-4 h-4 mr-1"}),D.password]})]}),N&&c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("div",{className:`h-2 w-32 rounded-full ${V=O,["bg-red-500","bg-orange-400","bg-yellow-400","bg-green-400","bg-cyan-500"][V]||"bg-gray-300"}`}),c.jsx("span",{className:"text-xs text-gray-400",children:B})]}),!N&&c.jsx(Ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"flex items-center space-x-3",children:c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:I,onChange:e=>R(e.target.checked),className:"w-4 h-4 text-[#FF7A59] bg-white/10 border-white/20 rounded focus:ring-[#FF7A59] focus:ring-2 focus:ring-offset-0"}),c.jsx("span",{className:"text-sm text-gray-300",children:"Keep me signed in"})]})}),c.jsxs(Ht.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:m||F,className:"w-full py-4 bg-gradient-to-r from-[#FF7A59] via-[#FF007A] to-[#00C4CC] text-white font-semibold rounded-xl hover:from-[#FF7A59] hover:to-[#00C4CC] focus:outline-none focus:ring-2 focus:ring-[#FF7A59] focus:ring-offset-2 focus:ring-offset-transparent disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg relative overflow-hidden",children:[c.jsx(Gt,{children:Y&&c.jsx(Ht.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"absolute inset-0 bg-green-500 flex items-center justify-center rounded-xl",children:c.jsx(p,{className:"w-6 h-6 text-white"})})}),c.jsx(Ht.div,{animate:{opacity:Y?0:1},transition:{duration:.2},children:m||F?c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),c.jsx("span",{children:N?"Creating Account...":"Signing In..."})]}):N?"Create Account":"Sign In"})]})]}),c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:1},className:"text-center",children:c.jsxs("button",{onClick:()=>k(!N),className:"text-gray-300 hover:text-white transition-colors",children:[N?"Already have an account? ":"Don't have an account? ",c.jsx("span",{className:"text-[#FF7A59] hover:text-[#00C4CC] font-medium",children:N?"Sign in":"Sign up"})]})}),c.jsxs("div",{className:"text-center text-xs text-gray-400",children:["By using this app, you agree to our",c.jsx("a",{href:"/terms-of-service",className:"underline ml-1",children:"Terms of Use"}),"and",c.jsx("a",{href:"/privacy-policy",className:"underline ml-1",children:"Privacy Policy"}),"."]})]})})]})})]});var V},Bi=({children:e,element:t,requireProvider:a=!1})=>{const{isAuthenticated:s,isProvider:r,loading:i}=ya(),o=Fe(),n=e??t??null;return i?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?a&&!r?c.jsx(De,{to:"/get-started",state:{from:o},replace:!0}):n:c.jsx(De,{to:"/login",state:{from:o},replace:!0})};function Hi(){const{isDark:e}=qt();return c.jsxs("div",{className:e?"bg-gray-900 text-white min-h-screen":"bg-white text-gray-800 min-h-screen",children:[c.jsx("header",{className:"p-4 border-b "+(e?"border-gray-800":"border-gray-200"),children:c.jsxs("div",{className:"container mx-auto flex items-center",children:[c.jsxs(le,{to:"/",className:"flex items-center text-sm font-medium "+(e?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[c.jsx(m,{icon:Ut,className:"mr-2"}),"Back to App"]}),c.jsx("h1",{className:"text-xl font-bold mx-auto",children:"Privacy Policy"})]})}),c.jsx("main",{className:"container mx-auto py-8 px-4 max-w-4xl",children:c.jsxs("div",{className:`prose ${e?"prose-invert":""} max-w-none`,children:[c.jsx("h2",{children:"Privacy Policy"}),c.jsx("p",{children:c.jsxs("strong",{children:["Last updated: ",(new Date).toLocaleDateString()]})}),c.jsx("p",{children:"Playlist Converter does not store your playlists or personal data on our servers. Authentication is used solely to access your Spotify and YouTube accounts for playlist conversion. We do not share or sell your data to third parties."}),c.jsx("h3",{children:"Third-Party APIs"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Spotify API:"})," Used to fetch your playlists and tracks for conversion."]}),c.jsxs("li",{children:[c.jsx("strong",{children:"YouTube API:"})," Used to create playlists and add tracks to your YouTube account."]})]}),c.jsx("h3",{children:"Cookies & Analytics"}),c.jsx("p",{children:"This app does not use cookies or analytics to track your activity."}),c.jsx("h3",{children:"Contact"}),c.jsxs("p",{children:["For questions or concerns, contact us at ",c.jsx("a",{href:"mailto:michmichira@gmail.com",children:"michmichira@gmail.com"}),"."]})]})}),c.jsx("footer",{className:"py-10 border-t "+(e?"bg-gray-900 border-gray-800":"bg-gray-50 border-gray-200"),children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center mb-6 md:mb-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",children:c.jsx(Hr,{width:40,height:40})}),c.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-blue-400",children:"Playlist Converter"})]}),c.jsxs("div",{className:"flex space-x-5",children:[c.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"h-10 w-10 rounded-full flex items-center justify-center transition-colors duration-300 "+(e?"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:text-gray-900"),children:c.jsx(m,{icon:Ot})}),c.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"h-10 w-10 rounded-full flex items-center justify-center transition-colors duration-300 "+(e?"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:text-gray-900"),children:c.jsx(m,{icon:Bt})}),c.jsx("a",{href:"mailto:michmichira@gmail.com",className:"h-10 w-10 rounded-full flex items-center justify-center transition-colors duration-300 "+(e?"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:text-gray-900"),children:c.jsx(m,{icon:kt})})]})]}),c.jsx("div",{className:"h-px w-full my-6 "+(e?"bg-gray-800":"bg-gray-200")}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[c.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-x-6 gap-y-2 mb-4 md:mb-0",children:[c.jsx(le,{to:"/privacy-policy",className:"text-sm transition-colors duration-200 "+(e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"Privacy Policy"}),c.jsx(le,{to:"/terms-of-service",className:"text-sm transition-colors duration-200 "+(e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"Terms of Service"}),c.jsx(le,{to:"/",className:"text-sm transition-colors duration-200 "+(e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"Home"})]}),c.jsxs("p",{className:"text-sm "+(e?"text-gray-500":"text-gray-600"),children:["¬© ",(new Date).getFullYear()," Playlist Converter. All rights reserved."]})]})]})})]})}function Gi(){const{isDark:e}=qt();return c.jsxs("div",{className:e?"bg-gray-900 text-white min-h-screen":"bg-white text-gray-800 min-h-screen",children:[c.jsx("header",{className:"p-4 border-b "+(e?"border-gray-800":"border-gray-200"),children:c.jsxs("div",{className:"container mx-auto flex items-center",children:[c.jsxs(le,{to:"/",className:"flex items-center text-sm font-medium "+(e?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[c.jsx(m,{icon:Ut,className:"mr-2"}),"Back to App"]}),c.jsx("h1",{className:"text-xl font-bold mx-auto",children:"Terms of Service"})]})}),c.jsx("main",{className:"container mx-auto py-8 px-4 max-w-4xl",children:c.jsxs("div",{className:`prose ${e?"prose-invert":""} max-w-none`,children:[c.jsx("h2",{children:"Terms of Service"}),c.jsx("p",{children:c.jsxs("strong",{children:["Last updated: ",(new Date).toLocaleDateString()]})}),c.jsx("h3",{children:"Use of Service"}),c.jsx("p",{children:"By using Playlist Converter, you agree to use the app for personal, non-commercial purposes only. You are responsible for complying with the terms of Spotify and YouTube."}),c.jsx("h3",{children:"Third-Party APIs"}),c.jsx("p",{children:"This app uses the Spotify and YouTube APIs. You are responsible for following their terms of use. We are not affiliated with or endorsed by Spotify or YouTube."}),c.jsx("h3",{children:"No Warranty"}),c.jsx("p",{children:'Playlist Converter is provided "as is" without warranty of any kind. We do not guarantee the accuracy, reliability, or availability of the service.'}),c.jsx("h3",{children:"Contact"}),c.jsxs("p",{children:["For questions or concerns, contact us at ",c.jsx("a",{href:"mailto:michmichira@gmail.com",children:"michmichira@gmail.com"}),"."]})]})}),c.jsx("footer",{className:"py-10 border-t "+(e?"bg-gray-900 border-gray-800":"bg-gray-50 border-gray-200"),children:c.jsxs("div",{className:"container mx-auto px-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center mb-6 md:mb-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",children:c.jsx(Hr,{width:40,height:40})}),c.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-blue-400",children:"Playlist Converter"})]}),c.jsxs("div",{className:"flex space-x-5",children:[c.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"h-10 w-10 rounded-full flex items-center justify-center transition-colors duration-300 "+(e?"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:text-gray-900"),children:c.jsx(m,{icon:Ot})}),c.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"h-10 w-10 rounded-full flex items-center justify-center transition-colors duration-300 "+(e?"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:text-gray-900"),children:c.jsx(m,{icon:Bt})}),c.jsx("a",{href:"mailto:michmichira@gmail.com",className:"h-10 w-10 rounded-full flex items-center justify-center transition-colors duration-300 "+(e?"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:text-gray-900"),children:c.jsx(m,{icon:kt})})]})]}),c.jsx("div",{className:"h-px w-full my-6 "+(e?"bg-gray-800":"bg-gray-200")}),c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[c.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-x-6 gap-y-2 mb-4 md:mb-0",children:[c.jsx(le,{to:"/privacy-policy",className:"text-sm transition-colors duration-200 "+(e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"Privacy Policy"}),c.jsx(le,{to:"/terms-of-service",className:"text-sm transition-colors duration-200 "+(e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"Terms of Service"}),c.jsx(le,{to:"/",className:"text-sm transition-colors duration-200 "+(e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:"Home"})]}),c.jsxs("p",{className:"text-sm "+(e?"text-gray-500":"text-gray-600"),children:["¬© ",(new Date).getFullYear()," Playlist Converter. All rights reserved."]})]})]})})]})}const Vi=({onComplete:e,initialDelay:t=500,showProgressText:a=!0,theme:s="default",customLogo:r,size:i="md",initialProgress:o=0})=>{const[n,d]=l.useState(!0),[u,m]=l.useState("Initializing..."),[h,x]=l.useState(o),[p,g]=l.useState(!1),y=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;l.useEffect((()=>{const a=setTimeout((()=>{const t=((e,t,a=0)=>{const s=[{name:"Loading your music universe...",duration:800},{name:"Connecting to platforms",duration:600},{name:"Preparing converter",duration:700},{name:"Almost ready",duration:500}];let r,i=0,o=a;return a>0&&(i=a<25?0:a<50?1:a<75?2:3),r=setInterval((()=>{if(i>=s.length)return clearInterval(r),void t();const a=s[i];if(o>=100)return i++,o=0,void(i<s.length&&e(s[i].name,0));const n=100/(a.duration/50);o=Math.min(100,o+n),e(a.name,o)}),50),e(s[i].name,o),()=>clearInterval(r)})(((e,t)=>{m(e),x(t)}),(()=>{g(!0),m("Ready!"),x(100),setTimeout((()=>{d(!1),e&&e()}),800)}),o);return t}),t);return()=>clearTimeout(a)}),[t,e,o]);const f=(()=>{switch(s){case"spotify":return{primary:"#1DB954",secondary:"#191414",glow:"rgba(30, 215, 96, 0.3)",spinnerGradient:"conic-gradient(from 90deg, #1DB954, #19141400)"};case"youtube":return{primary:"#FF0000",secondary:"#282828",glow:"rgba(255, 0, 0, 0.3)",spinnerGradient:"conic-gradient(from 90deg, #FF0000, #28282800)"};default:return{primary:"var(--brand-primary)",secondary:"var(--brand-secondary)",glow:"rgba(var(--brand-accent-pink-rgb), 0.4)",spinnerGradient:"conic-gradient(from 90deg, var(--brand-primary), var(--brand-accent-pink), var(--brand-secondary), var(--brand-primary-dark))"}}})(),b=function(e){switch(e){case"sm":return{containerSize:"w-24 h-24",innerCircleSize:"w-16 h-16",logoContainerSize:"w-7 h-7",spinnerWidth:3,progressWidth:"w-48"};case"lg":return{containerSize:"w-40 h-40",innerCircleSize:"w-28 h-28",logoContainerSize:"w-12 h-12",spinnerWidth:5,progressWidth:"w-80"};default:return{containerSize:"w-32 h-32",innerCircleSize:"w-20 h-20",logoContainerSize:"w-9 h-9",spinnerWidth:4,progressWidth:"w-64"}}}(i),v=(({isDark:e=!1,blurStrength:t=10,borderOpacity:a=.2,bgOpacity:s=.2})=>({backdropFilter:`blur(${t}px)`,WebkitBackdropFilter:`blur(${t}px)`,backgroundColor:e?`rgba(17, 24, 39, ${s})`:`rgba(255, 255, 255, ${s})`,borderWidth:"1px",borderStyle:"solid",borderColor:e?`rgba(255, 255, 255, ${a})`:`rgba(0, 0, 0, ${a})`,boxShadow:e?"0 8px 32px rgba(0, 0, 0, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.1)"}))({isDark:y,blurStrength:12,bgOpacity:y?.25:.7,borderOpacity:.15});return c.jsx(Gt,{children:n&&c.jsxs(Ht.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[c.jsx("div",{className:Hs("absolute inset-0",y?"bg-gray-900/95 backdrop-blur-md":"bg-white/95 backdrop-blur-md")}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center p-8",children:[c.jsx(Ht.div,{className:Hs("relative rounded-full overflow-hidden",b.containerSize),style:v,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2},children:c.jsxs(mr,{className:"w-full h-full rounded-full",rounded:"full",shadow:"lg",children:[c.jsx(Ht.div,{className:Hs("absolute inset-0",p?"opacity-0":"opacity-100"),style:{borderRadius:"50%",border:`${b.spinnerWidth}px solid transparent`,backgroundColor:"transparent",backgroundImage:`radial-gradient(transparent ${5*b.spinnerWidth}px, transparent ${5*b.spinnerWidth}px), ${f.spinnerGradient}`,backgroundRepeat:"no-repeat, no-repeat",backgroundPosition:"center, center",backgroundSize:"cover, cover",backgroundClip:"padding-box, border-box",backgroundOrigin:"padding-box, border-box",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"destination-out",maskComposite:"exclude"},animate:{rotate:360},transition:{duration:1.5,ease:"linear",repeat:1/0}}),c.jsx(mr,{className:Hs("absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center",b.innerCircleSize),rounded:"full",shadow:"sm",children:c.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r||("youtube"===s?c.jsx("div",{className:Hs("flex items-center justify-center",b.logoContainerSize),children:c.jsx("img",{src:"/images/yt_logo_rgb_dark.png",alt:"YouTube",style:{height:32,minHeight:20,maxHeight:40,width:"auto",objectFit:"contain",display:"block",minWidth:"32px"}})}):c.jsx(Hr,{width:parseInt(b.logoContainerSize.replace("w-","").replace("h-","")),height:parseInt(b.logoContainerSize.replace("w-","").replace("h-",""))}))})})]})}),a&&c.jsx(Ht.div,{className:"mt-8 max-w-md text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:c.jsxs(mr,{className:"px-6 py-4",rounded:"xl",shadow:"sm",animate:!1,children:[c.jsx(Ht.div,{className:Hs("font-medium mb-2 text-center",y?"text-white":"text-gray-800"),animate:{opacity:p?.5:1},children:p?"Ready!":u}),c.jsx("div",{className:`relative h-1 mt-5 rounded-full overflow-hidden ${b.progressWidth} bg-white/10`,children:c.jsx(Ht.div,{className:"h-full rounded-full",style:{background:f.primary},initial:{width:`${o}%`},animate:{width:`${h}%`},transition:{type:"tween"}})}),c.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-400",children:[c.jsxs("div",{children:[Math.round(h),"%"]}),c.jsx("div",{children:"100%"})]}),!p&&c.jsx("div",{className:"flex justify-center mt-4 space-x-1",children:[0,1,2].map((e=>c.jsx(Ht.div,{className:"h-1.5 w-1.5 rounded-full "+(y?"bg-white/50":"bg-gray-500/50"),animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:1.5,repeat:1/0,delay:.2*e}},e)))})]})})]})]})})};const Wi=()=>{const{isDark:e}=qt(),[t,a]=l.useState(!1);l.useState("Loading...");const[s,r]=l.useState("md"),[i,o]=l.useState(!0),[n,d]=l.useState("default");return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6",children:[c.jsxs(Ht.div,{className:`max-w-3xl w-full rounded-2xl overflow-hidden relative p-8 ${e?"bg-gray-800/30":"bg-white/70"} backdrop-blur-lg border ${e?"border-gray-700/50":"border-gray-200"} shadow-xl`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[c.jsx("h1",{className:"text-3xl font-bold mb-6 "+(e?"text-white":"text-gray-800"),children:"Preloader Component"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[c.jsx("div",{className:`rounded-xl p-6 flex flex-col items-center justify-center ${e?"bg-gray-900/40":"bg-gray-50/80"} border ${e?"border-gray-700/50":"border-gray-200/80"}`,children:c.jsx(Vi,{size:s,showProgressText:i,theme:n})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-medium mb-3 "+(e?"text-white":"text-gray-800"),children:"Configuration"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Size"}),c.jsx("div",{className:"flex space-x-3",children:[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}].map((t=>c.jsx("button",{className:"px-3 py-1.5 rounded-md text-sm transition-colors "+(s===t.value?e?"bg-purple-600 text-white":"bg-purple-500 text-white":e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>r(t.value),children:t.label},t.value)))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Theme"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"default",label:"Default"},{value:"spotify",label:"Spotify"},{value:"youtube",label:"YouTube"}].map((t=>c.jsx("button",{className:"px-3 py-1.5 rounded-md text-sm transition-colors "+(n===t.value?e?"bg-purple-600 text-white":"bg-purple-500 text-white":e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>d(t.value),children:t.label},t.value)))})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"showProgressText",checked:i,onChange:()=>o(!i),className:"h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),c.jsx("label",{htmlFor:"showProgressText",className:"ml-2 block text-sm "+(e?"text-gray-300":"text-gray-700"),children:"Show Progress Text"})]})]})]}),c.jsx("button",{onClick:()=>a(!0),className:"w-full py-2.5 px-4 rounded-md font-medium transition-colors "+(e?"bg-purple-600 hover:bg-purple-700 text-white":"bg-purple-500 hover:bg-purple-600 text-white"),children:"Show Fullscreen Preloader"})]})]}),c.jsx("div",{className:"p-4 rounded-lg text-sm "+(e?"bg-gray-900/50 text-gray-300":"bg-gray-100 text-gray-700"),children:c.jsx("p",{children:"This preloader component can be integrated into your application to provide visual feedback during loading processes. Use the fullscreen mode for initial app loading, and the inline versions for component-specific loading states."})})]}),t&&c.jsx("div",{className:"fixed inset-0 z-50",children:c.jsx(Vi,{size:"lg",showProgressText:i,theme:n})}),t&&c.jsx("div",{className:"fixed bottom-6 right-6 z-[60]",children:c.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-white text-gray-800 rounded-md shadow-lg font-medium",children:"Close Fullscreen Preview"})})]})};const qi=({children:e})=>{const{loading:t}=ya(),[a,s]=l.useState(!1),{isLoading:r,isRefreshing:i}=function(){const[e,t]=l.useState({isLoading:!0,isRefreshing:!1,isNavigating:!1,previousUrl:null});return l.useEffect((()=>{let e=Date.now();const a="playlist_converter_page_state",s=()=>{try{const e={lastUrl:window.location.href,timestamp:Date.now()};sessionStorage.setItem(a,JSON.stringify(e))}catch(uo){console.error("Error saving page state:",uo)}},r=()=>{const a=Date.now()-e;setTimeout((()=>{t((e=>({...e,isLoading:!1,isRefreshing:!1,isNavigating:!1})))}),a<1e3?1e3-a:0)};return(()=>{try{const e=sessionStorage.getItem(a);if(e){const a=JSON.parse(e),s=window.location.href,r=a.lastUrl===s;t({isLoading:!0,isRefreshing:r,isNavigating:!r,previousUrl:a.lastUrl})}}catch(uo){console.error("Error reading page state:",uo)}})(),"complete"===document.readyState?r():window.addEventListener("load",r),window.addEventListener("beforeunload",s),()=>{window.removeEventListener("load",r),window.removeEventListener("beforeunload",s)}}),[]),e}(),[o,n]=l.useState("undefined"!=typeof window&&window.HTML_PRELOADER_PROGRESS?window.HTML_PRELOADER_PROGRESS:60),[d,u]=l.useState(!1);return l.useState(!1),l.useEffect((()=>{const e=Gs()||window.innerWidth<768;u(e),console.log("[AppInitializer] Mobile detected:",e)}),[]),l.useEffect((()=>{const e=setTimeout((()=>{window.APP_INITIALIZED||(console.log("[AppInitializer] Fallback timeout - dispatching app-initialized event"),window.dispatchEvent(new CustomEvent("app-initialized",{detail:{progress:100}})),window.APP_INITIALIZED=!0)}),5e3);return()=>clearTimeout(e)}),[]),l.useEffect((()=>{if(r||t){let e;return(()=>{e=setInterval((()=>{n((a=>a<85?a+.7:a<95?a+.3:r||t?95:(clearInterval(e),100)))}),50)})(),()=>{e&&clearInterval(e)}}if(o<100){const e=setTimeout((()=>{n(100)}),100);return()=>clearTimeout(e)}}),[r,t,o]),l.useEffect((()=>{if(o>=100&&!a){const e=setTimeout((()=>{s(!0),window.dispatchEvent(new CustomEvent("app-initialized",{detail:{progress:100}})),console.log("App initialization complete - dispatched app-initialized event"),window.APP_INITIALIZED=!0}),500);return()=>clearTimeout(e)}}),[o,a]),l.useEffect((()=>{if(d){const e=setTimeout((()=>{a||(console.warn("[AppInitializer] Mobile safety timeout triggered - forcing app to load"),n(100),s(!0),window.dispatchEvent(new CustomEvent("app-initialized",{detail:{progress:100}})),console.log("[AppInitializer] Mobile safety timeout - dispatched app-initialized event"),window.APP_INITIALIZED=!0)}),1e4);return()=>clearTimeout(e)}}),[d,a]),!a||r||t?(console.log("[AppInitializer] Showing Preloader",{initialLoadComplete:a,isLoading:r,authLoading:t,progress:o}),c.jsx(Vi,{onComplete:()=>{s(!0),console.log("[AppInitializer] Preloader onComplete called")},theme:t?"spotify":"default",showProgressText:!0,size:"lg",initialProgress:o})):(console.log("[AppInitializer] Rendering children"),c.jsx(c.Fragment,{children:e}))},Ki=({children:e})=>{const[t,a]=l.useState(!1),[s,r]=l.useState(null),{user:i}=ya();return l.useEffect((()=>{i?(async()=>{try{console.log("[TokenManagerInitializer] Starting token manager initialization"),await fa.initializeMonitoring(),console.log("[TokenManagerInitializer] Token manager initialized successfully"),a(!0),r(null)}catch(e){console.error("[TokenManagerInitializer] Failed to initialize token manager:",e),r(e instanceof Error?e.message:"Failed to initialize token manager"),a(!0)}})():(a(!1),r(null))}),[i]),c.jsx(c.Fragment,{children:e})},Xi=({isOpen:e,onClose:t,url:a=window.location.href,title:s="Share",description:r="Check out this playlist conversion!"})=>{const[i,o]=l.useState(!1),[n,d]=l.useState(!1),u=a||window.location.href;l.useEffect((()=>{d("undefined"!=typeof navigator&&"share"in navigator)}),[]);const m=async()=>{try{await navigator.clipboard.writeText(u),o(!0),setTimeout((()=>o(!1)),2e3)}catch(e){console.error("Failed to copy:",e)}};return c.jsx(Gt,{children:e&&c.jsxs(c.Fragment,{children:[c.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50",onClick:t}),c.jsx(Ht.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md z-50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 m-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors",children:c.jsx(O,{size:20})})]}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("input",{type:"text",value:u,readOnly:!0,className:"flex-1 p-2 text-sm border rounded-lg bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white"}),c.jsx("button",{onClick:m,className:"p-2 text-white bg-brand-primary hover:bg-brand-primaryHover rounded-lg transition-colors",title:"Copy to clipboard",children:i?c.jsx(H,{size:20}):c.jsx(G,{size:20})})]}),r&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:r}),c.jsx("button",{onClick:async()=>{if(n)try{await navigator.share({title:s||"SoundSwapp",text:r,url:u})}catch(e){e instanceof Error&&"AbortError"!==e.name&&console.error("Error sharing:",e)}else m()},className:"w-full py-2 px-4 bg-brand-primary hover:bg-brand-primaryHover text-white rounded-lg transition-colors",children:n?"Share":"Copy Link"})]})})]})})},Qi=e=>({name:e.name,artists:e.artists,popularity:e.popularity||0,duration_ms:e.duration_ms||0,explicit:e.explicit||!1,album:e.album||"Unknown Album",releaseYear:e.releaseYear,genres:e.genres||[],artistImages:e.artistImages||[]}),Ji=e=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85C1E9","#D7BDE2"],a=e.split("").reduce(((e,t)=>0|(e=(e<<5)-e+t.charCodeAt(0))),0);return t[Math.abs(a)%t.length]},Zi=e=>{const t={},a={},s={},r={},i={},o=new Set;let n=e.length,l=0,c=0,d=0,u=0,m=0,h=0,x=1/0,p=null,g=null,y=null,f=null,b=0,v=100,w="9999",j="0",N=null,k=null;const S={short:0,medium:0,long:0},T={low:0,medium:0,high:0};e.forEach((e=>{if(e.artists.forEach(((s,r)=>{var i;t[s]=(t[s]||0)+1,(null==(i=e.artistImages)?void 0:i[r])&&!a[s]&&(a[s]=e.artistImages[r])})),e.genres&&e.genres.forEach((e=>{o.add(e),s[e]=(s[e]||0)+1})),e.duration_ms){m+=e.duration_ms;const t=e.duration_ms/1e3/60;t<3?S.short++:t<=5?S.medium++:S.long++,e.duration_ms>h&&(h=e.duration_ms,p=e),e.duration_ms<x&&(x=e.duration_ms,g=e)}if(void 0!==e.popularity&&(u+=e.popularity,d++,e.popularity<=33?T.low++:e.popularity<=66?T.medium++:T.high++,e.popularity>b&&(b=e.popularity,y=e),e.popularity<v&&(v=e.popularity,f=e)),e.releaseYear){const t=e.releaseYear.toString();r[t]=(r[t]||0)+1,t<w&&(w=t,N=e),t>j&&(j=t,k=e)}e.explicit?l++:c++,e.album&&(i[e.album]=(i[e.album]||0)+1)}));const C={},E=Object.values(s).reduce(((e,t)=>e+t),0);Object.entries(s).forEach((([e,t])=>{C[e]=t/E*100}));const P=Object.entries(r).map((([t,a])=>({year:t,count:a,avgPopularity:e.filter((e=>{var a;return(null==(a=e.releaseYear)?void 0:a.toString())===t&&void 0!==e.popularity})).reduce(((e,t)=>e+(t.popularity||0)),0)/a}))).sort(((e,t)=>e.year.localeCompare(t.year))),A={};Object.entries(r).forEach((([e,t])=>{const a=e.slice(0,3)+"0";A[a]=(A[a]||0)+t}));const _=Array.from(o).map((e=>({name:e,count:s[e],color:Ji(e),percentage:C[e]}))).sort(((e,t)=>t.count-e.count)),I=Object.entries(t).map((([t,s])=>{var r;return{name:t,count:s,image:a[t],popularity:null==(r=e.find((e=>e.artists.includes(t))))?void 0:r.popularity}})).sort(((e,t)=>t.count-e.count)).slice(0,10),R=Object.entries(i).map((([t,a])=>{const s=e.find((e=>e.album===t)),r=(null==s?void 0:s.releaseYear)?Number(s.releaseYear):void 0;return{name:t,trackCount:a,year:isNaN(r)?void 0:r}})).sort(((e,t)=>t.trackCount-e.trackCount)).slice(0,5);return{totalTracks:n,avgPopularity:d?u/d:0,totalDuration:Math.round(m/6e4),genres:_,topArtists:I,releaseYears:r,totalGenreMentions:E,mostPopularTrack:y?Qi(y):void 0,leastPopularTrack:f?Qi(f):void 0,longestTrack:p?Qi(p):void 0,shortestTrack:g?Qi(g):void 0,explicitCount:l,nonExplicitCount:c,topAlbums:R,avgTrackLength:m/n,oldestTrack:N?Qi(N):void 0,newestTrack:k?Qi(k):void 0,explicitPercentage:l/n*100,uniqueArtists:Object.keys(t).length,uniqueAlbums:Object.keys(i).length,decadeDistribution:A,genrePercentages:C,yearlyTrends:P,durationCategories:S,popularityRanges:T}},eo=e=>{if(!e)return console.warn("Debug - Received null or undefined track"),{name:"Unknown Track",artists:["Unknown Artist"],popularity:0,duration_ms:0,explicit:!1,album:"Unknown Album",releaseYear:void 0,genres:[],artistImages:[]};console.log("Debug - Converting track data:",e);const t={name:"string"==typeof e.name?e.name:"Unknown Track",artists:Array.isArray(e.artists)?e.artists.filter(Boolean):["string"==typeof e.artists?e.artists:"Unknown Artist"],popularity:"number"!=typeof e.popularity||isNaN(e.popularity)?0:e.popularity,duration_ms:"number"!=typeof e.duration_ms||isNaN(e.duration_ms)?0:e.duration_ms,explicit:"boolean"==typeof e.explicit&&e.explicit,album:"string"==typeof e.album?e.album:"Unknown Album",releaseYear:e.releaseYear?Number(e.releaseYear):void 0,genres:Array.isArray(e.genres)?e.genres.filter(Boolean):[],artistImages:Array.isArray(e.artistImages)?e.artistImages.filter(Boolean):[]};return console.log("Debug - Converted track data:",t),t},to=()=>{const{id:e}=Ue(),{user:t}=ya(),a=b(),{state:s,dispatch:r}=Fs(),[i,o]=l.useState(null),[n,d]=l.useState(!0),[u,m]=l.useState(null),[h,x]=l.useState(null),{isMobile:p}=ti();if(l.useEffect((()=>{(async()=>{if(e){d(!0),m(null);try{let l=null;try{l=await ua()}catch(a){console.warn("Firebase initialization failed, continuing with local data:",a)}const c=localStorage.getItem(`conversion_history_${null==t?void 0:t.uid}`);let d=null;if(c)try{d=JSON.parse(c).find((t=>t.id===e))}catch(i){console.warn("Failed to parse local history:",i)}let u=null,m=null;if(t&&l)try{const a=Je(l,"users",t.uid,"conversions",e),s=await st(a);s.exists()&&(u=s.data())}catch(n){console.warn("Firestore fetch failed, using local data:",n),m=n}if(!u&&d&&(console.log("Using local conversion data as fallback"),u=d),!u){const t=s.conversionHistory.find((t=>t.id===e));t&&(console.log("Using conversion state data"),u=t)}if(!u)throw new Error("Conversion not found. It may have been deleted or you may not have permission to access it.");const h={id:u.id,spotifyPlaylistId:u.spotifyPlaylistId||u.youtubePlaylistId,spotifyPlaylistName:u.spotifyPlaylistName||u.youtubePlaylistName||"Unknown Playlist",tracks:(u.tracks||[]).map(eo),convertedAt:(()=>{const e=u.convertedAt;if(!e)return new Date;if(e&&"object"==typeof e&&e.toDate)return e.toDate();if(e instanceof Date)return e;const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date value:",e,"using current date as fallback"),new Date):t})()};o(h),r({type:"SET_TRACKS",payload:h.tracks})}catch(n){console.error("Error loading conversion:",n);let e="Unable to load conversion data. Please try again.";n.message.includes("not found")?e="Conversion not found. It may have been deleted or you may not have permission to access it.":n.message.includes("permission")?e="You do not have permission to access this conversion.":n.message.includes("network")||n.message.includes("connection")?e="Network error. Please check your connection and try again.":n.message.includes("Firebase")?e="Database connection issue. The app will work with local data only.":n.message&&(e=n.message),m(e)}finally{d(!1)}}})()}),[e,r,t]),l.useEffect((()=>{i&&(async()=>{if(t&&i)try{let s=null;try{s=await ha(t.uid)}catch(e){console.warn("Failed to load insights from Firebase, generating locally:",e)}if(s&&s[i.spotifyPlaylistId])x(s[i.spotifyPlaylistId]);else{const e=Zi(i.tracks);x(e);try{await ma(t.uid,{...s||{},[i.spotifyPlaylistId]:e})}catch(a){console.warn("Failed to save insights to Firebase, but continuing with local data:",a)}}}catch(s){console.warn("Failed to load insights, generating locally:",s),x(Zi(i.tracks))}})()}),[t,i]),l.useEffect((()=>{i&&console.log("Debug - Processed conversion data:",{name:i.spotifyPlaylistName,trackCount:i.tracks.length,sampleTrack:i.tracks[0]})}),[i]),n)return c.jsx(Vi,{showProgressText:!0,theme:"default",size:"lg",initialDelay:0,onComplete:()=>{}});if(u||!i)return c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:u||"No data available"}),c.jsxs("button",{onClick:()=>a("/"),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-900 dark:text-white bg-gray-200 hover:bg-gray-300 dark:bg-brand-primary dark:hover:bg-brand-primaryHover border border-gray-300 dark:border-transparent rounded-md shadow-sm transition-colors",children:[c.jsx(oe,{size:16}),"Back to Converter"]})]})});console.log("Conversion data:",{name:i.spotifyPlaylistName,trackCount:i.tracks.length,sampleTrack:i.tracks[0]});const g=h||Zi(i.tracks);return console.log("Generated playlist stats:",g),c.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12 px-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-content-primary mb-2",children:i.spotifyPlaylistName}),c.jsxs("p",{className:"text-sm text-content-secondary",children:["Converted on ",(()=>{const e=i.convertedAt;return!e||isNaN(e.getTime())?"Recently":e.toLocaleDateString()})()]})]}),c.jsxs("button",{onClick:()=>a("/"),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-900 dark:text-white bg-gray-200 hover:bg-gray-300 dark:bg-brand-primary dark:hover:bg-brand-primaryHover border border-gray-300 dark:border-transparent rounded-md shadow-sm transition-colors",children:[c.jsx(oe,{size:16}),"Back to Converter"]})]}),c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:p?c.jsx(Er,{stats:g,tracks:i.tracks}):c.jsx(mr,{className:"p-4 sm:p-6",shadow:"xl",animate:!0,hoverEffect:!0,children:c.jsx(Cr,{stats:g,tracks:i.tracks})})})]})})},ao=l.createContext(void 0),so=e=>{const t=[],a=e.artists[0],s=e.name.replace(/\(feat\.?.*?\)/gi,"").replace(/\(Explicit.*?\)/gi,"").replace(/\(Album Version\)/gi,"").replace(/\(Clean.*?\)/gi,"").trim();if(t.push(`${a} ${s}`),t.push(`${s} ${a}`),t.push(`${a} - ${s}`),a.includes("(")&&a.includes(")")){const e=a.split("(")[0].trim();t.push(`${e} ${s}`)}if(s.includes("(")){const e=s.split("(")[0].trim();t.push(`${a} ${e}`)}if(a.toLowerCase().includes("feat")){const e=a.split(/feat\.?/i)[0].trim();t.push(`${e} ${s}`)}return[...new Set(t)]},ro={animate:{transition:{staggerChildren:.1}}},io={whileHover:{scale:1.02,y:-2},whileTap:{scale:.98}},oo=({failedTracks:e,onClose:t,onAddToYouTube:a,onAddToSpotify:s})=>{const r=b(),i=Fe(),{state:o}=Fs(),[n,d]=l.useState(null),[u,m]=l.useState({}),[h,x]=l.useState("overview"),[p,g]=l.useState([]),[w,j]=l.useState(!1),[N,k]=l.useState(new Set),S=l.useRef(!1);l.useEffect((()=>{S.current=!1}),[i.pathname]),l.useEffect((()=>{var t;console.log("MobileFailedTracksDetails: useEffect triggered"),console.log("Props failed tracks:",e),console.log("Location state:",i.state),console.log("Has processed data:",S.current),S.current?console.log("Already processed, skipping data processing"):e?(console.log("Using props failed tracks:",e),g(e),S.current=!0):(null==(t=i.state)?void 0:t.failedTracks)?(console.log("Using failed tracks from navigation state:",i.state.failedTracks),g(i.state.failedTracks),S.current=!0):(console.log("No failed tracks found in props or navigation state"),console.log("Setting empty failed tracks array"),g([]),S.current=!0)}),[e,i.state]);const C=async e=>{var t;const s=null==(t=u[e])?void 0:t.youtube;if(s){j(!0);try{await(async(e,t)=>{var s;if(a)return a(e,t);try{const t=o.youtubePlaylistId;if(!t)throw new Error("No YouTube playlist found. Please start a conversion first.");const a=(e.includes("youtube.com")||e.includes("youtu.be"))&&(null==(s=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/))?void 0:s[1])||e;if(!a||11!==a.length)throw new Error("Invalid YouTube video ID. Please provide a valid 11-character video ID or YouTube URL.");console.log(`Adding YouTube video ${a} to playlist ${t}`),await Oa(0,t,a),console.log("Successfully added YouTube video to playlist")}catch(r){throw console.error("Error adding YouTube video:",r),r}})(s,e),k((t=>new Set([...t,e])))}catch(r){console.error("Failed to add to YouTube:",r)}finally{j(!1)}}},E=async e=>{var t;const a=null==(t=u[e])?void 0:t.spotify;if(a){j(!0);try{await(async(e,t)=>{if(s)return s(e,t);try{const t=o.spotifyPlaylistId;if(!t)throw new Error("No Spotify playlist found. Please start a conversion first.");let a=e;if(e.includes("spotify.com/track/")){const t=e.match(/spotify\.com\/track\/([a-zA-Z0-9]+)/);t&&(a=`spotify:track:${t[1]}`)}if(!a.startsWith("spotify:track:"))throw new Error("Invalid Spotify track URI. Please provide a valid track URI or Spotify URL.");console.log(`Adding Spotify track ${a} to playlist ${t}`),await _a(t,[a]),console.log("Successfully added Spotify track to playlist")}catch(a){throw console.error("Error adding Spotify track:",a),a}})(a,e),k((t=>new Set([...t,e])))}catch(r){console.error("Failed to add to Spotify:",r)}finally{j(!1)}}},P=(e,t,a)=>{let s=a;if("youtube"===t&&(a.includes("youtube.com")||a.includes("youtu.be"))){const e=a.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);e&&(s=e[1])}if("spotify"===t&&a.includes("spotify.com/track/")){const e=a.match(/spotify\.com\/track\/([a-zA-Z0-9]+)/);e&&(s=`spotify:track:${e[1]}`)}m((a=>({...a,[e]:{...a[e],[t]:s}})))};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 font-sf-pro",children:[c.jsx(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-b border-gray-200/50 dark:border-gray-700/50 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{t?t():r("/")},className:"p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:c.jsx(v,{size:20})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg",children:c.jsx(y,{size:20})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-sf-pro-display font-bold text-gray-900 dark:text-white",children:"Failed Tracks"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[null==p?void 0:p.length," tracks failed to convert"]})]})]})]}),c.jsxs(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const e=null==p?void 0:p.map((e=>encodeURIComponent(e.artists[0]+" "+e.name)));null==e||e.forEach((e=>{window.open(`https://www.youtube.com/results?search_query=${e}`,"_blank")}))},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm flex items-center gap-1",children:[c.jsx(V,{size:14}),"Search All"]})]})}),c.jsxs("div",{className:"px-4 py-6 space-y-6",children:[c.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex justify-center",children:c.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl max-w-full overflow-x-auto hide-scrollbar",children:[{key:"overview",label:"Overview",icon:f},{key:"search",label:"Search",icon:B},{key:"manual",label:"Manual Add",icon:T}].map((({key:e,label:t,icon:a})=>c.jsxs(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(e),className:"flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all whitespace-nowrap min-w-0 flex-shrink-0 "+(h===e?"bg-gradient-to-r from-orange-500 to-pink-500 text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border border-gray-200/60 dark:border-gray-600/60 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600"),disabled:w,children:[c.jsx(a,{size:14}),c.jsx("span",{className:"text-xs font-medium",children:t})]},e)))})}),c.jsxs(Gt,{mode:"wait",children:["overview"===h&&c.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-6",children:[c.jsxs(Ht.div,{variants:ro,initial:"initial",animate:"animate",className:"grid grid-cols-2 gap-4",children:[c.jsxs(Ht.div,{...io,className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-md",children:c.jsx(y,{size:16})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Failed"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total count"})]})]}),c.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:null==p?void 0:p.length})]}),c.jsxs(Ht.div,{...io,className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-r from-orange-500 to-yellow-500 text-white shadow-md",children:c.jsx(B,{size:16})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"No Matches"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Search issues"})]})]}),c.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:null==p?void 0:p.filter((e=>e.reason.includes("No match")||e.reason.includes("below threshold"))).length})]})]}),c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-xl p-4 border border-yellow-200/50 dark:border-yellow-700/50",children:[c.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[c.jsx(f,{className:"text-yellow-600 dark:text-yellow-400",size:18}),"Search Tips"]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full"}),c.jsx("span",{children:'Remove "feat." from artist names'})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full"}),c.jsx("span",{children:"Try just the main artist name"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full"}),c.jsx("span",{children:"Check for remixes or live versions"})]})]})]})]},"overview"),"search"===h&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-4",children:c.jsx("div",{className:"space-y-4",children:null==p?void 0:p.map(((e,t)=>{return c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm "+(N.has(t)?"ring-2 ring-green-500/50":""),children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:e.name}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",e.artists.join(", ")]}),void 0!==e.bestMatchScore&&e.bestMatchScore>0&&c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-1 rounded-full",children:["Best match: ",Math.round(100*e.bestMatchScore),"%"]})})]}),c.jsxs("div",{className:"space-y-3 mb-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Reason:"}),c.jsx("p",{className:"text-xs mt-1 "+(a=e.reason,a.includes("No match found")||a.includes("below threshold")?"text-orange-600 dark:text-orange-400":a.includes("Failed to add")||a.includes("Error")?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"),children:e.reason})]}),c.jsxs("div",{children:[c.jsxs("h5",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[c.jsx(B,{className:"h-3 w-3"}),"Try these searches:"]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:so(e).slice(0,3).map(((e,t)=>c.jsx(Ht.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),d(e),setTimeout((()=>d(null)),2e3)}catch(t){console.error("Failed to copy to clipboard:",t)}})(e),className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800/30 transition-colors cursor-pointer flex items-center gap-1",disabled:w,children:n===e?c.jsxs(c.Fragment,{children:[c.jsx(H,{className:"h-2 w-2"}),"Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(G,{className:"h-2 w-2"}),e.length>20?e.substring(0,20)+"...":e]})},t)))})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{const t=encodeURIComponent(e.artists[0]+" "+e.name);window.open(`https://www.youtube.com/results?search_query=${t}`,"_blank")},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs flex items-center justify-center",disabled:w,children:c.jsx(B,{size:14})}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{const t=encodeURIComponent(e.artists[0]+" "+e.name);window.open(`https://open.spotify.com/search/${t}`,"_blank")},className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs flex items-center justify-center",disabled:w,children:c.jsx(B,{size:14})})]})]},t);var a}))})},"search"),"manual"===h&&c.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.25,.46,.45,.94]},className:"space-y-4",children:c.jsx("div",{className:"space-y-4",children:null==p?void 0:p.map(((e,t)=>{var a,s,r,i;const o=N.has(t),n=Boolean(null==(a=u[t])?void 0:a.youtube),l=Boolean(null==(s=u[t])?void 0:s.spotify);return c.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/80 dark:bg-gray-800/80 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/50 shadow-lg backdrop-blur-sm "+(o?"ring-2 ring-green-500/50":""),children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-base font-semibold text-gray-900 dark:text-white mb-1",children:e.name}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",e.artists.join(", ")]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"p-1.5 rounded-lg bg-red-500 text-white",children:c.jsx(W,{size:12})}),c.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Add to YouTube"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",placeholder:"YouTube video ID or URL",value:(null==(r=u[t])?void 0:r.youtube)||"",onChange:e=>P(t,"youtube",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-red-500",disabled:w||o}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C(t),disabled:!n||w||o,className:"w-full px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?c.jsxs(c.Fragment,{children:[c.jsx(re,{size:14,className:"animate-spin"}),"Adding..."]}):o?c.jsxs(c.Fragment,{children:[c.jsx(Ye,{size:14}),"Added"]}):"Add to YouTube"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"p-1.5 rounded-lg bg-green-500 text-white",children:c.jsx(T,{size:12})}),c.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Add to Spotify"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",placeholder:"Spotify track URI or URL",value:(null==(i=u[t])?void 0:i.spotify)||"",onChange:e=>P(t,"spotify",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500",disabled:w||o}),c.jsx(Ht.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>E(t),disabled:!l||w||o,className:"w-full px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?c.jsxs(c.Fragment,{children:[c.jsx(re,{size:14,className:"animate-spin"}),"Adding..."]}):o?c.jsxs(c.Fragment,{children:[c.jsx(Ye,{size:14}),"Added"]}):"Add to Spotify"})]})]})]})]},t)}))})},"manual")]})]}),w&&c.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-xl flex items-center gap-3",children:[c.jsx(re,{size:24,className:"animate-spin text-blue-600"}),c.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Processing..."})]})})]})},no="\n  :root {\n    --angle: 0deg;\n  }\n  \n  @property --angle {\n    syntax: '<angle>';\n    initial-value: 0deg;\n    inherits: false;\n  }\n  \n  @keyframes rotate {\n    to {\n      --angle: 360deg;\n    }\n  }\n";function lo(){l.useState(!1),l.useState(!0);const[e,t]=l.useState(!1),{isMobile:a,isPortrait:s,isIOS:r,isAndroid:i}=ti(),o="true"===new URLSearchParams(window.location.search).get("mobile")||"true"===localStorage.getItem("forceMobile"),{isOpen:n,shareData:d,closeShareModal:u}=(()=>{const[e,t]=l.useState(!1),[a,s]=l.useState({});return l.useEffect((()=>{const e=e=>{s(e.detail),t(!0)};return window.addEventListener("openShareModal",e),()=>{window.removeEventListener("openShareModal",e)}}),[]),{isOpen:e,shareData:a,closeShareModal:()=>{t(!1),s({})}}})();l.useEffect((()=>{console.log("App.tsx: Mobile detection state:",{isMobile:a,isPortrait:s,isIOS:r,isAndroid:i}),Cs.initialize(),t(!0),window.toggleMobileLayout=()=>{const e="true"===localStorage.getItem("forceMobile");localStorage.setItem("forceMobile",(!e).toString()),window.location.reload()},a&&(console.log("Mobile device detected",{isPortrait:s,isIOS:r,isAndroid:i}),window._mobileDebug={isMobile:a,isPortrait:s,isIOS:r,isAndroid:i,userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio},date:(new Date).toISOString()})}),[a,s,r,i]),l.useEffect((()=>{if(a){document.body.classList.add("defer-animations");const e=setTimeout((()=>{document.body.classList.remove("defer-animations"),document.body.classList.add("animations-ready")}),1e3);return s?(document.body.classList.add("portrait"),document.body.classList.remove("landscape")):(document.body.classList.add("landscape"),document.body.classList.remove("portrait")),r&&document.body.classList.add("ios-device"),i&&document.body.classList.add("android-device"),()=>clearTimeout(e)}}),[a,s,r,i]);const m=l.useMemo((()=>({isMobile:a,isPortrait:s,isLandscape:!s,isIOS:r,isAndroid:i,isTablet:a&&!s,viewport:{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio||1},isSmallScreen:window.innerWidth<640,isMediumScreen:window.innerWidth>=640&&window.innerWidth<1024,isLargeScreen:window.innerWidth>=1024,isMobileOrTablet:a,isStandalone:window.matchMedia("(display-mode: standalone)").matches})),[a,s,r,i]),h=a||o;return console.log("App.tsx: Rendering layout:",{isMobile:a,forceMobile:o,shouldRenderMobile:h,isPortrait:s,layout:h?"MOBILE":"DESKTOP"}),e?h?(console.log("App.tsx: Rendering MOBILE layout"),c.jsx(Wt,{children:c.jsx(ga,{children:c.jsx(Os,{children:c.jsx($s,{children:c.jsx(Ki,{children:c.jsxs(ao.Provider,{value:m,children:[c.jsx(Xs,{colorScheme:"colorful",density:"medium",interactive:!0,className:"fixed top-0 left-0 w-full h-full z-[-1]"}),c.jsxs($e,{children:[c.jsx("style",{children:no}),c.jsxs(qi,{children:[c.jsxs(ze,{children:[c.jsx(Oe,{path:"/",element:c.jsx(Bi,{element:c.jsx(Li,{})})}),c.jsx(Oe,{path:"/login",element:c.jsx(Oi,{})}),c.jsx(Oe,{path:"/callback",element:c.jsx(Ui,{})}),c.jsx(Oe,{path:"/youtube-callback",element:c.jsx(Yi,{})}),c.jsx(Oe,{path:"/privacy-policy",element:c.jsx(Hi,{})}),c.jsx(Oe,{path:"/terms-of-service",element:c.jsx(Gi,{})}),c.jsx(Oe,{path:"/preloader-demo",element:c.jsx(Wi,{})}),c.jsx(Oe,{path:"/insights/:id",element:c.jsx(Bi,{element:c.jsx(to,{})})}),c.jsx(Oe,{path:"/preferences",element:c.jsx(Bi,{element:c.jsx(yi,{})})}),c.jsx(Oe,{path:"/preferences/theme",element:c.jsx(Bi,{element:c.jsx(fi,{})})}),c.jsx(Oe,{path:"/preferences/notifications",element:c.jsx(Bi,{element:c.jsx(bi,{})})}),c.jsx(Oe,{path:"/preferences/privacy",element:c.jsx(Bi,{element:c.jsx(vi,{})})}),c.jsx(Oe,{path:"/preferences/export",element:c.jsx(Bi,{element:c.jsx(wi,{})})}),c.jsx(Oe,{path:"/settings",element:c.jsx(De,{to:"/preferences",replace:!0})}),c.jsx(Oe,{path:"/premium",element:c.jsx(Bi,{element:c.jsx(_i,{})})}),c.jsx(Oe,{path:"/help",element:c.jsx(Bi,{element:c.jsx(Ci,{})})}),c.jsx(Oe,{path:"/profile/edit",element:c.jsx(Bi,{element:c.jsx(pi,{})})}),c.jsx(Oe,{path:"/failed-tracks",element:c.jsx(Bi,{element:c.jsx(oo,{})})}),c.jsx(Oe,{path:"*",element:c.jsx(De,{to:"/",replace:!0})})]}),c.jsx(Xi,{isOpen:n,onClose:u,title:d.title,url:d.url,description:d.description})]})]})]})})})})})})):(console.log("App.tsx: Rendering DESKTOP layout"),c.jsx(Wt,{children:c.jsx(ga,{children:c.jsx(Os,{children:c.jsx($s,{children:c.jsx(Ki,{children:c.jsxs(ao.Provider,{value:m,children:[c.jsx(Xs,{colorScheme:"colorful",density:"medium",interactive:!0,className:"fixed top-0 left-0 w-full h-full z-[-1]"}),c.jsxs($e,{children:[c.jsx("style",{children:no}),c.jsxs(qi,{children:[c.jsxs(ze,{children:[c.jsx(Oe,{path:"/",element:c.jsx(Bi,{element:c.jsx(Xr,{})})}),c.jsx(Oe,{path:"/login",element:c.jsx(zi,{})}),c.jsx(Oe,{path:"/callback",element:c.jsx(Ui,{})}),c.jsx(Oe,{path:"/youtube-callback",element:c.jsx(Yi,{})}),c.jsx(Oe,{path:"/privacy-policy",element:c.jsx(Hi,{})}),c.jsx(Oe,{path:"/terms-of-service",element:c.jsx(Gi,{})}),c.jsx(Oe,{path:"/preloader-demo",element:c.jsx(Wi,{})}),c.jsx(Oe,{path:"/insights/:id",element:c.jsx(Bi,{element:c.jsx(to,{})})}),c.jsx(Oe,{path:"/preferences",element:c.jsx(Bi,{element:c.jsx(yi,{})})}),c.jsx(Oe,{path:"/preferences/theme",element:c.jsx(Bi,{element:c.jsx(fi,{})})}),c.jsx(Oe,{path:"/preferences/notifications",element:c.jsx(Bi,{element:c.jsx(bi,{})})}),c.jsx(Oe,{path:"/preferences/privacy",element:c.jsx(Bi,{element:c.jsx(vi,{})})}),c.jsx(Oe,{path:"/preferences/export",element:c.jsx(Bi,{element:c.jsx(wi,{})})}),c.jsx(Oe,{path:"/settings",element:c.jsx(De,{to:"/preferences",replace:!0})}),c.jsx(Oe,{path:"/premium",element:c.jsx(Bi,{element:c.jsx(_i,{})})}),c.jsx(Oe,{path:"/help",element:c.jsx(Bi,{element:c.jsx(Ci,{})})}),c.jsx(Oe,{path:"/profile/edit",element:c.jsx(Bi,{element:c.jsx(pi,{})})}),c.jsx(Oe,{path:"*",element:c.jsx(De,{to:"/",replace:!0})})]}),c.jsx(Xi,{isOpen:n,onClose:u,title:d.title,url:d.url,description:d.description})]})]})]})})})})})})):(console.log("App.tsx: Mobile detection not ready yet, showing loading..."),c.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Detecting device..."})]})}))}function co(e){e.addEventListener("load",(()=>{var t;try{const a=e.contentDocument||(null==(t=e.contentWindow)?void 0:t.document);if(!a)return void console.log("[Polyfill] Cannot access iframe content (likely cross-origin)");const s=a.createElement("script");s.textContent="\n  if (typeof browser === 'undefined') {\n    window.browser = {\n      runtime: { \n        sendMessage: () => Promise.resolve(),\n        onMessage: {\n          addListener: () => {},\n          removeListener: () => {}\n        },\n        getURL: (path) => path\n      },\n      tabs: {\n        query: () => Promise.resolve([]),\n        sendMessage: () => Promise.resolve(),\n        create: () => Promise.resolve({}),\n        update: () => Promise.resolve()\n      },\n      storage: {\n        local: {\n          get: () => Promise.resolve({}),\n          set: () => Promise.resolve()\n        },\n        sync: {\n          get: () => Promise.resolve({}),\n          set: () => Promise.resolve()\n        }\n      },\n      i18n: {\n        getMessage: () => ''\n      }\n    };\n    console.log('[Polyfill] Browser API polyfilled');\n  }\n",a.head.appendChild(s);const r=a.createElement("script");r.textContent="\n  if (window.trustedTypes && window.trustedTypes.createPolicy) {\n    try {\n      window.trustedTypes.createPolicy('default', {\n        createHTML: (string) => string,\n        createScriptURL: (string) => string,\n        createScript: (string) => string\n      });\n      console.log('[Polyfill] Default TrustedTypes policy created');\n    } catch (e) {\n      console.log('[Polyfill] Default policy already exists');\n    }\n    \n    try {\n      window.trustedTypes.createPolicy('firebase-js-sdk-policy', {\n        createScriptURL: (string) => string\n      });\n      console.log('[Polyfill] Firebase TrustedTypes policy created');\n    } catch (e) {\n      console.log('[Polyfill] Firebase policy already exists');\n    }\n  }\n",a.head.appendChild(r),console.log("[Polyfill] Injected polyfills into iframe:",e.src)}catch(a){console.log("[Polyfill] Error injecting into iframe:",a)}}))}if("undefined"!=typeof window&&window.trustedTypes&&window.trustedTypes.createPolicy){try{window.trustedTypes.createPolicy("default",{createHTML:e=>e,createScriptURL:e=>e,createScript:e=>e}),console.log("[TrustedTypes] Default policy created")}catch(uo){console.log("[TrustedTypes] Default policy already exists")}try{window.trustedTypes.createPolicy("firebase-js-sdk-policy",{createScriptURL:e=>e}),console.log("[TrustedTypes] Firebase policy created")}catch(uo){console.log("[TrustedTypes] Firebase policy already exists")}}"undefined"!=typeof window&&(window.React=u),u&&u.isValidElement||console.error("React is not properly loaded"),{}.VITE_SENTRY_DSN&&d((()=>import("./react-core-d1332efd.js").then((e=>e.aB))),["assets/react-core-d1332efd.js","assets/vendor-0d2b1560.js"]).then((({init:e})=>{e({dsn:{}.VITE_SENTRY_DSN,tracesSampleRate:.1,replaysSessionSampleRate:0})})).catch((()=>{})),function(){document.querySelectorAll("iframe").forEach(co);const e=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if("IFRAME"===e.nodeName)co(e);else if(1===e.nodeType){e.querySelectorAll("iframe").forEach(co)}}))}))}));e.observe(document.body,{childList:!0,subtree:!0}),console.log("[Polyfill] Iframe observer started")}();Be.createRoot(document.getElementById("root")).render(c.jsx(u.StrictMode,{children:c.jsx(lo,{})})),setTimeout((()=>{window.dispatchEvent(new CustomEvent("app-initialized",{detail:{progress:100}}))}),100);
//# sourceMappingURL=index-9da57ed5.js.map
